(window.webpackJsonp=window.webpackJsonp||[]).push([[352],{1296:function(e,t,a){"use strict";a.r(t);var n,r=a(892),o=a(695),i=a(738),l=a(709),s=a(716),c=a(762),u=a(715),m=a(697),p=a(814),d=a(28),v=a(805),f=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),h=function(){return(h=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},y=function(e){function t(t){var a=e.call(this,t)||this;a.mounted=!1,a.getParams=function(e){var t=void 0===e?a.props:e,n=t.activation,r=t.rule,o={};if(r&&r.params){for(var i=0,l=r.params;i<l.length;i++){o[(u=l[i]).key]=u.defaultValue||""}if(n&&n.params)for(var s=0,c=n.params;s<c.length;s++){var u;o[(u=c[s]).key]=u.value}}return o},a.getQualityProfilesWithDepth=function(e){var t=(void 0===e?a.props:e).profiles;return Object(v.g)(t.filter(function(e){return!e.isBuiltIn&&e.actions&&e.actions.edit&&e.language===a.props.rule.lang})).map(function(e){return h({},e,{depth:e.depth-1})})},a.handleFormSubmit=function(e){e.preventDefault(),a.setState({submitting:!0});var t={key:a.state.profile,organization:a.props.organization,params:a.state.params,rule:a.props.rule.key,severity:a.state.severity};Object(i.a)(t).then(function(){return a.props.onDone(t.severity)}).then(function(){a.mounted&&(a.setState({submitting:!1}),a.props.onClose())},function(){a.mounted&&a.setState({submitting:!1})})},a.handleParameterChange=function(e){var t=e.currentTarget,n=t.name,r=t.value;a.setState(function(e){var t;return{params:h({},e.params,(t={},t[n]=r,t))}})},a.handleProfileChange=function(e){var t=e.value;a.setState({profile:t})},a.handleSeverityChange=function(e){var t=e.value;a.setState({severity:t})},a.renderSeverityOption=function(e){var t=e.value;return o.createElement(c.a,{severity:t})};var n=a.getQualityProfilesWithDepth(t);return a.state={params:a.getParams(t),profile:n.length>0?n[0].key:"",severity:t.activation?t.activation.severity:t.rule.severity,submitting:!1},a}return f(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this,t=this.props,a=t.activation,n=t.rule,i=this.state,c=i.profile,v=i.severity,f=i.submitting,h=n.params,y=void 0===h?[]:h,g=this.getQualityProfilesWithDepth(),b=!!n.templateKey,E=g.length<=0,O=!!a;return o.createElement(l.a,{contentLabel:this.props.modalHeader,onRequestClose:this.props.onClose,size:"small"},o.createElement("form",{onSubmit:this.handleFormSubmit},o.createElement("div",{className:"modal-head"},o.createElement("h2",null,this.props.modalHeader)),o.createElement("div",{className:"modal-body modal-container"},!O&&E&&o.createElement(u.a,{variant:"info"},Object(d.l)("coding_rules.active_in_all_profiles")),o.createElement("div",{className:"modal-field"},o.createElement("label",null,Object(d.l)("coding_rules.quality_profile")),o.createElement(s.c,{className:"js-profile",clearable:!1,disabled:f||1===g.length,onChange:this.handleProfileChange,options:g.map(function(e){return{label:"   ".repeat(e.depth)+e.name,value:e.key}}),value:c})),o.createElement("div",{className:"modal-field"},o.createElement("label",null,Object(d.l)("severity")),o.createElement(s.c,{className:"js-severity",clearable:!1,disabled:f,onChange:this.handleSeverityChange,optionRenderer:this.renderSeverityOption,options:p.e.map(function(e){return{label:Object(d.l)("severity",e),value:e}}),searchable:!1,value:v,valueRenderer:this.renderSeverityOption})),b?o.createElement("div",{className:"modal-field"},o.createElement("p",{className:"note"},Object(d.l)("coding_rules.custom_rule.activation_notice"))):y.map(function(t){return o.createElement("div",{className:"modal-field",key:t.key},o.createElement("label",{title:t.key},t.key),"TEXT"===t.type?o.createElement("textarea",{disabled:f,name:t.key,onChange:e.handleParameterChange,placeholder:t.defaultValue,rows:3,value:e.state.params[t.key]||""}):o.createElement("input",{disabled:f,name:t.key,onChange:e.handleParameterChange,placeholder:t.defaultValue,type:"text",value:e.state.params[t.key]||""}),o.createElement("div",{className:"note",dangerouslySetInnerHTML:{__html:Object(r.sanitize)(t.htmlDesc||"")}}))})),o.createElement("footer",{className:"modal-foot"},f&&o.createElement("i",{className:"spinner spacer-right"}),o.createElement(m.i,{disabled:f||E},O?Object(d.l)("save"):Object(d.l)("coding_rules.activate")),o.createElement(m.h,{disabled:f,onClick:this.props.onClose},Object(d.l)("cancel")))))},t}(o.PureComponent);t.default=y},709:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(695),r=a(740),o=a(696),i=function(){return(i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function l(e){return n.createElement(r,i({className:o("modal",{"modal-small":"small"===e.size,"modal-medium":"medium"===e.size,"modal-large":"large"===e.size}),isOpen:!0,overlayClassName:o("modal-overlay",{"modal-no-backdrop":e.noBackdrop})},e))}r.setAppElement("#content")},762:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(695),r=a(862),o=a(28);function i(e){var t=e.className,a=e.severity;return a?n.createElement("span",{className:t},n.createElement(r.a,{className:"little-spacer-right",severity:a}),Object(o.l)("severity",a)):null}},829:function(e,t,a){var n;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
!function(){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(n=function(){return o}.call(t,a,t,e))||(e.exports=n)}()}}]);
//# sourceMappingURL=352.1605082598434.chunk.js.map