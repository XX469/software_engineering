{"version":3,"sources":["webpack:///../sonar-docs/src/tooltips/rules/rules-quality-profiles.md","webpack:///../sonar-docs/src/tooltips/rules/rule-templates.md","webpack:///./node_modules/lodash/filter.js","webpack:///./node_modules/lodash/_baseFilter.js","webpack:///../sonar-docs/src/tooltips/rules/custom-rule-removal.md","webpack:///./src/main/js/apps/coding-rules/components/BulkChangeModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChange.tsx","webpack:///./src/main/js/apps/coding-rules/components/Facet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/AvailableSinceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/DefaultSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/InheritanceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/LanguageFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ProfileFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/RepositoryFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/StatusFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TagFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TemplateFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TypeFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/FacetsList.tsx","webpack:///./src/main/js/apps/coding-rules/components/PageActions.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsCustomRules.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsIssues.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsParameters.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleInheritanceIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsProfiles.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetails.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleListItem.tsx","webpack:///./src/main/js/apps/coding-rules/components/App.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.tsx","webpack:///./src/main/js/components/controls/SimpleModal.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.css?558a","webpack:///./src/main/js/components/controls/HelpTooltip.css","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/components/controls/ConfirmModal.tsx","webpack:///./src/main/js/components/controls/ListFooter.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/helpers/pages.ts","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/components/controls/ConfirmButton.tsx","webpack:///./src/main/js/components/controls/ModalButton.tsx","webpack:///./node_modules/lodash/map.js","webpack:///./src/main/js/api/rules.ts","webpack:///./src/main/js/components/facet/FacetBox.tsx","webpack:///./src/main/js/components/facet/FacetHeader.tsx","webpack:///./src/main/js/components/icons-components/ChevronDownIcon.tsx","webpack:///./src/main/js/components/facet/FacetItem.tsx","webpack:///./src/main/js/helpers/csv.ts","webpack:///./src/main/js/components/icons-components/OpenCloseIcon.tsx","webpack:///./src/main/js/components/facet/FacetItemsList.tsx","webpack:///./src/main/js/components/hoc/withAppState.tsx","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/helpers/organizations.ts","webpack:///./src/main/js/components/facet/ListStyleFacetFooter.tsx","webpack:///./src/main/js/components/facet/ListStyleFacet.tsx","webpack:///./src/main/js/helpers/search.tsx","webpack:///./src/main/js/components/facet/MultipleSelectionHint.tsx","webpack:///./src/main/js/components/search-navigator.css?cb81","webpack:///./src/main/js/components/search-navigator.css","webpack:///./node_modules/lodash/orderBy.js","webpack:///./src/main/js/helpers/strings.ts","webpack:///./src/main/js/components/controls/ReloadButton.tsx","webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///../sonar-docs/src/tooltips/quality-profiles/built-in-quality-profile.md","webpack:///./src/main/js/apps/coding-rules/components/SimilarRulesFilter.tsx","webpack:///../sonar-docs/src/tooltips/rules/custom-rules.md","webpack:///./src/main/js/apps/coding-rules/styles.css?1250","webpack:///./src/main/js/apps/coding-rules/styles.css","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css?a58b","webpack:///./src/main/js/components/facet/MultipleSelectionHint.css","webpack:///./src/main/js/apps/issues/sidebar/StandardFacet.tsx","webpack:///./src/main/js/components/common/PageCounter.tsx","webpack:///./src/main/js/components/shared/TypeHelper.tsx","webpack:///./src/main/js/components/common/FiltersHeader.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsTagsPopup.tsx","webpack:///./src/main/js/components/icons-components/RuleScopeIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsMeta.tsx","webpack:///./src/main/js/apps/coding-rules/components/RemoveExtendedDescriptionModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsDescription.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationFormModal.tsx"],"names":["__webpack_require__","r","__webpack_exports__","arrayFilter","baseFilter","baseIteratee","isArray","module","exports","collection","predicate","baseEach","result","value","index","push","BulkChangeModal_BulkChangeModal","index_js_exposed","[object Object]","props","_this","super","this","mounted","handleProfileSelect","options","selectedProfiles","map","option","setState","getAvailableQualityProfiles","_ref","arguments","length","undefined","query","referencedProfiles","profiles","Object","values","languages","filter","profile","includes","language","actions","edit","isBuiltIn","processResponse","response","failed","succeeded","state","results","sendRequests","looper","Promise","resolve","data","coding_rules_query","method","action","quality_profiles","key","then","assign","organization","targetKey","handleFormSubmit","event","preventDefault","submitting","finished","renderResult","profileKey","name","Alert","variant","l10n","renderProfileSelect","label","concat","languageName","Select","multi","onChange","availableProfiles","_this$props","total","header","measures","Modal","contentLabel","onRequestClose","onClose","size","onSubmit","className","htmlFor","buttons","disabled","id","onClick","BulkChange_BulkChange","modal","getSelectedProfile","closeModal","handleActivateClick","currentTarget","blur","handleActivateInProfileClick","handleDeactivateClick","handleDeactivateInProfileClick","some","Boolean","activation","canChangeProfile","allowActivateOnProfile","allowDeactivateOnProfile","Dropdown","overlay","href","Facet_Facet","handleItemClick","itemValue","multiple","newValue","singleSelection","orderBy_default","without_default","property","handleHeaderClick","onToggle","handleClear","getStat","stats","renderItem","active","stat","_this$props$renderNam","renderName","defaultRenderName","_this$props$renderTex","renderTextName","FacetItem","halfWidth","tooltip","_this$props2","_this$props2$renderTe","items","sortBy_default","keys","toLowerCase","FacetBox","classnames","search-navigator-facet-box-forbidden","FacetHeader","Tooltip","disabledHelper","onClear","open","children","FacetItemsList","renderFooter","ActivationSeverityFacet_ActivationSeverityFacet","severity","SeverityHelper","constants","components_AvailableSinceFacet","index_es","availableSince","handlePeriodChange","date","getValues","intl","formatDate","DateFormatter","DateInput","placeholder","DefaultSeverityFacet_DefaultSeverityFacet","InheritanceFacet_InheritanceFacet","_a","__rest","components_LanguageFacet","es","installedLanguages","rootReducer","getLanguageName","languageKey","find","l","handleSearch","getAllPossibleOptions","paging","pageIndex","pageSize","_this$props$stats","uniqBy_default","renderSearchResult","term","search","ListStyleFacet","facetHeader","fetching","getFacetItemText","getSearchResultKey","getSearchResultText","minSearchLength","onSearch","renderFacetItem","searchPlaceholder","ProfileFacet_ProfileFacet","selected","compareToProfile","activationSeverities","inheritance","handleActiveClick","stopPropagation","handleInactiveClick","getTextValue","getTooltip","base","renderActivation","isCompare","aria-checked","facet-toggle-active","role","tabIndex","DocTooltip","doc","bind","components_RepositoryFacet","referencedLanguages","repositoryKey","repository","referencedRepositories","facetProps","RepositoryFacet_rest","StatusFacet_StatusFacet","status","TagFacet_TagFacet","api_rules","ps","q","tags","handleSelect","uniq_default","getTagName","tag","renderTag","TagsIcon","fill","theme","TemplateFacet_TemplateFacet","handleChange","changes","template","Array","TemplateFacet_rest","String","TypeFacet_TypeFacet","type","IssueTypeIcon","FacetsList","languageDisabled","hideProfileFacet","inheritanceDisabled","selectedProfile","isInherited","activationSeverityDisabled","onFilterChange","onFacetToggle","openFacets","facets","types","repositories","severities","statuses","StandardFacet","cwe","cweOpen","cweStats","fetchingCwe","fetchingOwaspTop10","fetchingSansTop25","fetchingSonarSourceSecurity","standards","owaspTop10","owaspTop10Open","owaspTop10Stats","sansTop25","sansTop25Open","sansTop25Stats","sonarsourceSecurity","sonarsourceSecurityOpen","sonarsourceSecurityStats","organizationsEnabled","PageActions","Shortcuts","DeferredSpinner","loading","ReloadButton","onReload","PageCounter","current","selectedIndex","CustomRuleFormModal_CustomRuleFormModal","prepareRequest","customRule","templateRule","params","csv","join","ruleData","markdown_description","description","custom_key","prevent_reactivation","reactivating","template_key","newRuleDetails","onDone","handleNameChange","keyModifiedByUser","strings","replace","handleKeyChange","handleDescriptionChange","handleTypeChange","handleSeverityChange","_ref2","handleStatusChange","_ref3","handleParameterChange","_event$currentTarget","renderNameField","autoFocus","required","renderKeyField","title","renderDescriptionField","rows","MarkdownTips","renderTypeOption","_ref4","TypeHelper","renderTypeField","clearable","optionRenderer","searchable","valueRenderer","renderSeverityOption","_ref5","renderSeverityField","renderStatusField","renderParameterField","param","defaultValue","dangerouslySetInnerHTML","__html","purify","htmlDesc","mdDesc","_this$state","_templateRule$params","submit","CustomRuleButton_CustomRuleButton","handleClick","handleModalClose","handleDone","RuleDetailsCustomRules_RuleDetailsCustomRules","fetchRules","f","ruleDetails","rules","handleRuleCreate","_ref2$rules","handleRuleDelete","ruleKey","_ref3$rules","rule","renderRule","data-rule","react_router_es","to","urls","canChange","ConfirmButton","confirmButtonText","confirmData","isDestructive","modalBody","modalHeader","onConfirm","prevProps","_this$state$rules","components_RuleDetailsIssues","withAppState","getBaseIssuesQuery","resolved","fetchIssues","issues","facet","_response$components","components","projects","item","project","component","val","count","renderTotal","path","totalItem","appState","branchesEnabled","renderProject","_this$state$projects","colSpan","RuleDetailsParameters_RuleDetailsParameters","renderParameter","ActivationButton_ActivationButton","handleButtonClick","handleCloseModal","buttonText","ActivationFormModal","RuleInheritanceIcon","other","RuleInheritanceIcon_rest","height","version","viewBox","width","xmlSpace","xmlnsXlink","d","style","fillRule","RuleDetailsProfiles_RuleDetailsProfiles","handleActivate","onActivate","handleDeactivate","onDeactivate","handleRevert","reset","renderInheritedProfile","parentName","profilePath","inherit","renderSeverity","parentActivation","originalParam","p","originalValue","renderParameters","renderActions","canEdit","hasParent","parentKey","isTemplate","_this$props$activatio","activations","qProfile","x","data-profile","BuiltInQualityProfileBadge","templateKey","_this$props2$activati","canActivate","lang","InstanceMessage","message","filter_default","RuleDetails_RuleDetails","fetchRuleDetails","actives","handleRuleChange","handleTagsChange","oldTags","catch","handleDelete","onDelete","_this$props3","allowCustomRules","canWrite","hideQualityProfiles","_ruleDetails$params","isCustom","isEditable","RuleDetailsMeta","onTagsChange","RuleDetailsDescription","RuleListItem_RuleListItem","handleNameClick","isLeftClickEvent","button","metaKey","altKey","ctrlKey","shiftKey","onOpen","SeverityIcon","renderDeactivateButton","allTags","sysTags","langName","TagsList","allowUpdate","SimilarRulesFilter","PAGE_SIZE","LIMIT_BEFORE_LOAD_MORE","App_App","attachShortcuts","keymaster","selectPreviousRule","selectNextRule","openSelectedRule","closeRule","detachShortcuts","getOpenRule","location","getFacetsToFetch","getFieldsToFetch","fields","getSearchParameters","s","stopLoading","fetchInitialData","all","fetchQualityProfiles","_slicedToArray","_ref2$","keyBy_default","fetchFirstRules","makeFetchRequest","rawActives","rawFacets","_ref11","entries","_ref12","_ref13","parseActives","rawFacet","rawValue","parseFacets","openRule","fetchMoreRules","nextPage","fetchFacet","_ref6","currentUser","userOrganizations","organizations","getSelectedIndex","_ref7","findIndex","getRulePath","pathname","router","scrollToSelectedRule","smooth","element","document","querySelector","scrolling","topOffset","bottomOffset","getRuleActivation","_this$state2","_this$state3","closeFacet","handleRuleOpen","handleBack","handleFilterChange","_ref8","utils","handleFacetToggle","willOpenProperty","newState","handleReload","handleReset","pickRuleAround","handleRuleActivate","_state$actives","handleRuleDeactivate","newRule","searchQuery","isFiltered","pages","nextProps","_ref9","prevState","_this$state4","Suggestions","suggestions","Helmet","content","ScreenPositionHelper","_ref10","top","A11ySkipTarget","anchor","weight","FiltersHeader","displayReset","onReset","SearchBox","minLength","ListFooter","loadMore","ready","HelpTooltip","react__WEBPACK_IMPORTED_MODULE_0__","classnames__WEBPACK_IMPORTED_MODULE_1__","_Tooltip__WEBPACK_IMPORTED_MODULE_2__","_icons_components_HelpIcon__WEBPACK_IMPORTED_MODULE_3__","_app_theme__WEBPACK_IMPORTED_MODULE_4__","_props$children","_props$tagName","tagName","mouseLeaveDelay","onShow","placement","SimpleModal","stopSubmitting","handleCloseClick","handleSubmitClick","modalProps","_Modal__WEBPACK_IMPORTED_MODULE_1__","onCloseClick","onFormSubmit","onSubmitClick","_SuggestionsContext__WEBPACK_IMPORTED_MODULE_1__","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","i","hmr","transform","insertInto","locals","_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1__","_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","DocMarkdownBlock","e","close","default","addEventListener","removeEventListener","childProps","overlayProps","isTooltip","ConfirmModal","_SimpleModal__WEBPACK_IMPORTED_MODULE_1__","_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_2__","_ui_buttons__WEBPACK_IMPORTED_MODULE_3__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_4__","handleSubmit","renderModalContent","confirmDisable","headerDescription","_this$props$cancelBut","cancelButtonText","noBackdrop","_a$ready","hasMore","loadMoreLink","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","reloadLink","reload","new-loading","link","needReload","_helpers_measures__WEBPACK_IMPORTED_MODULE_4__","_A11yContext__WEBPACK_IMPORTED_MODULE_1__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","_this$props$label","addSideBarClass","addWhitePageClass","removeSideBarClass","removeWhitePageClass","CLASS_SIDEBAR_PAGE","CLASS_WHITE_PAGE","toggleBodyClass","force","body","classList","toggle","documentElement","searchQualityProfiles","parameters","_helpers_request__WEBPACK_IMPORTED_MODULE_2__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_3__","getQualityProfile","createQualityProfile","setMethod","setData","restoreQualityProfile","getProfileProjects","getProfileInheritance","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","getImporters","importers","getExporters","exporters","getProfileChangelog","compareProfiles","leftKey","rightKey","associateProject","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","lodash_map__WEBPACK_IMPORTED_MODULE_0___default","_helpers_csv__WEBPACK_IMPORTED_MODULE_1__","deactivateRule","renderConfirmModal","modalHeaderDescription","confirmModalProps","_ConfirmModal__WEBPACK_IMPORTED_MODULE_1__","_ModalButton__WEBPACK_IMPORTED_MODULE_2__","ModalButton","arrayMap","baseMap","iteratee","getRulesApp","searchRules","takeFacet","getRuleDetails","getRuleTags","createRule","deleteRule","updateRule","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","error","reject","data-property","_ui_buttons__WEBPACK_IMPORTED_MODULE_1__","_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_3__","_icons_components_OpenCloseIcon__WEBPACK_IMPORTED_MODULE_4__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_5__","helper","showClearButton","renderHelper","renderValueIndicator","clearLabel","ChevronDownIcon","_Icon__WEBPACK_IMPORTED_MODULE_1__","_ref$fill","search-navigator-facet-half","data-facet","renderValue","defaultProps","csvEscape","escaped","OpenCloseIcon","_ChevronDownIcon__WEBPACK_IMPORTED_MODULE_1__","_ChevronRightcon__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_1__","_utils__WEBPACK_IMPORTED_MODULE_2__","_store_rootReducer__WEBPACK_IMPORTED_MODULE_3__","WrappedComponent","Wrapper","displayName","react__WEBPACK_IMPORTED_MODULE_1__","getPosition","containerPos","container","getBoundingClientRect","window","pageYOffset","left","pageXOffset","debouncedOnResize","lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default","forceUpdate","ref","isPaidOrganization","hasPrivateAccess","isCurrentUserMemberOf","_users__WEBPACK_IMPORTED_MODULE_0__","subscription","admin","org","ListStyleFacetFooter_ListStyleFacetFooter","handleShowMoreClick","showMore","handleShowLessClick","showLess","allShown","ListStyleFacet_ListStyleFacet","searching","searchResultsCounts","showFullList","onItemClick","stopSearching","loadCountsForSearchResults","maxResults","searchMaxResults","searchResults","searchPaging","searchMore","_this$props$loadSearc","loadSearchResultCount","resultsToLoad","hideFullList","helpers_query","maxInitialItems","sortedItems","getSortedItems","limitedList","slice","selectedBelowLimit","mightHaveMoreResults","maxItems","formatFacetStat","loadingResults","showList","renderSearch","renderList","renderSearchResults","MultipleSelectionHint","highlightTerm","str","pos","indexOf","substring","substr","_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","navigator","userAgent","baseOrderBy","iteratees","orders","guard","latinize","slugify","decodeJwt","diacriticsMap","a","text","trim","token","segments","split","base64","JSON","parse","atob","letters","forEach","defaultDiacritic","letter","_app_theme__WEBPACK_IMPORTED_MODULE_3__","renderIcon","_this$props$tooltip","_components_docs_DocTooltip__WEBPACK_IMPORTED_MODULE_2__","_ref$tooltip","badge","getStandards","t","renderCWECategory","category","record","renderOwaspTop10Category","withPrefix","addPrefix","toUpperCase","renderSansTop25Category","renderSonarSourceSecurityCategory","prefix","_components_controls_Dropdown__WEBPACK_IMPORTED_MODULE_1__","_components_shared_SeverityHelper__WEBPACK_IMPORTED_MODULE_3__","_components_icons_components_FilterIcon__WEBPACK_IMPORTED_MODULE_4__","_components_icons_components_DropdownIcon__WEBPACK_IMPORTED_MODULE_5__","_components_icons_components_TagsIcon__WEBPACK_IMPORTED_MODULE_6__","handleLanguageClick","handleTypeClick","handleSeverityClick","handleTagClick","dataset","_rule$tags","_rule$sysTags","data-field","data-tag","react__WEBPACK_IMPORTED_MODULE_3__","_utils__WEBPACK_IMPORTED_MODULE_13__","cweQuery","loadStandards","_helpers_security_standard__WEBPACK_IMPORTED_MODULE_12__","handleOwaspTop10HeaderClick","handleSansTop25HeaderClick","handleSonarSourceSecurityHeaderClick","prop","lodash_sortBy__WEBPACK_IMPORTED_MODULE_2___default","lodash_without__WEBPACK_IMPORTED_MODULE_1___default","handleOwaspTop10ItemClick","handleSansTop25ItemClick","handleSonarSourceSecurityItemClick","handleCWESearch","loadCWESearchResultCount","categories","statsProp","valuesProp","renderFacetItemsList","renderTooltip","_helpers_l10n__WEBPACK_IMPORTED_MODULE_10__","_components_facet_FacetItemsList__WEBPACK_IMPORTED_MODULE_7__","_components_facet_FacetItem__WEBPACK_IMPORTED_MODULE_6__","renderHint","_components_facet_MultipleSelectionHint__WEBPACK_IMPORTED_MODULE_9__","_components_facet_FacetBox__WEBPACK_IMPORTED_MODULE_4__","_components_facet_FacetHeader__WEBPACK_IMPORTED_MODULE_5__","renderSonarSourceSecurityList","renderSonarSourceSecurityHint","renderOwaspTop10List","renderOwaspTop10Hint","renderSansTop25List","renderSansTop25Hint","_components_facet_ListStyleFacet__WEBPACK_IMPORTED_MODULE_8__","lodash_omit__WEBPACK_IMPORTED_MODULE_0___default","_helpers_search__WEBPACK_IMPORTED_MODULE_11__","renderSubFacets","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","_ui_IssueTypeIcon__WEBPACK_IMPORTED_MODULE_1__","LIST_SIZE","RuleDetailsTagsPopup_RuleDetailsTagsPopup","searchResult","Math","min","onSelect","setTags","onUnselect","availableTags","difference_default","TagsSelector","listSize","selectedTags","RuleScopeIcon","Icon","RuleDetailsMeta_RuleDetailsMeta","EXTERNAL_RULE_REPO_PREFIX","renderType","data-meta","renderStatus","renderTags","_ruleDetails$sysTags","_ruleDetails$tags","closeOnClick","closeOnClickOutside","overlayPlacement","popups","BottomLeft","renderCreationDate","createdAt","renderRepository","repo","renderTemplate","renderParentTemplate","renderRemediation","debtRemFnType","debtRemFnOffset","debtRemFnCoeff","effortToFixDescription","renderScope","scope","renderExternalBadge","engine","RegExp","displayedKey","startsWith","hasTypeData","isExternal","renderKey","LinkIcon","hideSimilarRulesFilter","RemoveExtendedDescriptionModal","onCancel","RuleDetailsDescription_RuleDetailsDescription","descriptionForm","removeDescriptionModal","handleCancelClick","handleSaveClick","updateDescription","handleRemoveDescriptionClick","handleCancelRemoving","handleConfirmRemoving","markdown_note","handleExtendDescriptionClick","mdNote","renderDescription","htmlNote","renderForm","hasDescription","dompurify__WEBPACK_IMPORTED_MODULE_0__","_api_quality_profiles__WEBPACK_IMPORTED_MODULE_2__","_components_controls_Modal__WEBPACK_IMPORTED_MODULE_3__","_components_controls_Select__WEBPACK_IMPORTED_MODULE_4__","_components_shared_SeverityHelper__WEBPACK_IMPORTED_MODULE_5__","_components_ui_Alert__WEBPACK_IMPORTED_MODULE_6__","_components_ui_buttons__WEBPACK_IMPORTED_MODULE_7__","_helpers_constants__WEBPACK_IMPORTED_MODULE_8__","_helpers_l10n__WEBPACK_IMPORTED_MODULE_9__","_quality_profiles_utils__WEBPACK_IMPORTED_MODULE_10__","getParams","getQualityProfilesWithDepth","depth","handleProfileChange","profilesWithDepth","_rule$params","isCustomRule","activeInAllProfiles","isUpdateMode","repeat"],"mappings":"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","file":"js/282.m.9bab0f0b.chunk.js","sourcesContent":["export default \"Quality Profiles are collections of Rules to apply during an analysis.\\n\\n---\\n\\nSee also: [Quality Profiles](/instance-administration/quality-profiles/)\\n\"","export default \"Rule Templates allow users to easily define their own rules. They are like cookie cutters from which you can stamp out new, \\\"custom rules\\\". The rules created from a template are listed on its rule detail page.\\n\"","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","export default \"Only custom rules may be deleted. When a custom rule is deleted, it is not removed from the SonarQube instance. Instead its status is set to \\\"REMOVED\\\", allowing relevant issues to continue to be displayed properly.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Query, serializeQuery } from '../query';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport { Alert } from '../../../components/ui/Alert';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport { Profile, bulkActivateRules, bulkDeactivateRules } from '../../../api/quality-profiles';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\n\ninterface Props {\n  action: string;\n  languages: T.Languages;\n  onClose: () => void;\n  organization: string | undefined;\n  profile?: Profile;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface ActivationResult {\n  failed: number;\n  profile: string;\n  succeeded: number;\n}\n\ninterface State {\n  finished: boolean;\n  results: ActivationResult[];\n  selectedProfiles: any[];\n  submitting: boolean;\n}\n\nexport default class BulkChangeModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    // if there is only one possible option for profile, select it immediately\n    const selectedProfiles = [];\n    const availableProfiles = this.getAvailableQualityProfiles(props);\n    if (availableProfiles.length === 1) {\n      selectedProfiles.push(availableProfiles[0].key);\n    }\n\n    this.state = { finished: false, results: [], selectedProfiles, submitting: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleProfileSelect = (options: { value: string }[]) => {\n    const selectedProfiles = options.map(option => option.value);\n    this.setState({ selectedProfiles });\n  };\n\n  getAvailableQualityProfiles = ({ query, referencedProfiles } = this.props) => {\n    let profiles = Object.values(referencedProfiles);\n    if (query.languages.length > 0) {\n      profiles = profiles.filter(profile => query.languages.includes(profile.language));\n    }\n    return profiles\n      .filter(profile => profile.actions && profile.actions.edit)\n      .filter(profile => !profile.isBuiltIn);\n  };\n\n  processResponse = (profile: string, response: any) => {\n    if (this.mounted) {\n      const result: ActivationResult = {\n        failed: response.failed || 0,\n        profile,\n        succeeded: response.succeeded || 0\n      };\n      this.setState(state => ({ results: [...state.results, result] }));\n    }\n  };\n\n  sendRequests = () => {\n    let looper = Promise.resolve();\n\n    // serialize the query, but delete the `profile`\n    const data = serializeQuery(this.props.query);\n    delete data.profile;\n\n    const method = this.props.action === 'activate' ? bulkActivateRules : bulkDeactivateRules;\n\n    // if a profile is selected in the facet, pick it\n    // otherwise take all profiles selected in the dropdown\n    const profiles: string[] = this.props.profile\n      ? [this.props.profile.key]\n      : this.state.selectedProfiles;\n\n    for (const profile of profiles) {\n      looper = looper.then(() =>\n        method({ ...data, organization: this.props.organization, targetKey: profile }).then(\n          response => this.processResponse(profile, response)\n        )\n      );\n    }\n    return looper;\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.sendRequests().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ finished: true, submitting: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  renderResult = (result: ActivationResult) => {\n    const { profile: profileKey } = result;\n    const profile = this.props.referencedProfiles[profileKey];\n    if (!profile) {\n      return null;\n    }\n    const { languages } = this.props;\n    const language = languages[profile.language]\n      ? languages[profile.language].name\n      : profile.language;\n    return (\n      <Alert key={result.profile} variant={result.failed === 0 ? 'success' : 'warning'}>\n        {result.failed\n          ? translateWithParameters(\n              'coding_rules.bulk_change.warning',\n              profile.name,\n              language,\n              result.succeeded,\n              result.failed\n            )\n          : translateWithParameters(\n              'coding_rules.bulk_change.success',\n              profile.name,\n              language,\n              result.succeeded\n            )}\n      </Alert>\n    );\n  };\n\n  renderProfileSelect = () => {\n    const profiles = this.getAvailableQualityProfiles();\n    const options = profiles.map(profile => ({\n      label: `${profile.name} - ${profile.languageName}`,\n      value: profile.key\n    }));\n    return (\n      <Select\n        multi={true}\n        onChange={this.handleProfileSelect}\n        options={options}\n        value={this.state.selectedProfiles}\n      />\n    );\n  };\n\n  render() {\n    const { action, profile, total } = this.props;\n    const header =\n      // prettier-ignore\n      action === 'activate'\n        ? `${translate('coding_rules.activate_in_quality_profile')} (${formatMeasure(total, 'INT')} ${translate('coding_rules._rules')})`\n        : `${translate('coding_rules.deactivate_in_quality_profile')} (${formatMeasure(total, 'INT')} ${translate('coding_rules._rules')})`;\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {this.state.results.map(this.renderResult)}\n\n            {!this.state.finished && !this.state.submitting && (\n              <div className=\"modal-field\">\n                <h3>\n                  <label htmlFor=\"coding-rules-bulk-change-profile\">\n                    {action === 'activate'\n                      ? translate('coding_rules.activate_in')\n                      : translate('coding_rules.deactivate_in')}\n                  </label>\n                </h3>\n                {profile ? (\n                  <span>\n                    {profile.name}\n                    {' — '}\n                    {translate('are_you_sure')}\n                  </span>\n                ) : (\n                  this.renderProfileSelect()\n                )}\n              </div>\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            {!this.state.finished && (\n              <SubmitButton disabled={this.state.submitting} id=\"coding-rules-submit-bulk-change\">\n                {translate('apply')}\n              </SubmitButton>\n            )}\n            <ResetButtonLink onClick={this.props.onClose}>\n              {this.state.finished ? translate('close') : translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BulkChangeModal from './BulkChangeModal';\nimport { Query } from '../query';\nimport { Profile } from '../../../api/quality-profiles';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  languages: T.Languages;\n  organization: string | undefined;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface State {\n  action?: string;\n  modal: boolean;\n  profile?: Profile;\n}\n\nexport default class BulkChange extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  getSelectedProfile = () => {\n    const { profile } = this.props.query;\n    return (profile && this.props.referencedProfiles[profile]) || undefined;\n  };\n\n  closeModal = () => this.setState({ action: undefined, modal: false, profile: undefined });\n\n  handleActivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: undefined });\n  };\n\n  handleActivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  handleDeactivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: undefined });\n  };\n\n  handleDeactivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  render() {\n    // show \"Bulk Change\" button only if user has at least one QP which he administrates\n    const canBulkChange = Object.values(this.props.referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit)\n    );\n    if (!canBulkChange) {\n      return null;\n    }\n\n    const { activation } = this.props.query;\n    const profile = this.getSelectedProfile();\n    const canChangeProfile = Boolean(\n      profile && !profile.isBuiltIn && profile.actions && profile.actions.edit\n    );\n    const allowActivateOnProfile = canChangeProfile && activation === false;\n    const allowDeactivateOnProfile = canChangeProfile && activation === true;\n\n    return (\n      <>\n        <Dropdown\n          className=\"pull-left\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a href=\"#\" onClick={this.handleActivateClick}>\n                  {translate('coding_rules.activate_in')}…\n                </a>\n              </li>\n              {allowActivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleActivateInProfileClick}>\n                    {translate('coding_rules.activate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n              <li>\n                <a href=\"#\" onClick={this.handleDeactivateClick}>\n                  {translate('coding_rules.deactivate_in')}…\n                </a>\n              </li>\n              {allowDeactivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleDeactivateInProfileClick}>\n                    {translate('coding_rules.deactivate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n            </ul>\n          }>\n          <Button className=\"js-bulk-change\">{translate('bulk_change')}</Button>\n        </Dropdown>\n        {this.state.modal && this.state.action && (\n          <BulkChangeModal\n            action={this.state.action}\n            languages={this.props.languages}\n            onClose={this.closeModal}\n            organization={this.props.organization}\n            profile={this.state.profile}\n            query={this.props.query}\n            referencedProfiles={this.props.referencedProfiles}\n            total={this.props.total}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { orderBy, without, sortBy } from 'lodash';\nimport { FacetKey } from '../query';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\n\nexport interface BasicProps {\n  onChange: (changes: T.Dict<string | string[] | undefined>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  stats?: T.Dict<number>;\n  values: string[];\n}\n\ninterface Props extends BasicProps {\n  children?: React.ReactNode;\n  disabled?: boolean;\n  disabledHelper?: string;\n  halfWidth?: boolean;\n  options?: string[];\n  property: FacetKey;\n  renderFooter?: () => React.ReactNode;\n  renderName?: (value: string) => React.ReactNode;\n  renderTextName?: (value: string) => string;\n  singleSelection?: boolean;\n}\n\nexport default class Facet extends React.PureComponent<Props> {\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    const { values } = this.props;\n    let newValue;\n    if (this.props.singleSelection) {\n      const value = values.length ? values[0] : undefined;\n      newValue = itemValue === value ? undefined : itemValue;\n    } else if (multiple) {\n      newValue = orderBy(\n        values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n      );\n    } else {\n      newValue = values.includes(itemValue) && values.length < 2 ? [] : [itemValue];\n    }\n    this.props.onChange({ [this.props.property]: newValue });\n  };\n\n  handleHeaderClick = () => this.props.onToggle(this.props.property);\n\n  handleClear = () => this.props.onChange({ [this.props.property]: [] });\n\n  getStat = (value: string) => this.props.stats && this.props.stats[value];\n\n  renderItem = (value: string) => {\n    const active = this.props.values.includes(value);\n    const stat = this.getStat(value);\n    const { renderName = defaultRenderName, renderTextName = defaultRenderName } = this.props;\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        halfWidth={this.props.halfWidth}\n        key={value}\n        name={renderName(value)}\n        onClick={this.handleItemClick}\n        stat={stat && formatMeasure(stat, 'SHORT_INT')}\n        tooltip={renderTextName(value)}\n        value={value}\n      />\n    );\n  };\n\n  render() {\n    const { disabled, renderTextName = defaultRenderName, stats } = this.props;\n    const values = this.props.values.map(renderTextName);\n    const items =\n      this.props.options ||\n      (stats &&\n        sortBy(Object.keys(stats), key => -stats[key], key => renderTextName(key).toLowerCase()));\n\n    return (\n      <FacetBox\n        className={classNames({ 'search-navigator-facet-box-forbidden': disabled })}\n        property={this.props.property}>\n        <FacetHeader\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{translate('coding_rules.facet', this.props.property)}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}>\n          {this.props.children}\n        </FacetHeader>\n\n        {this.props.open && items !== undefined && (\n          <FacetItemsList>{items.map(this.renderItem)}</FacetItemsList>\n        )}\n\n        {this.props.open && this.props.renderFooter !== undefined && this.props.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n\nfunction defaultRenderName(value: string) {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props extends BasicProps {\n  disabled: boolean;\n}\n\nexport default class ActivationSeverityFacet extends React.PureComponent<Props> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.active_severity.inactive')}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"activationSeverities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { injectIntl, InjectedIntlProps } from 'react-intl';\nimport { Query } from '../query';\nimport DateInput from '../../../components/controls/DateInput';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport { longFormatterOption } from '../../../components/intl/DateFormatter';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: keyof Query) => void;\n  open: boolean;\n  value?: Date;\n}\n\nclass AvailableSinceFacet extends React.PureComponent<Props & InjectedIntlProps> {\n  handleHeaderClick = () => {\n    this.props.onToggle('availableSince');\n  };\n\n  handleClear = () => {\n    this.props.onChange({ availableSince: undefined });\n  };\n\n  handlePeriodChange = (date: Date | undefined) => {\n    this.props.onChange({ availableSince: date });\n  };\n\n  getValues = () =>\n    this.props.value\n      ? [this.props.intl.formatDate(this.props.value, longFormatterOption)]\n      : undefined;\n\n  render() {\n    return (\n      <FacetBox property=\"availableSince\">\n        <FacetHeader\n          name={translate('coding_rules.facet.available_since')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && (\n          <DateInput\n            name=\"available-since\"\n            onChange={this.handlePeriodChange}\n            placeholder={translate('date')}\n            value={this.props.value}\n          />\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nexport default injectIntl(AvailableSinceFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\n\nexport default class DefaultSeverityFacet extends React.PureComponent<BasicProps> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"severities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props extends T.Omit<BasicProps, 'values'> {\n  disabled: boolean;\n  value: T.RuleInheritance | undefined;\n}\n\nexport default class InheritanceFacet extends React.PureComponent<Props> {\n  renderName = (value: T.RuleInheritance) =>\n    translate('coding_rules.filters.inheritance', value.toLowerCase());\n\n  render() {\n    const { value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.inheritance.inactive')}\n        options={['NONE', 'INHERITED', 'OVERRIDES']}\n        property=\"inheritance\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value ? [value] : []}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { uniqBy } from 'lodash';\nimport { BasicProps } from './Facet';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { translate } from '../../../helpers/l10n';\nimport { highlightTerm } from '../../../helpers/search';\n\ninterface InstalledLanguage {\n  key: string;\n  name: string;\n}\n\ninterface Props extends BasicProps {\n  disabled?: boolean;\n  installedLanguages: InstalledLanguage[];\n}\n\nclass LanguageFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const language = this.props.installedLanguages.find(l => l.key === languageKey);\n    return language ? language.name : languageKey;\n  };\n\n  handleSearch = (query: string) => {\n    const options = this.getAllPossibleOptions();\n    const results = options.filter(language =>\n      language.name.toLowerCase().includes(query.toLowerCase())\n    );\n    const paging = { pageIndex: 1, pageSize: results.length, total: results.length };\n    return Promise.resolve({ paging, results });\n  };\n\n  getAllPossibleOptions = () => {\n    const { installedLanguages, stats = {} } = this.props;\n\n    // add any language that presents in the facet, but might not be installed\n    // for such language we don't know their display name, so let's just use their key\n    // and make sure we reference each language only once\n    return uniqBy(\n      [...installedLanguages, ...Object.keys(stats).map(key => ({ key, name: key }))],\n      language => language.key\n    );\n  };\n\n  renderSearchResult = ({ name }: InstalledLanguage, term: string) => {\n    return highlightTerm(name, term);\n  };\n\n  render() {\n    return (\n      <ListStyleFacet<InstalledLanguage>\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.language.inactive')}\n        facetHeader={translate('coding_rules.facet.languages')}\n        fetching={false}\n        getFacetItemText={this.getLanguageName}\n        getSearchResultKey={language => language.key}\n        getSearchResultText={language => language.name}\n        minSearchLength={1}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"languages\"\n        renderFacetItem={this.getLanguageName}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_languages')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  installedLanguages: Object.values(getLanguages(state))\n});\n\nexport default connect(mapStateToProps)(LanguageFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy } from 'lodash';\nimport * as classNames from 'classnames';\nimport { Query, FacetKey } from '../query';\nimport { Profile } from '../../../api/quality-profiles';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  activation: boolean | undefined;\n  compareToProfile: string | undefined;\n  languages: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  referencedProfiles: T.Dict<Profile>;\n  value: string | undefined;\n}\n\nexport default class ProfileFacet extends React.PureComponent<Props> {\n  handleItemClick = (selected: string) => {\n    const newValue = this.props.value === selected ? '' : selected;\n    this.props.onChange({\n      activation: this.props.activation === undefined ? true : this.props.activation,\n      compareToProfile: undefined,\n      profile: newValue\n    });\n  };\n\n  handleHeaderClick = () => this.props.onToggle('profile');\n\n  handleClear = () =>\n    this.props.onChange({\n      activation: undefined,\n      activationSeverities: [],\n      compareToProfile: undefined,\n      inheritance: undefined,\n      profile: undefined\n    });\n\n  handleActiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: true, compareToProfile: undefined });\n  };\n\n  handleInactiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: false, compareToProfile: undefined });\n  };\n\n  stopPropagation = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n  };\n\n  getTextValue = () => {\n    const { referencedProfiles, value } = this.props;\n    if (value) {\n      const profile = referencedProfiles[value];\n      const name = (profile && `${profile.name} ${profile.languageName}`) || value;\n      return [name];\n    } else {\n      return [];\n    }\n  };\n\n  getTooltip = (profile: Profile) => {\n    const base = `${profile.name} ${profile.languageName}`;\n    return profile.isBuiltIn ? `${base} (${translate('quality_profiles.built_in')})` : base;\n  };\n\n  renderName = (profile: Profile) => (\n    <>\n      {profile.name}\n      <span className=\"note little-spacer-left\">\n        {profile.languageName}\n        {profile.isBuiltIn && ` (${translate('quality_profiles.built_in')})`}\n      </span>\n    </>\n  );\n\n  renderActivation = (profile: Profile) => {\n    const isCompare = profile.key === this.props.compareToProfile;\n    const activation = isCompare ? true : this.props.activation;\n    return (\n      <>\n        <span\n          aria-checked={activation}\n          className={classNames('js-active', 'facet-toggle', 'facet-toggle-green', {\n            'facet-toggle-active': activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleActiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          active\n        </span>\n        <span\n          aria-checked={!activation}\n          className={classNames('js-inactive', 'facet-toggle', 'facet-toggle-red', {\n            'facet-toggle-active': !activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleInactiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          inactive\n        </span>\n      </>\n    );\n  };\n\n  renderItem = (profile: Profile) => {\n    const active = [this.props.value, this.props.compareToProfile].includes(profile.key);\n\n    return (\n      <FacetItem\n        active={active}\n        className={this.props.compareToProfile === profile.key ? 'compare' : undefined}\n        key={profile.key}\n        name={this.renderName(profile)}\n        onClick={this.handleItemClick}\n        stat={this.renderActivation(profile)}\n        tooltip={this.getTooltip(profile)}\n        value={profile.key}\n      />\n    );\n  };\n\n  render() {\n    const { languages, referencedProfiles } = this.props;\n    let profiles = Object.values(referencedProfiles);\n    if (languages.length > 0) {\n      profiles = profiles.filter(profile => languages.includes(profile.language));\n    }\n    profiles = sortBy(\n      profiles,\n      profile => profile.name.toLowerCase(),\n      profile => profile.languageName\n    );\n\n    return (\n      <FacetBox property=\"profile\">\n        <FacetHeader\n          name={translate('coding_rules.facet.qprofile')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getTextValue()}>\n          <DocTooltip\n            className=\"spacer-left\"\n            doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/rules-quality-profiles.md')}\n          />\n        </FacetHeader>\n\n        {this.props.open && <FacetItemsList>{profiles.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Facet, { BasicProps } from './Facet';\nimport { getLanguages, Store } from '../../../store/rootReducer';\n\ninterface StateProps {\n  referencedLanguages: T.Dict<{ key: string; name: string }>;\n}\n\ninterface Props extends BasicProps, StateProps {\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n}\n\nclass RepositoryFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const { referencedLanguages } = this.props;\n    const language = referencedLanguages[languageKey];\n    return (language && language.name) || languageKey;\n  };\n\n  renderName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return repository ? (\n      <>\n        {repository.name}\n        <span className=\"note little-spacer-left\">{this.getLanguageName(repository.language)}</span>\n      </>\n    ) : (\n      repositoryKey\n    );\n  };\n\n  renderTextName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return (repository && repository.name) || repositoryKey;\n  };\n\n  render() {\n    const { referencedLanguages, referencedRepositories, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"repositories\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  referencedLanguages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(RepositoryFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport { RULE_STATUSES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\n\nexport default class StatusFacet extends React.PureComponent<BasicProps> {\n  renderName = (status: string) => translate('rules.status', status.toLowerCase());\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        options={RULE_STATUSES}\n        property=\"statuses\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { uniq } from 'lodash';\nimport { BasicProps } from './Facet';\nimport { getRuleTags } from '../../../api/rules';\nimport * as theme from '../../../app/theme';\nimport TagsIcon from '../../../components/icons-components/TagsIcon';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { translate } from '../../../helpers/l10n';\nimport { highlightTerm } from '../../../helpers/search';\n\ninterface Props extends BasicProps {\n  organization: string | undefined;\n}\n\nexport default class TagFacet extends React.PureComponent<Props> {\n  handleSearch = (query: string) => {\n    return getRuleTags({ organization: this.props.organization, ps: 50, q: query }).then(tags => ({\n      paging: { pageIndex: 1, pageSize: tags.length, total: tags.length },\n      results: tags\n    }));\n  };\n\n  handleSelect = (option: { value: string }) => {\n    this.props.onChange({ tags: uniq([...this.props.values, option.value]) });\n  };\n\n  getTagName = (tag: string) => {\n    return tag;\n  };\n\n  renderTag = (tag: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={theme.gray60} />\n      {tag}\n    </>\n  );\n\n  renderSearchResult = (tag: string, term: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={theme.gray60} />\n      {highlightTerm(tag, term)}\n    </>\n  );\n\n  render() {\n    return (\n      <ListStyleFacet<string>\n        facetHeader={translate('coding_rules.facet.tags')}\n        fetching={false}\n        getFacetItemText={this.getTagName}\n        getSearchResultKey={tag => tag}\n        getSearchResultText={tag => tag}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"tags\"\n        renderFacetItem={this.renderTag}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_tags')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props extends T.Omit<BasicProps, 'onChange' | 'values'> {\n  onChange: (changes: { template: boolean | undefined }) => void;\n  value: boolean | undefined;\n}\n\nexport default class TemplateFacet extends React.PureComponent<Props> {\n  handleChange = (changes: { template: string | any[] }) => {\n    const template =\n      // empty array is returned when a user cleared the facet\n      // otherwise `\"true\"`, `\"false\"` or `undefined` can be returned\n      Array.isArray(changes.template) || changes.template === undefined\n        ? undefined\n        : changes.template === 'true';\n    this.props.onChange({ ...changes, template });\n  };\n\n  renderName = (template: string) =>\n    template === 'true'\n      ? translate('coding_rules.filters.template.is_template')\n      : translate('coding_rules.filters.template.is_not_template');\n\n  render() {\n    const { onChange, value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        onChange={this.handleChange}\n        options={['true', 'false']}\n        property=\"template\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value !== undefined ? [String(value)] : []}>\n        <DocTooltip\n          className=\"spacer-left\"\n          doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/rule-templates.md')}\n        />\n      </Facet>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Facet, { BasicProps } from './Facet';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport { translate } from '../../../helpers/l10n';\n\nexport default class TypeFacet extends React.PureComponent<BasicProps> {\n  renderName = (type: string) => (\n    <>\n      <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n      {translate('issue.type', type)}\n    </>\n  );\n\n  renderTextName = (type: string) => translate('issue.type', type);\n\n  render() {\n    const options = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\n    return (\n      <Facet\n        {...this.props}\n        options={options}\n        property=\"types\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActivationSeverityFacet from './ActivationSeverityFacet';\nimport AvailableSinceFacet from './AvailableSinceFacet';\nimport DefaultSeverityFacet from './DefaultSeverityFacet';\nimport InheritanceFacet from './InheritanceFacet';\nimport LanguageFacet from './LanguageFacet';\nimport ProfileFacet from './ProfileFacet';\nimport RepositoryFacet from './RepositoryFacet';\nimport StatusFacet from './StatusFacet';\nimport TagFacet from './TagFacet';\nimport TemplateFacet from './TemplateFacet';\nimport TypeFacet from './TypeFacet';\nimport StandardFacet from '../../issues/sidebar/StandardFacet';\nimport { Facets, Query, OpenFacets } from '../query';\nimport { Profile } from '../../../api/quality-profiles';\n\ninterface Props {\n  facets?: Facets;\n  hideProfileFacet?: boolean;\n  onFacetToggle: (facet: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  openFacets: OpenFacets;\n  organization: string | undefined;\n  organizationsEnabled?: boolean;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  selectedProfile?: Profile;\n}\n\nexport default function FacetsList(props: Props) {\n  const languageDisabled = !props.hideProfileFacet && props.query.profile !== undefined;\n\n  const inheritanceDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.selectedProfile.isInherited;\n\n  const activationSeverityDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.query.activation;\n  return (\n    <>\n      <LanguageFacet\n        disabled={languageDisabled}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.languages}\n        stats={props.facets && props.facets.languages}\n        values={props.query.languages}\n      />\n      <TypeFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.types}\n        stats={props.facets && props.facets.types}\n        values={props.query.types}\n      />\n      <TagFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.tags}\n        organization={props.organization}\n        stats={props.facets && props.facets.tags}\n        values={props.query.tags}\n      />\n      <RepositoryFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.repositories}\n        referencedRepositories={props.referencedRepositories}\n        stats={props.facets && props.facets.repositories}\n        values={props.query.repositories}\n      />\n      <DefaultSeverityFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.severities}\n        stats={props.facets && props.facets.severities}\n        values={props.query.severities}\n      />\n      <StatusFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.statuses}\n        stats={props.facets && props.facets.statuses}\n        values={props.query.statuses}\n      />\n      <StandardFacet\n        cwe={props.query.cwe}\n        cweOpen={!!props.openFacets.cwe}\n        cweStats={props.facets && props.facets.cwe}\n        fetchingCwe={false}\n        fetchingOwaspTop10={false}\n        fetchingSansTop25={false}\n        fetchingSonarSourceSecurity={false}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.standards}\n        owaspTop10={props.query.owaspTop10}\n        owaspTop10Open={!!props.openFacets.owaspTop10}\n        owaspTop10Stats={props.facets && props.facets.owaspTop10}\n        query={props.query}\n        sansTop25={props.query.sansTop25}\n        sansTop25Open={!!props.openFacets.sansTop25}\n        sansTop25Stats={props.facets && props.facets.sansTop25}\n        sonarsourceSecurity={props.query.sonarsourceSecurity}\n        sonarsourceSecurityOpen={!!props.openFacets.sonarsourceSecurity}\n        sonarsourceSecurityStats={props.facets && props.facets.sonarsourceSecurity}\n      />\n      <AvailableSinceFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.availableSince}\n        value={props.query.availableSince}\n      />\n      {!props.organizationsEnabled && (\n        <TemplateFacet\n          onChange={props.onFilterChange}\n          onToggle={props.onFacetToggle}\n          open={!!props.openFacets.template}\n          value={props.query.template}\n        />\n      )}\n      {!props.hideProfileFacet && (\n        <>\n          <ProfileFacet\n            activation={props.query.activation}\n            compareToProfile={props.query.compareToProfile}\n            languages={props.query.languages}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.profile}\n            referencedProfiles={props.referencedProfiles}\n            value={props.query.profile}\n          />\n          <InheritanceFacet\n            disabled={inheritanceDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.inheritance}\n            value={props.query.inheritance}\n          />\n          <ActivationSeverityFacet\n            disabled={activationSeverityDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.activationSeverities}\n            stats={props.facets && props.facets.activationSeverities}\n            values={props.query.activationSeverities}\n          />\n        </>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport PageCounter from '../../../components/common/PageCounter';\nimport ReloadButton from '../../../components/controls/ReloadButton';\n\ninterface Props {\n  loading: boolean;\n  onReload: () => void;\n  paging?: T.Paging;\n  selectedIndex?: number;\n}\n\nexport default function PageActions(props: Props) {\n  return (\n    <div className=\"pull-right\">\n      <Shortcuts />\n\n      <DeferredSpinner loading={props.loading}>\n        <ReloadButton onClick={props.onReload} />\n      </DeferredSpinner>\n\n      {props.paging && (\n        <PageCounter\n          className=\"spacer-left flash flash-heavy\"\n          current={props.selectedIndex}\n          label={translate('coding_rules._rules')}\n          total={props.paging.total}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction Shortcuts() {\n  return (\n    <span className=\"note big-spacer-right\">\n      <span className=\"big-spacer-right\">\n        <span className=\"shortcut-button little-spacer-right\">↑</span>\n        <span className=\"shortcut-button little-spacer-right\">↓</span>\n        {translate('coding_rules.to_select_rules')}\n      </span>\n\n      <span>\n        <span className=\"shortcut-button little-spacer-right\">←</span>\n        <span className=\"shortcut-button little-spacer-right\">→</span>\n        {translate('issues.to_navigate')}\n      </span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport Modal from '../../../components/controls/Modal';\nimport { translate } from '../../../helpers/l10n';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { SEVERITIES, RULE_TYPES, RULE_STATUSES } from '../../../helpers/constants';\nimport Select from '../../../components/controls/Select';\nimport TypeHelper from '../../../components/shared/TypeHelper';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { createRule, updateRule } from '../../../api/rules';\nimport { csvEscape } from '../../../helpers/csv';\nimport { latinize } from '../../../helpers/strings';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport { Alert } from '../../../components/ui/Alert';\n\ninterface Props {\n  customRule?: T.RuleDetails;\n  onClose: () => void;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  key: string;\n  keyModifiedByUser: boolean;\n  name: string;\n  params: T.Dict<string>;\n  reactivating: boolean;\n  severity: string;\n  status: string;\n  submitting: boolean;\n  type: string;\n}\n\nexport default class CustomRuleFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const params: T.Dict<string> = {};\n    if (props.customRule && props.customRule.params) {\n      for (const param of props.customRule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n    }\n    this.state = {\n      description: (props.customRule && props.customRule.mdDesc) || '',\n      key: '',\n      keyModifiedByUser: false,\n      name: (props.customRule && props.customRule.name) || '',\n      params,\n      reactivating: false,\n      severity: (props.customRule && props.customRule.severity) || props.templateRule.severity,\n      status: (props.customRule && props.customRule.status) || props.templateRule.status,\n      submitting: false,\n      type: (props.customRule && props.customRule.type) || props.templateRule.type\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  prepareRequest = () => {\n    const { customRule, organization, templateRule } = this.props;\n    const params = Object.keys(this.state.params)\n      .map(key => `${key}=${csvEscape(this.state.params[key])}`)\n      .join(';');\n    const ruleData = {\n      markdown_description: this.state.description,\n      name: this.state.name,\n      organization,\n      params,\n      severity: this.state.severity,\n      status: this.state.status\n    };\n    return customRule\n      ? updateRule({ ...ruleData, key: customRule.key })\n      : createRule({\n          ...ruleData,\n          custom_key: this.state.key,\n          prevent_reactivation: !this.state.reactivating,\n          template_key: templateRule.key,\n          type: this.state.type\n        });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.prepareRequest().then(\n      newRuleDetails => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n          this.props.onDone(newRuleDetails);\n        }\n      },\n      (response: Response) => {\n        if (this.mounted) {\n          this.setState({ reactivating: response.status === 409, submitting: false });\n        }\n      }\n    );\n  };\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { value: name } = event.currentTarget;\n    this.setState(state => ({\n      name,\n      key: state.keyModifiedByUser ? state.key : latinize(name).replace(/[^A-Za-z0-9]/g, '_')\n    }));\n  };\n\n  handleKeyChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ key: event.currentTarget.value, keyModifiedByUser: true });\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleTypeChange = ({ value }: { value: string }) => this.setState({ type: value });\n\n  handleSeverityChange = ({ value }: { value: string }) => this.setState({ severity: value });\n\n  handleStatusChange = ({ value }: { value: string }) => this.setState({ status: value });\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  renderNameField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-name\">\n        {translate('name')} <em className=\"mandatory\">*</em>\n      </label>\n      <input\n        autoFocus={true}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-name\"\n        onChange={this.handleNameChange}\n        required={true}\n        type=\"text\"\n        value={this.state.name}\n      />\n    </div>\n  );\n\n  renderKeyField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-key\">\n        {translate('key')} {!this.props.customRule && <em className=\"mandatory\">*</em>}\n      </label>\n\n      {this.props.customRule ? (\n        <span className=\"coding-rules-detail-custom-rule-key\" title={this.props.customRule.key}>\n          {this.props.customRule.key}\n        </span>\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-key\"\n          onChange={this.handleKeyChange}\n          required={true}\n          type=\"text\"\n          value={this.state.key}\n        />\n      )}\n    </div>\n  );\n\n  renderDescriptionField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-html-description\">\n        {translate('description')} <em className=\"mandatory\">*</em>\n      </label>\n      <textarea\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-html-description\"\n        onChange={this.handleDescriptionChange}\n        required={true}\n        rows={5}\n        value={this.state.description}\n      />\n      <MarkdownTips className=\"modal-field-descriptor text-right\" />\n    </div>\n  );\n\n  renderTypeOption = ({ value }: { value: T.RuleType }) => {\n    return <TypeHelper type={value} />;\n  };\n\n  renderTypeField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-type\">{translate('type')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-type\"\n        onChange={this.handleTypeChange}\n        optionRenderer={this.renderTypeOption}\n        options={RULE_TYPES.map(type => ({\n          label: translate('issue.type', type),\n          value: type\n        }))}\n        searchable={false}\n        value={this.state.type}\n        valueRenderer={this.renderTypeOption}\n      />\n    </div>\n  );\n\n  renderSeverityOption = ({ value }: { value: string }) => <SeverityHelper severity={value} />;\n\n  renderSeverityField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-severity\">{translate('severity')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-severity\"\n        onChange={this.handleSeverityChange}\n        optionRenderer={this.renderSeverityOption}\n        options={SEVERITIES.map(severity => ({\n          label: translate('severity', severity),\n          value: severity\n        }))}\n        searchable={false}\n        value={this.state.severity}\n        valueRenderer={this.renderSeverityOption}\n      />\n    </div>\n  );\n\n  renderStatusField = () => (\n    <div className=\"modal-field flex-1\">\n      <label htmlFor=\"coding-rules-custom-rule-status\">\n        {translate('coding_rules.filters.status')}\n      </label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-status\"\n        onChange={this.handleStatusChange}\n        options={RULE_STATUSES.map(status => ({\n          label: translate('rules.status', status),\n          value: status\n        }))}\n        searchable={false}\n        value={this.state.status}\n      />\n    </div>\n  );\n\n  renderParameterField = (param: T.RuleParameter) => (\n    <div className=\"modal-field\" key={param.key}>\n      <label className=\"capitalize\" htmlFor={param.key}>\n        {param.key}\n      </label>\n\n      {param.type === 'TEXT' ? (\n        <textarea\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          rows={3}\n          value={this.state.params[param.key] || ''}\n        />\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          type=\"text\"\n          value={this.state.params[param.key] || ''}\n        />\n      )}\n      <div\n        className=\"modal-field-description\"\n        // eslint-disable-next-line react/no-danger\n        dangerouslySetInnerHTML={{ __html: sanitize(param.htmlDesc || '') }}\n      />\n    </div>\n  );\n\n  render() {\n    const { customRule, templateRule } = this.props;\n    const { reactivating, submitting } = this.state;\n    const { params = [] } = templateRule;\n    const header = customRule\n      ? translate('coding_rules.update_custom_rule')\n      : translate('coding_rules.create_custom_rule');\n    let submit = this.props.customRule ? translate('save') : translate('create');\n    if (this.state.reactivating) {\n      submit = translate('coding_rules.reactivate');\n    }\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{header}</h2>\n          </div>\n\n          <div className=\"modal-body modal-container\">\n            {reactivating && (\n              <Alert variant=\"warning\">{translate('coding_rules.reactivate.help')}</Alert>\n            )}\n\n            {this.renderNameField()}\n            {this.renderKeyField()}\n            <div className=\"display-flex-space-between\">\n              {/* do not allow to change the type of existing rule */}\n              {!customRule && this.renderTypeField()}\n              {this.renderSeverityField()}\n              {this.renderStatusField()}\n            </div>\n            {this.renderDescriptionField()}\n            {params.map(this.renderParameterField)}\n          </div>\n\n          <div className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={this.state.submitting}>{submit}</SubmitButton>\n            <ResetButtonLink\n              disabled={submitting}\n              id=\"coding-rules-custom-rule-creation-cancel\"\n              onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleFormModal from './CustomRuleFormModal';\n\ninterface Props {\n  children: (props: { onClick: () => void }) => React.ReactNode;\n  customRule?: T.RuleDetails;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class CustomRuleButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  handleDone = (newRuleDetails: T.RuleDetails) => {\n    this.handleModalClose();\n    this.props.onDone(newRuleDetails);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({ onClick: this.handleClick })}\n        {this.state.modal && (\n          <CustomRuleFormModal\n            customRule={this.props.customRule}\n            onClose={this.handleModalClose}\n            onDone={this.handleDone}\n            organization={this.props.organization}\n            templateRule={this.props.templateRule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { sortBy } from 'lodash';\nimport CustomRuleButton from './CustomRuleButton';\nimport { searchRules, deleteRule } from '../../../api/rules';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getRuleUrl } from '../../../helpers/urls';\n\ninterface Props {\n  canChange?: boolean;\n  organization: string | undefined;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  loading: boolean;\n  rules?: T.Rule[];\n}\n\nexport default class RuleDetailsCustomRules extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails.key !== this.props.ruleDetails.key) {\n      this.fetchRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRules = () => {\n    this.setState({ loading: true });\n    searchRules({\n      f: 'name,severity,params',\n      organization: this.props.organization,\n      template_key: this.props.ruleDetails.key\n    }).then(\n      ({ rules }) => {\n        if (this.mounted) {\n          this.setState({ rules, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleCreate = (newRuleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState(({ rules = [] }: State) => ({\n        rules: [...rules, newRuleDetails]\n      }));\n    }\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    return deleteRule({ key: ruleKey, organization: this.props.organization }).then(() => {\n      if (this.mounted) {\n        this.setState(({ rules = [] }) => ({\n          rules: rules.filter(rule => rule.key !== ruleKey)\n        }));\n      }\n    });\n  };\n\n  renderRule = (rule: T.Rule) => (\n    <tr data-rule={rule.key} key={rule.key}>\n      <td className=\"coding-rules-detail-list-name\">\n        <Link to={getRuleUrl(rule.key, this.props.organization)}>{rule.name}</Link>\n      </td>\n\n      <td className=\"coding-rules-detail-list-severity\">\n        <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n      </td>\n\n      <td className=\"coding-rules-detail-list-parameters\">\n        {rule.params &&\n          rule.params\n            .filter(param => param.defaultValue)\n            .map(param => (\n              <div className=\"coding-rules-detail-list-parameter\" key={param.key}>\n                <span className=\"key\">{param.key}</span>\n                <span className=\"sep\">:&nbsp;</span>\n                <span className=\"value\" title={param.defaultValue}>\n                  {param.defaultValue}\n                </span>\n              </div>\n            ))}\n      </td>\n\n      {this.props.canChange && (\n        <td className=\"coding-rules-detail-list-actions\">\n          <ConfirmButton\n            confirmButtonText={translate('delete')}\n            confirmData={rule.key}\n            isDestructive={true}\n            modalBody={translateWithParameters('coding_rules.delete.custom.confirm', rule.name)}\n            modalHeader={translate('coding_rules.delete_rule')}\n            onConfirm={this.handleRuleDelete}>\n            {({ onClick }) => (\n              <Button className=\"button-red js-delete-custom-rule\" onClick={onClick}>\n                {translate('delete')}\n              </Button>\n            )}\n          </ConfirmButton>\n        </td>\n      )}\n    </tr>\n  );\n\n  render() {\n    const { loading, rules = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-custom-rules coding-rule-section\">\n        <div className=\"coding-rules-detail-custom-rules-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.custom_rules')}</h3>\n\n          {this.props.canChange && (\n            <CustomRuleButton\n              onDone={this.handleRuleCreate}\n              organization={this.props.organization}\n              templateRule={this.props.ruleDetails}>\n              {({ onClick }) => (\n                <Button className=\"js-create-custom-rule spacer-left\" onClick={onClick}>\n                  {translate('coding_rules.create')}\n                </Button>\n              )}\n            </CustomRuleButton>\n          )}\n\n          <DeferredSpinner className=\"spacer-left\" loading={loading}>\n            {rules.length > 0 && (\n              <table className=\"coding-rules-detail-list\" id=\"coding-rules-detail-custom-rules\">\n                <tbody>{sortBy(rules, rule => rule.name).map(this.renderRule)}</tbody>\n              </table>\n            )}\n          </DeferredSpinner>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { getFacet } from '../../../api/issues';\nimport { getIssuesUrl } from '../../../helpers/urls';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate } from '../../../helpers/l10n';\nimport { withAppState } from '../../../components/hoc/withAppState';\n\ninterface Props {\n  appState: Pick<T.AppState, 'branchesEnabled'>;\n  organization: string | undefined;\n  ruleDetails: Pick<T.RuleDetails, 'key' | 'type'>;\n}\n\ninterface Project {\n  count: number;\n  key: string;\n  name: string;\n}\n\ninterface State {\n  loading: boolean;\n  projects?: Project[];\n  total?: number;\n}\n\nexport class RuleDetailsIssues extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIssues();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails !== this.props.ruleDetails) {\n      this.fetchIssues();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getBaseIssuesQuery = () => ({\n    resolved: 'false',\n    rules: this.props.ruleDetails.key,\n    types:\n      this.props.ruleDetails.type === 'SECURITY_HOTSPOT'\n        ? ['VULNERABILITY', 'SECURITY_HOTSPOT'].join()\n        : undefined\n  });\n\n  fetchIssues = () => {\n    this.setState({ loading: true });\n    getFacet(\n      { ...this.getBaseIssuesQuery(), organization: this.props.organization },\n      'projects'\n    ).then(\n      ({ facet, response }) => {\n        if (this.mounted) {\n          const { components = [], paging } = response;\n          const projects = [];\n          for (const item of facet) {\n            const project = components.find(component => component.key === item.val);\n            if (project) {\n              projects.push({ count: item.count, key: project.key, name: project.name });\n            }\n          }\n          this.setState({ projects, loading: false, total: paging.total });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderTotal = () => {\n    const { total } = this.state;\n    if (total === undefined) {\n      return null;\n    }\n    const path = getIssuesUrl(this.getBaseIssuesQuery(), this.props.organization);\n\n    const totalItem = (\n      <span className=\"little-spacer-left\">\n        {'('}\n        <Link to={path}>{total}</Link>\n        {')'}\n      </span>\n    );\n\n    if (!this.props.appState.branchesEnabled) {\n      return totalItem;\n    }\n\n    return (\n      <Tooltip overlay={translate('coding_rules.issues.only_main_branches')}>{totalItem}</Tooltip>\n    );\n  };\n\n  renderProject = (project: Project) => {\n    const path = getIssuesUrl(\n      { ...this.getBaseIssuesQuery(), projects: project.key },\n      this.props.organization\n    );\n    return (\n      <tr key={project.key}>\n        <td className=\"coding-rules-detail-list-name\">{project.name}</td>\n        <td className=\"coding-rules-detail-list-parameters\">\n          <Link to={path}>{formatMeasure(project.count, 'INT')}</Link>\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    const { loading, projects = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-issues coding-rule-section\">\n        <div className=\"coding-rule-section-separator\" />\n\n        <DeferredSpinner loading={loading}>\n          <h3 className=\"coding-rules-detail-title\">\n            {translate('coding_rules.issues')}\n            {this.renderTotal()}\n          </h3>\n\n          {projects.length > 0 && (\n            <table className=\"coding-rules-detail-list coding-rules-most-violated-projects\">\n              <tbody>\n                <tr>\n                  <td className=\"coding-rules-detail-list-name\" colSpan={2}>\n                    {translate('coding_rules.most_violating_projects')}\n                  </td>\n                </tr>\n                {projects.map(this.renderProject)}\n              </tbody>\n            </table>\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n\nexport default withAppState(RuleDetailsIssues);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  params: T.RuleParameter[];\n}\n\nexport default class RuleDetailsParameters extends React.PureComponent<Props> {\n  renderParameter = (param: T.RuleParameter) => (\n    <tr className=\"coding-rules-detail-parameter\" key={param.key}>\n      <td className=\"coding-rules-detail-parameter-name\">{param.key}</td>\n      <td className=\"coding-rules-detail-parameter-description\">\n        <p\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitize(param.htmlDesc || '') }}\n        />\n        {param.defaultValue !== undefined && (\n          <div className=\"note spacer-top\">\n            {translate('coding_rules.parameters.default_value')}\n            <br />\n            <span className=\"coding-rules-detail-parameter-value\">{param.defaultValue}</span>\n          </div>\n        )}\n      </td>\n    </tr>\n  );\n\n  render() {\n    return (\n      <div className=\"js-rule-parameters\">\n        <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.parameters')}</h3>\n        <table className=\"coding-rules-detail-parameters\">\n          <tbody>{this.props.params.map(this.renderParameter)}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActivationFormModal from './ActivationFormModal';\nimport { Profile as BaseProfile } from '../../../api/quality-profiles';\nimport { Button } from '../../../components/ui/buttons';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  buttonText: string;\n  className?: string;\n  modalHeader: string;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: BaseProfile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ActivationButton extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ modal: false });\n  };\n\n  render() {\n    return (\n      <>\n        <Button\n          className={this.props.className}\n          id=\"coding-rules-quality-profile-activate\"\n          onClick={this.handleButtonClick}>\n          {this.props.buttonText}\n        </Button>\n\n        {this.state.modal && (\n          <ActivationFormModal\n            activation={this.props.activation}\n            modalHeader={this.props.modalHeader}\n            onClose={this.handleCloseModal}\n            onDone={this.props.onDone}\n            organization={this.props.organization}\n            profiles={this.props.profiles}\n            rule={this.props.rule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as theme from '../../../app/theme';\n\ninterface Props {\n  className?: string;\n  inheritance: T.RuleInheritance;\n}\n\nexport default function RuleInheritanceIcon({ className, inheritance, ...other }: Props) {\n  const fill = inheritance === 'OVERRIDES' ? theme.red : theme.baseFontColor;\n\n  return (\n    <svg\n      className={className}\n      height={16}\n      version=\"1.1\"\n      viewBox=\"0 0 16 16\"\n      width={16}\n      xmlSpace=\"preserve\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      {...other}>\n      <path\n        d=\"M6.25 12.5a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm0-9a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm5 1a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm.75 0a1.5 1.5 0 0 1-.75 1.297c-.023 2.82-2.023 3.445-3.352 3.867-1.242.39-1.648.578-1.648 1.336v.203A1.5 1.5 0 1 1 4 12.5a1.5 1.5 0 0 1 .75-1.297V4.797A1.5 1.5 0 1 1 7 3.5a1.5 1.5 0 0 1-.75 1.297V8.68c.398-.196.82-.328 1.203-.446 1.453-.46 2.281-.804 2.297-2.437A1.5 1.5 0 1 1 12 4.5z\"\n        style={{ fill, fillRule: 'nonzero' }}\n      />\n    </svg>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { filter } from 'lodash';\nimport { Link } from 'react-router';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\nimport { Profile, deactivateRule, activateRule } from '../../../api/quality-profiles';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport BuiltInQualityProfileBadge from '../../quality-profiles/components/BuiltInQualityProfileBadge';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { Button } from '../../../components/ui/buttons';\nimport { getQualityProfileUrl } from '../../../helpers/urls';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  activations: T.RuleActivation[] | undefined;\n  canWrite: boolean | undefined;\n  onActivate: () => Promise<void>;\n  onDeactivate: () => Promise<void>;\n  organization: string | undefined;\n  referencedProfiles: T.Dict<Profile>;\n  ruleDetails: T.RuleDetails;\n}\n\nexport default class RuleDetailsProfiles extends React.PureComponent<Props> {\n  handleActivate = () => this.props.onActivate();\n\n  handleDeactivate = (key?: string) => {\n    if (key) {\n      deactivateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key\n      }).then(this.props.onDeactivate, () => {});\n    }\n  };\n\n  handleRevert = (key?: string) => {\n    if (key) {\n      activateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key,\n        reset: true\n      }).then(this.props.onActivate, () => {});\n    }\n  };\n\n  renderInheritedProfile = (activation: T.RuleActivation, profile: Profile) => {\n    if (!profile.parentName) {\n      return null;\n    }\n    const profilePath = getQualityProfileUrl(\n      profile.parentName,\n      profile.language,\n      this.props.organization\n    );\n    return (\n      <div className=\"coding-rules-detail-quality-profile-inheritance\">\n        {(activation.inherit === 'OVERRIDES' || activation.inherit === 'INHERITED') && (\n          <>\n            <RuleInheritanceIcon className=\"text-middle\" inheritance={activation.inherit} />\n            <Link className=\"link-base-color little-spacer-left text-middle\" to={profilePath}>\n              {profile.parentName}\n            </Link>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  renderSeverity = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-severity\">\n      <Tooltip overlay={translate('coding_rules.activation_severity')}>\n        <span>\n          <SeverityHelper className=\"display-inline-flex-center\" severity={activation.severity} />\n        </span>\n      </Tooltip>\n      {parentActivation !== undefined && activation.severity !== parentActivation.severity && (\n        <div className=\"coding-rules-detail-quality-profile-inheritance\">\n          {translate('coding_rules.original')} {translate('severity', parentActivation.severity)}\n        </div>\n      )}\n    </td>\n  );\n\n  renderParameter = (\n    param: { key: string; value: string },\n    parentActivation?: T.RuleActivation\n  ) => {\n    const originalParam =\n      parentActivation && parentActivation.params.find(p => p.key === param.key);\n    const originalValue = originalParam && originalParam.value;\n\n    return (\n      <div className=\"coding-rules-detail-quality-profile-parameter\" key={param.key}>\n        <span className=\"key\">{param.key}</span>\n        <span className=\"sep\">{': '}</span>\n        <span className=\"value\" title={param.value}>\n          {param.value}\n        </span>\n        {parentActivation && param.value !== originalValue && (\n          <div className=\"coding-rules-detail-quality-profile-inheritance\">\n            {translate('coding_rules.original')} <span className=\"value\">{originalValue}</span>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderParameters = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-parameters\">\n      {activation.params.map(param => this.renderParameter(param, parentActivation))}\n    </td>\n  );\n\n  renderActions = (activation: T.RuleActivation, profile: Profile) => {\n    const canEdit = profile.actions && profile.actions.edit && !profile.isBuiltIn;\n    const { ruleDetails } = this.props;\n    const hasParent = activation.inherit !== 'NONE' && profile.parentKey;\n    return (\n      <td className=\"coding-rules-detail-quality-profile-actions\">\n        {canEdit && (\n          <>\n            {!ruleDetails.isTemplate && (\n              <ActivationButton\n                activation={activation}\n                buttonText={translate('change_verb')}\n                className=\"coding-rules-detail-quality-profile-change\"\n                modalHeader={translate('coding_rules.change_details')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[profile]}\n                rule={ruleDetails}\n              />\n            )}\n            {hasParent ? (\n              activation.inherit === 'OVERRIDES' &&\n              profile.parentName && (\n                <ConfirmButton\n                  confirmButtonText={translate('yes')}\n                  confirmData={profile.key}\n                  modalBody={translateWithParameters(\n                    'coding_rules.revert_to_parent_definition.confirm',\n                    profile.parentName\n                  )}\n                  modalHeader={translate('coding_rules.revert_to_parent_definition')}\n                  onConfirm={this.handleRevert}>\n                  {({ onClick }) => (\n                    <Button\n                      className=\"coding-rules-detail-quality-profile-revert button-red spacer-left\"\n                      onClick={onClick}>\n                      {translate('coding_rules.revert_to_parent_definition')}\n                    </Button>\n                  )}\n                </ConfirmButton>\n              )\n            ) : (\n              <ConfirmButton\n                confirmButtonText={translate('yes')}\n                confirmData={profile.key}\n                modalBody={translate('coding_rules.deactivate.confirm')}\n                modalHeader={translate('coding_rules.deactivate')}\n                onConfirm={this.handleDeactivate}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"coding-rules-detail-quality-profile-deactivate button-red spacer-left\"\n                    onClick={onClick}>\n                    {translate('coding_rules.deactivate')}\n                  </Button>\n                )}\n              </ConfirmButton>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActivation = (activation: T.RuleActivation) => {\n    const { activations = [], ruleDetails } = this.props;\n    const profile = this.props.referencedProfiles[activation.qProfile];\n    if (!profile) {\n      return null;\n    }\n\n    const parentActivation = activations.find(x => x.qProfile === profile.parentKey);\n\n    return (\n      <tr data-profile={profile.key} key={profile.key}>\n        <td className=\"coding-rules-detail-quality-profile-name\">\n          <Link to={getQualityProfileUrl(profile.name, profile.language, this.props.organization)}>\n            {profile.name}\n          </Link>\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {this.renderInheritedProfile(activation, profile)}\n        </td>\n\n        {this.renderSeverity(activation, parentActivation)}\n        {!ruleDetails.templateKey && this.renderParameters(activation, parentActivation)}\n        {this.renderActions(activation, profile)}\n      </tr>\n    );\n  };\n\n  render() {\n    const { activations = [], referencedProfiles, ruleDetails } = this.props;\n    const canActivate = Object.values(referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit && profile.language === ruleDetails.lang)\n    );\n\n    return (\n      <div className=\"js-rule-profiles coding-rule-section\">\n        <div className=\"coding-rules-detail-quality-profiles-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">\n            <InstanceMessage message={translate('coding_rules.quality_profiles')} />\n          </h3>\n\n          {canActivate && (\n            <ActivationButton\n              buttonText={translate('coding_rules.activate')}\n              className=\"coding-rules-quality-profile-activate spacer-left\"\n              modalHeader={translate('coding_rules.activate_in_quality_profile')}\n              onDone={this.handleActivate}\n              organization={this.props.organization}\n              profiles={filter(\n                this.props.referencedProfiles,\n                profile => !activations.find(activation => activation.qProfile === profile.key)\n              )}\n              rule={ruleDetails}\n            />\n          )}\n\n          {activations.length > 0 && (\n            <table\n              className=\"coding-rules-detail-quality-profiles width-100\"\n              id=\"coding-rules-detail-quality-profiles\">\n              <tbody>{activations.map(this.renderActivation)}</tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleButton from './CustomRuleButton';\nimport RuleDetailsCustomRules from './RuleDetailsCustomRules';\nimport RuleDetailsDescription from './RuleDetailsDescription';\nimport RuleDetailsIssues from './RuleDetailsIssues';\nimport RuleDetailsMeta from './RuleDetailsMeta';\nimport RuleDetailsParameters from './RuleDetailsParameters';\nimport RuleDetailsProfiles from './RuleDetailsProfiles';\nimport { Query, Activation } from '../query';\nimport { Profile } from '../../../api/quality-profiles';\nimport { getRuleDetails, deleteRule, updateRule } from '../../../api/rules';\nimport DeferredSpinner from '../../../components/common/DeferredSpinner';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport { Button } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  allowCustomRules?: boolean;\n  canWrite?: boolean;\n  hideQualityProfiles?: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onDelete: (rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  organization: string | undefined;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleKey: string;\n  selectedProfile?: Profile;\n}\n\ninterface State {\n  actives?: T.RuleActivation[];\n  loading: boolean;\n  ruleDetails?: T.RuleDetails;\n}\n\nexport default class RuleDetails extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.setState({ loading: true });\n    this.fetchRuleDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleKey !== this.props.ruleKey) {\n      this.setState({ loading: true });\n      this.fetchRuleDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleDetails = () =>\n    getRuleDetails({\n      actives: true,\n      key: this.props.ruleKey,\n      organization: this.props.organization\n    }).then(\n      ({ actives, rule }) => {\n        if (this.mounted) {\n          this.setState({ actives, loading: false, ruleDetails: rule });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n\n  handleRuleChange = (ruleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState({ ruleDetails });\n    }\n  };\n\n  handleTagsChange = (tags: string[]) => {\n    // optimistic update\n    const oldTags = this.state.ruleDetails && this.state.ruleDetails.tags;\n    this.setState(state =>\n      state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags } } : null\n    );\n    updateRule({\n      key: this.props.ruleKey,\n      organization: this.props.organization,\n      tags: tags.join()\n    }).catch(() => {\n      if (this.mounted) {\n        this.setState(state =>\n          state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags: oldTags } } : null\n        );\n      }\n    });\n  };\n\n  handleActivate = () =>\n    this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        const active = this.state.actives.find(active => active.qProfile === selectedProfile.key);\n        if (active) {\n          this.props.onActivate(selectedProfile.key, ruleKey, active);\n        }\n      }\n    });\n\n  handleDeactivate = () =>\n    this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        if (!this.state.actives.find(active => active.qProfile === selectedProfile.key)) {\n          this.props.onDeactivate(selectedProfile.key, ruleKey);\n        }\n      }\n    });\n\n  handleDelete = () =>\n    deleteRule({ key: this.props.ruleKey, organization: this.props.organization }).then(() =>\n      this.props.onDelete(this.props.ruleKey)\n    );\n\n  render() {\n    const { ruleDetails } = this.state;\n\n    if (!ruleDetails) {\n      return <div className=\"coding-rule-details\" />;\n    }\n\n    const {\n      allowCustomRules,\n      canWrite,\n      hideQualityProfiles,\n      organization,\n      referencedProfiles\n    } = this.props;\n    const { params = [] } = ruleDetails;\n\n    const isCustom = !!ruleDetails.templateKey;\n    const isEditable = canWrite && !!this.props.allowCustomRules && isCustom;\n\n    return (\n      <div className=\"coding-rule-details\">\n        <DeferredSpinner loading={this.state.loading}>\n          <RuleDetailsMeta\n            canWrite={canWrite}\n            onFilterChange={this.props.onFilterChange}\n            onTagsChange={this.handleTagsChange}\n            organization={organization}\n            referencedRepositories={this.props.referencedRepositories}\n            ruleDetails={ruleDetails}\n          />\n\n          <RuleDetailsDescription\n            canWrite={canWrite}\n            onChange={this.handleRuleChange}\n            organization={organization}\n            ruleDetails={ruleDetails}\n          />\n\n          {params.length > 0 && <RuleDetailsParameters params={params} />}\n\n          {isEditable && (\n            <div className=\"coding-rules-detail-description display-flex-center\">\n              {/* `templateRule` is used to get rule meta data, `customRule` is used to get parameter values */}\n              {/* it's expected to pass the same rule to both parameters */}\n              <CustomRuleButton\n                customRule={ruleDetails}\n                onDone={this.handleRuleChange}\n                organization={organization}\n                templateRule={ruleDetails}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"js-edit-custom\"\n                    id=\"coding-rules-detail-custom-rule-change\"\n                    onClick={onClick}>\n                    {translate('edit')}\n                  </Button>\n                )}\n              </CustomRuleButton>\n              <ConfirmButton\n                confirmButtonText={translate('delete')}\n                isDestructive={true}\n                modalBody={translateWithParameters(\n                  'coding_rules.delete.custom.confirm',\n                  ruleDetails.name\n                )}\n                modalHeader={translate('coding_rules.delete_rule')}\n                onConfirm={this.handleDelete}>\n                {({ onClick }) => (\n                  <>\n                    <Button\n                      className=\"button-red spacer-left js-delete\"\n                      id=\"coding-rules-detail-rule-delete\"\n                      onClick={onClick}>\n                      {translate('delete')}\n                    </Button>\n                    <DocTooltip\n                      className=\"spacer-left\"\n                      doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/custom-rule-removal.md')}\n                    />\n                  </>\n                )}\n              </ConfirmButton>\n            </div>\n          )}\n\n          {ruleDetails.isTemplate && (\n            <RuleDetailsCustomRules\n              canChange={allowCustomRules && canWrite}\n              organization={organization}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && !hideQualityProfiles && (\n            <RuleDetailsProfiles\n              activations={this.state.actives}\n              canWrite={canWrite}\n              onActivate={this.handleActivate}\n              onDeactivate={this.handleDeactivate}\n              organization={organization}\n              referencedProfiles={referencedProfiles}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && (\n            <RuleDetailsIssues organization={organization} ruleDetails={ruleDetails} />\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { Link } from 'react-router';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\nimport SimilarRulesFilter from './SimilarRulesFilter';\nimport { Activation, Query } from '../query';\nimport { Profile, deactivateRule } from '../../../api/quality-profiles';\nimport { Button } from '../../../components/ui/buttons';\nimport ConfirmButton from '../../../components/controls/ConfirmButton';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport SeverityIcon from '../../../components/icons-components/SeverityIcon';\nimport TagsList from '../../../components/tags/TagsList';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { getRuleUrl } from '../../../helpers/urls';\n\ninterface Props {\n  activation?: Activation;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onOpen: (ruleKey: string) => void;\n  organization: string | undefined;\n  rule: T.Rule;\n  selected: boolean;\n  selectedProfile?: Profile;\n}\n\nexport default class RuleListItem extends React.PureComponent<Props> {\n  handleDeactivate = () => {\n    if (this.props.selectedProfile) {\n      const data = {\n        key: this.props.selectedProfile.key,\n        organization: this.props.organization,\n        rule: this.props.rule.key\n      };\n      deactivateRule(data).then(() => this.props.onDeactivate(data.key, data.rule), () => {});\n    }\n  };\n\n  handleActivate = (severity: string) => {\n    if (this.props.selectedProfile) {\n      this.props.onActivate(this.props.selectedProfile.key, this.props.rule.key, {\n        severity,\n        inherit: 'NONE'\n      });\n    }\n    return Promise.resolve();\n  };\n\n  handleNameClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    // cmd(ctrl) + click should open a rule permalink in a new tab\n    const isLeftClickEvent = event.button === 0;\n    const isModifiedEvent = !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n    if (isModifiedEvent || !isLeftClickEvent) {\n      return;\n    }\n\n    event.preventDefault();\n    this.props.onOpen(this.props.rule.key);\n  };\n\n  renderActivation = () => {\n    const { activation, selectedProfile } = this.props;\n    if (!activation) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation\">\n        <SeverityIcon severity={activation.severity} />\n        {selectedProfile && selectedProfile.parentName && (\n          <>\n            {activation.inherit === 'OVERRIDES' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.overrides',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n            {activation.inherit === 'INHERITED' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.inherits',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActions = () => {\n    const { activation, rule, selectedProfile } = this.props;\n    if (!selectedProfile) {\n      return null;\n    }\n\n    const canEdit = selectedProfile.actions && selectedProfile.actions.edit;\n    if (!canEdit || selectedProfile.isBuiltIn) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n        {activation\n          ? this.renderDeactivateButton(activation.inherit)\n          : !rule.isTemplate && (\n              <ActivationButton\n                buttonText={translate('coding_rules.activate')}\n                className=\"coding-rules-detail-quality-profile-activate\"\n                modalHeader={translate('coding_rules.activate_in_quality_profile')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[selectedProfile]}\n                rule={rule}\n              />\n            )}\n      </td>\n    );\n  };\n\n  renderDeactivateButton = (inherit: string) => {\n    return inherit === 'NONE' ? (\n      <ConfirmButton\n        confirmButtonText={translate('yes')}\n        modalBody={translate('coding_rules.deactivate.confirm')}\n        modalHeader={translate('coding_rules.deactivate')}\n        onConfirm={this.handleDeactivate}>\n        {({ onClick }) => (\n          <Button\n            className=\"coding-rules-detail-quality-profile-deactivate button-red\"\n            onClick={onClick}>\n            {translate('coding_rules.deactivate')}\n          </Button>\n        )}\n      </ConfirmButton>\n    ) : (\n      <Tooltip overlay={translate('coding_rules.can_not_deactivate')}>\n        <Button className=\"coding-rules-detail-quality-profile-deactivate button-red disabled\">\n          {translate('coding_rules.deactivate')}\n        </Button>\n      </Tooltip>\n    );\n  };\n\n  render() {\n    const { rule, selected } = this.props;\n    const allTags = [...(rule.tags || []), ...(rule.sysTags || [])];\n    return (\n      <div className={classNames('coding-rule', { selected })} data-rule={rule.key}>\n        <table className=\"coding-rule-table\">\n          <tbody>\n            <tr>\n              {this.renderActivation()}\n\n              <td>\n                <div className=\"coding-rule-title\">\n                  <Link\n                    className=\"link-no-underline\"\n                    onClick={this.handleNameClick}\n                    to={getRuleUrl(rule.key, this.props.organization)}>\n                    {rule.name}\n                  </Link>\n                  {rule.isTemplate && (\n                    <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n                      <span className=\"outline-badge spacer-left\">\n                        {translate('coding_rules.rule_template')}\n                      </span>\n                    </Tooltip>\n                  )}\n                </div>\n              </td>\n\n              <td className=\"coding-rule-table-meta-cell\">\n                <div className=\"display-flex-center coding-rule-meta\">\n                  {rule.status !== 'READY' && (\n                    <span className=\"spacer-left badge badge-normal-size badge-tiny-height badge-danger-light\">\n                      {translate('rules.status', rule.status)}\n                    </span>\n                  )}\n                  <span className=\"spacer-left note\">{rule.langName}</span>\n                  <Tooltip overlay={translate('coding_rules.type.tooltip', rule.type)}>\n                    <span className=\"display-inline-flex-center spacer-left note\">\n                      <IssueTypeIcon className=\"little-spacer-right\" query={rule.type} />\n                      {translate('issue.type', rule.type)}\n                    </span>\n                  </Tooltip>\n                  {allTags.length > 0 && (\n                    <TagsList allowUpdate={false} className=\"note spacer-left\" tags={allTags} />\n                  )}\n                  <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={rule} />\n                </div>\n              </td>\n\n              {this.renderActions()}\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport * as key from 'keymaster';\nimport { keyBy } from 'lodash';\nimport BulkChange from './BulkChange';\nimport FacetsList from './FacetsList';\nimport PageActions from './PageActions';\nimport RuleDetails from './RuleDetails';\nimport RuleListItem from './RuleListItem';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport {\n  Facets,\n  Query,\n  parseQuery,\n  serializeQuery,\n  areQueriesEqual,\n  shouldRequestFacet,\n  FacetKey,\n  OpenFacets,\n  getServerFacet,\n  getAppFacet,\n  Actives,\n  Activation,\n  getOpen\n} from '../query';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport ListFooter from '../../../components/controls/ListFooter';\nimport FiltersHeader from '../../../components/common/FiltersHeader';\nimport SearchBox from '../../../components/controls/SearchBox';\nimport { searchRules, getRulesApp } from '../../../api/rules';\nimport { searchQualityProfiles, Profile } from '../../../api/quality-profiles';\nimport {\n  getCurrentUser,\n  getLanguages,\n  getMyOrganizations,\n  Store,\n  getAppState\n} from '../../../store/rootReducer';\nimport {\n  shouldOpenStandardsFacet,\n  shouldOpenSonarSourceSecurityFacet,\n  shouldOpenStandardsChildFacet,\n  STANDARDS\n} from '../../issues/utils';\nimport { translate } from '../../../helpers/l10n';\nimport { hasPrivateAccess } from '../../../helpers/organizations';\nimport {\n  addSideBarClass,\n  addWhitePageClass,\n  removeSideBarClass,\n  removeWhitePageClass\n} from '../../../helpers/pages';\nimport { RawQuery } from '../../../helpers/query';\nimport { scrollToElement } from '../../../helpers/scrolling';\nimport '../../../components/search-navigator.css';\nimport '../styles.css';\n\nconst PAGE_SIZE = 100;\nconst LIMIT_BEFORE_LOAD_MORE = 5;\n\ninterface StateToProps {\n  appState: T.AppState;\n  currentUser: T.CurrentUser;\n  languages: T.Languages;\n  userOrganizations: T.Organization[];\n}\n\ninterface OwnProps extends WithRouterProps {\n  organization: T.Organization | undefined;\n}\n\ntype Props = OwnProps & StateToProps;\n\ninterface State {\n  actives?: Actives;\n  canWrite?: boolean;\n  facets?: Facets;\n  loading: boolean;\n  openFacets: OpenFacets;\n  openRule?: T.Rule;\n  paging?: T.Paging;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  rules: T.Rule[];\n  selected?: string;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const query = parseQuery(props.location.query);\n    this.state = {\n      loading: true,\n      openFacets: {\n        languages: true,\n        owaspTop10: shouldOpenStandardsChildFacet({}, query, 'owaspTop10'),\n        sansTop25: shouldOpenStandardsChildFacet({}, query, 'sansTop25'),\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet({}, query),\n        standards: shouldOpenStandardsFacet({}, query),\n        types: true\n      },\n      query,\n      referencedProfiles: {},\n      referencedRepositories: {},\n      rules: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addWhitePageClass();\n    addSideBarClass();\n    this.attachShortcuts();\n    this.fetchInitialData();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    this.setState(({ rules, selected }) => {\n      const openRule = this.getOpenRule(nextProps, rules);\n      return {\n        openRule,\n        query: parseQuery(nextProps.location.query),\n        selected: openRule ? openRule.key : selected\n      };\n    });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (!areQueriesEqual(prevProps.location.query, this.props.location.query)) {\n      this.fetchFirstRules();\n    }\n    if (\n      !this.state.openRule &&\n      (prevState.selected !== this.state.selected || prevState.openRule)\n    ) {\n      // if user simply selected another issue\n      // or if he went from the source code back to the list of issues\n      this.scrollToSelectedRule();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    removeWhitePageClass();\n    removeSideBarClass();\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    key.setScope('coding-rules');\n    key('up', 'coding-rules', () => {\n      this.selectPreviousRule();\n      return false;\n    });\n    key('down', 'coding-rules', () => {\n      this.selectNextRule();\n      return false;\n    });\n    key('right', 'coding-rules', () => {\n      this.openSelectedRule();\n      return false;\n    });\n    key('left', 'coding-rules', () => {\n      this.closeRule();\n      return false;\n    });\n  };\n\n  detachShortcuts = () => key.deleteScope('coding-rules');\n\n  getOpenRule = (props: Props, rules: T.Rule[]) => {\n    const open = getOpen(props.location.query);\n    return open && rules.find(rule => rule.key === open);\n  };\n\n  getFacetsToFetch = () => {\n    const { openFacets } = this.state;\n    return Object.keys(openFacets)\n      .filter((facet: FacetKey) => openFacets[facet])\n      .filter((facet: FacetKey) => shouldRequestFacet(facet))\n      .map((facet: FacetKey) => getServerFacet(facet));\n  };\n\n  getFieldsToFetch = () => {\n    const fields = [\n      'isTemplate',\n      'name',\n      'lang',\n      'langName',\n      'severity',\n      'status',\n      'sysTags',\n      'tags',\n      'templateKey'\n    ];\n    if (this.state.query.profile) {\n      fields.push('actives', 'params');\n    }\n    return fields;\n  };\n\n  getSearchParameters = () => ({\n    f: this.getFieldsToFetch().join(),\n    facets: this.getFacetsToFetch().join(),\n    organization: this.props.organization && this.props.organization.key,\n    ps: PAGE_SIZE,\n    s: 'name',\n    ...serializeQuery(this.state.query)\n  });\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchInitialData = () => {\n    this.setState({ loading: true });\n    const organization = this.props.organization && this.props.organization.key;\n    Promise.all([getRulesApp({ organization }), this.fetchQualityProfiles()]).then(\n      ([{ canWrite, repositories }, { profiles }]) => {\n        this.setState({\n          canWrite,\n          referencedProfiles: keyBy(profiles, 'key'),\n          referencedRepositories: keyBy(repositories, 'key')\n        });\n        this.fetchFirstRules();\n      },\n      this.stopLoading\n    );\n  };\n\n  makeFetchRequest = (query?: RawQuery) =>\n    searchRules({ ...this.getSearchParameters(), ...query }).then(\n      ({ actives: rawActives, facets: rawFacets, p, ps, rules, total }) => {\n        const actives = rawActives && parseActives(rawActives);\n        const facets = rawFacets && parseFacets(rawFacets);\n        const paging = { pageIndex: p, pageSize: ps, total };\n        return { actives, facets, paging, rules };\n      }\n    );\n\n  fetchFirstRules = (query?: RawQuery) => {\n    this.setState({ loading: true });\n    this.makeFetchRequest(query).then(({ actives, facets, paging, rules }) => {\n      if (this.mounted) {\n        const openRule = this.getOpenRule(this.props, rules);\n        const selected = rules.length > 0 ? (openRule && openRule.key) || rules[0].key : undefined;\n        this.setState({ actives, facets, loading: false, openRule, paging, rules, selected });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreRules = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      const nextPage = paging.pageIndex + 1;\n      this.makeFetchRequest({ p: nextPage, facets: undefined }).then(\n        ({ actives, paging, rules }) => {\n          if (this.mounted) {\n            this.setState((state: State) => ({\n              actives: { ...state.actives, ...actives },\n              loading: false,\n              paging,\n              rules: [...state.rules, ...rules]\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  fetchFacet = (facet: FacetKey) => {\n    this.makeFetchRequest({ ps: 1, facets: getServerFacet(facet) }).then(({ facets }) => {\n      if (this.mounted) {\n        this.setState(state => ({ facets: { ...state.facets, ...facets }, loading: false }));\n      }\n    }, this.stopLoading);\n  };\n\n  fetchQualityProfiles = () => {\n    const { currentUser, organization, userOrganizations } = this.props;\n    if (hasPrivateAccess(currentUser, organization, userOrganizations)) {\n      return searchQualityProfiles({ organization: organization && organization.key });\n    }\n    return { profiles: [] };\n  };\n\n  getSelectedIndex = ({ selected, rules } = this.state) => {\n    const index = rules.findIndex(rule => rule.key === selected);\n    return index !== -1 ? index : undefined;\n  };\n\n  selectNextRule = () => {\n    const { rules, loading, paging } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (selectedIndex !== undefined) {\n      if (\n        selectedIndex > rules.length - LIMIT_BEFORE_LOAD_MORE &&\n        !loading &&\n        paging &&\n        rules.length < paging.total\n      ) {\n        this.fetchMoreRules();\n      }\n      if (rules && selectedIndex < rules.length - 1) {\n        if (this.state.openRule) {\n          this.openRule(rules[selectedIndex + 1].key);\n        } else {\n          this.setState({ selected: rules[selectedIndex + 1].key });\n        }\n      }\n    }\n  };\n\n  selectPreviousRule = () => {\n    const { rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (rules && selectedIndex !== undefined && selectedIndex > 0) {\n      if (this.state.openRule) {\n        this.openRule(rules[selectedIndex - 1].key);\n      } else {\n        this.setState({ selected: rules[selectedIndex - 1].key });\n      }\n    }\n  };\n\n  getRulePath = (rule: string) => ({\n    pathname: this.props.location.pathname,\n    query: { ...serializeQuery(this.state.query), open: rule }\n  });\n\n  openRule = (rule: string) => {\n    const path = this.getRulePath(rule);\n    if (this.state.openRule) {\n      this.props.router.replace(path);\n    } else {\n      this.props.router.push(path);\n    }\n  };\n\n  openSelectedRule = () => {\n    const { selected } = this.state;\n    if (selected) {\n      this.openRule(selected);\n    }\n  };\n\n  closeRule = () => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery(this.state.query),\n        open: undefined\n      }\n    });\n    this.scrollToSelectedRule(false);\n  };\n\n  scrollToSelectedRule = (smooth = true) => {\n    const { selected } = this.state;\n    if (selected) {\n      const element = document.querySelector(`[data-rule=\"${selected}\"]`);\n      if (element) {\n        scrollToElement(element, { topOffset: 150, bottomOffset: 100, smooth });\n      }\n    }\n  };\n\n  getRuleActivation = (rule: string) => {\n    const { actives, query } = this.state;\n    if (actives && actives[rule] && query.profile) {\n      return actives[rule][query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  getSelectedProfile = () => {\n    const { query, referencedProfiles } = this.state;\n    if (query.profile) {\n      return referencedProfiles[query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  closeFacet = (facet: string) =>\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [facet]: false }\n    }));\n\n  handleRuleOpen = (ruleKey: string) => {\n    this.props.router.push(this.getRulePath(ruleKey));\n  };\n\n  handleBack = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.closeRule();\n  };\n\n  handleFilterChange = (changes: Partial<Query>) => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: serializeQuery({ ...this.state.query, ...changes })\n    });\n\n    this.setState(({ openFacets }) => ({\n      openFacets: {\n        ...openFacets,\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet(openFacets, changes),\n        standards: shouldOpenStandardsFacet(openFacets, changes)\n      }\n    }));\n  };\n\n  handleFacetToggle = (property: string) => {\n    this.setState(state => {\n      const willOpenProperty = !state.openFacets[property];\n      const newState = {\n        loading: state.loading,\n        openFacets: { ...state.openFacets, [property]: willOpenProperty }\n      };\n\n      // Try to open sonarsource security \"subfacet\" by default if the standard facet is open\n      if (willOpenProperty && property === STANDARDS) {\n        newState.openFacets.sonarsourceSecurity = shouldOpenSonarSourceSecurityFacet(\n          newState.openFacets,\n          state.query\n        );\n        // Force loading of sonarsource security facet data\n        property = newState.openFacets.sonarsourceSecurity ? 'sonarsourceSecurity' : property;\n      }\n\n      if (shouldRequestFacet(property) && (!state.facets || !state.facets[property])) {\n        newState.loading = true;\n        this.fetchFacet(property);\n      }\n\n      return newState;\n    });\n  };\n\n  handleReload = () => this.fetchFirstRules();\n\n  handleReset = () => this.props.router.push({ pathname: this.props.location.pathname });\n\n  /** Tries to take rule by index, or takes the last one  */\n  pickRuleAround = (rules: T.Rule[], selectedIndex: number | undefined) => {\n    if (selectedIndex === undefined || rules.length === 0) {\n      return undefined;\n    }\n    if (selectedIndex >= 0 && selectedIndex < rules.length) {\n      return rules[selectedIndex].key;\n    }\n    return rules[rules.length - 1].key;\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    if (this.state.query.ruleKey === ruleKey) {\n      this.handleReset();\n    } else {\n      this.setState(state => {\n        const rules = state.rules.filter(rule => rule.key !== ruleKey);\n        const selectedIndex = this.getSelectedIndex(state);\n        const selected = this.pickRuleAround(rules, selectedIndex);\n        return { rules, selected };\n      });\n      this.closeRule();\n    }\n  };\n\n  handleRuleActivate = (profile: string, rule: string, activation: Activation) =>\n    this.setState((state: State) => {\n      const { actives = {} } = state;\n      if (!actives[rule]) {\n        return { actives: { ...actives, [rule]: { [profile]: activation } } };\n      }\n\n      return { actives: { ...actives, [rule]: { ...actives[rule], [profile]: activation } } };\n    });\n\n  handleRuleDeactivate = (profile: string, rule: string) =>\n    this.setState(state => {\n      const { actives } = state;\n      if (actives && actives[rule]) {\n        const newRule = { ...actives[rule] };\n        delete newRule[profile];\n        return { actives: { ...actives, [rule]: newRule } };\n      }\n      return null;\n    });\n\n  handleSearch = (searchQuery: string) => this.handleFilterChange({ searchQuery });\n\n  isFiltered = () => Object.keys(serializeQuery(this.state.query)).length > 0;\n\n  render() {\n    const { paging, rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    const organization = this.props.organization && this.props.organization.key;\n    const hideQualityProfiles = !hasPrivateAccess(\n      this.props.currentUser,\n      this.props.organization,\n      this.props.userOrganizations\n    );\n    return (\n      <>\n        <Suggestions suggestions=\"coding_rules\" />\n        <Helmet title={translate('coding_rules.page')}>\n          <meta content=\"noindex\" name=\"robots\" />\n        </Helmet>\n        <div className=\"layout-page\" id=\"coding-rules-page\">\n          <ScreenPositionHelper className=\"layout-page-side-outer\">\n            {({ top }) => (\n              <div className=\"layout-page-side\" style={{ top }}>\n                <div className=\"layout-page-side-inner\">\n                  <div className=\"layout-page-filters\">\n                    <A11ySkipTarget\n                      anchor=\"rules_filters\"\n                      label={translate('coding_rules.skip_to_filters')}\n                      weight={10}\n                    />\n                    <FiltersHeader displayReset={this.isFiltered()} onReset={this.handleReset} />\n                    <SearchBox\n                      className=\"spacer-bottom\"\n                      id=\"coding-rules-search\"\n                      minLength={2}\n                      onChange={this.handleSearch}\n                      placeholder={translate('search.search_for_rules')}\n                      value={this.state.query.searchQuery || ''}\n                    />\n                    <FacetsList\n                      facets={this.state.facets}\n                      hideProfileFacet={hideQualityProfiles}\n                      onFacetToggle={this.handleFacetToggle}\n                      onFilterChange={this.handleFilterChange}\n                      openFacets={this.state.openFacets}\n                      organization={organization}\n                      organizationsEnabled={this.props.appState.organizationsEnabled}\n                      query={this.state.query}\n                      referencedProfiles={this.state.referencedProfiles}\n                      referencedRepositories={this.state.referencedRepositories}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n          </ScreenPositionHelper>\n\n          <div className=\"layout-page-main\">\n            <div className=\"layout-page-header-panel layout-page-main-header\">\n              <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n                <div className=\"layout-page-main-inner\">\n                  <A11ySkipTarget anchor=\"rules_main\" />\n                  {this.state.openRule ? (\n                    <a className=\"js-back\" href=\"#\" onClick={this.handleBack}>\n                      {translate('coding_rules.return_to_list')}\n                    </a>\n                  ) : (\n                    this.state.paging && (\n                      <BulkChange\n                        languages={this.props.languages}\n                        organization={organization}\n                        query={this.state.query}\n                        referencedProfiles={this.state.referencedProfiles}\n                        total={this.state.paging.total}\n                      />\n                    )\n                  )}\n                  <PageActions\n                    loading={this.state.loading}\n                    onReload={this.handleReload}\n                    paging={paging}\n                    selectedIndex={selectedIndex}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"layout-page-main-inner\">\n              {this.state.openRule ? (\n                <RuleDetails\n                  allowCustomRules={!this.props.appState.organizationsEnabled}\n                  canWrite={this.state.canWrite}\n                  hideQualityProfiles={hideQualityProfiles}\n                  onActivate={this.handleRuleActivate}\n                  onDeactivate={this.handleRuleDeactivate}\n                  onDelete={this.handleRuleDelete}\n                  onFilterChange={this.handleFilterChange}\n                  organization={organization}\n                  referencedProfiles={this.state.referencedProfiles}\n                  referencedRepositories={this.state.referencedRepositories}\n                  ruleKey={this.state.openRule.key}\n                  selectedProfile={this.getSelectedProfile()}\n                />\n              ) : (\n                <>\n                  {rules.map(rule => (\n                    <RuleListItem\n                      activation={this.getRuleActivation(rule.key)}\n                      key={rule.key}\n                      onActivate={this.handleRuleActivate}\n                      onDeactivate={this.handleRuleDeactivate}\n                      onFilterChange={this.handleFilterChange}\n                      onOpen={this.handleRuleOpen}\n                      organization={organization}\n                      rule={rule}\n                      selected={rule.key === this.state.selected}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  ))}\n                  {paging !== undefined && (\n                    <ListFooter\n                      count={rules.length}\n                      loadMore={this.fetchMoreRules}\n                      ready={!this.state.loading}\n                      total={paging.total}\n                    />\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nfunction parseActives(rawActives: T.Dict<T.RuleActivation[]>) {\n  const actives: Actives = {};\n  for (const [rule, activations] of Object.entries(rawActives)) {\n    actives[rule] = {};\n    for (const { inherit, qProfile, severity } of activations) {\n      actives[rule][qProfile] = { inherit, severity };\n    }\n  }\n  return actives;\n}\n\nfunction parseFacets(rawFacets: { property: string; values: { count: number; val: string }[] }[]) {\n  const facets: Facets = {};\n  for (const rawFacet of rawFacets) {\n    const values: T.Dict<number> = {};\n    for (const rawValue of rawFacet.values) {\n      values[rawValue.val] = rawValue.count;\n    }\n    facets[getAppFacet(rawFacet.property)] = values;\n  }\n  return facets;\n}\n\nconst mapStateToProps = (state: Store) => ({\n  appState: getAppState(state),\n  currentUser: getCurrentUser(state),\n  languages: getLanguages(state),\n  userOrganizations: getMyOrganizations(state)\n});\n\nexport default withRouter(connect(mapStateToProps)(App));\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip, { Placement } from './Tooltip';\nimport HelpIcon from '../icons-components/HelpIcon';\nimport * as theme from '../../app/theme';\nimport './HelpTooltip.css';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  onShow?: () => void;\n  overlay: React.ReactNode;\n  placement?: Placement;\n  tagName?: string;\n}\n\nexport default function HelpTooltip(props: Props) {\n  const { children = <HelpIcon fill={theme.gray71} size={12} />, tagName = 'div' } = props;\n\n  return React.createElement(\n    tagName,\n    { className: classNames('help-tooltip', props.className) },\n    <Tooltip\n      mouseLeaveDelay={0.25}\n      onShow={props.onShow}\n      overlay={props.overlay}\n      placement={props.placement}>\n      <span className=\"display-inline-flex-center\">{children}</span>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Modal, { ModalProps } from './Modal';\n\nexport interface ChildrenProps {\n  onCloseClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  onFormSubmit: (event: React.SyntheticEvent<HTMLFormElement>) => void;\n  onSubmitClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  submitting: boolean;\n}\n\ninterface Props extends ModalProps {\n  children: (props: ChildrenProps) => React.ReactNode;\n  header: string;\n  onClose: () => void;\n  onSubmit: () => void | Promise<void>;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class SimpleModal extends React.Component<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleCloseClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.props.onClose();\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.submit();\n  };\n\n  handleSubmitClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.submit();\n  };\n\n  submit = () => {\n    const result = this.props.onSubmit();\n    if (result) {\n      this.setState({ submitting: true });\n      result.then(this.stopSubmitting, this.stopSubmitting);\n    }\n  };\n\n  render() {\n    const { children, header, onClose, onSubmit, ...modalProps } = this.props;\n    return (\n      <Modal contentLabel={header} onRequestClose={onClose} {...modalProps}>\n        {children({\n          onCloseClick: this.handleCloseClick,\n          onFormSubmit: this.handleFormSubmit,\n          onSubmitClick: this.handleSubmitClick,\n          submitting: this.state.submitting\n        })}\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from '../controls/HelpTooltip';\nimport { lazyLoad } from '../lazyLoad';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: T.Dict<string>;\n}\n\ninterface State {\n  content?: string;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { open: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.doc.then(\n      ({ default: content }) => {\n        if (this.mounted) {\n          this.setState({ content });\n        }\n      },\n      () => {}\n    );\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  close = () => {\n    if (this.mounted) {\n      this.setState({ open: false });\n    }\n  };\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={this.state.content}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ModalProps } from './Modal';\nimport SimpleModal, { ChildrenProps } from './SimpleModal';\nimport DeferredSpinner from '../common/DeferredSpinner';\nimport { SubmitButton, ResetButtonLink } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\nexport interface ConfirmModalProps<T> extends ModalProps {\n  cancelButtonText?: string;\n  confirmButtonText: string;\n  confirmData?: T;\n  confirmDisable?: boolean;\n  isDestructive?: boolean;\n  onConfirm: (data?: T) => void | Promise<void | Response>;\n}\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  header: string;\n  headerDescription?: React.ReactNode;\n  onClose: () => void;\n}\n\nexport default class ConfirmModal<T = string> extends React.PureComponent<Props<T>> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSubmit = () => {\n    const result = this.props.onConfirm(this.props.confirmData);\n    if (result) {\n      return result.then(this.props.onClose, () => {});\n    } else {\n      this.props.onClose();\n      return undefined;\n    }\n  };\n\n  renderModalContent = ({ onCloseClick, onFormSubmit, submitting }: ChildrenProps) => {\n    const {\n      children,\n      confirmButtonText,\n      confirmDisable,\n      header,\n      headerDescription,\n      isDestructive,\n      cancelButtonText = translate('cancel')\n    } = this.props;\n    return (\n      <form onSubmit={onFormSubmit}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n          {headerDescription}\n        </header>\n        <div className=\"modal-body\">{children}</div>\n        <footer className=\"modal-foot\">\n          <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n          <SubmitButton\n            autoFocus={true}\n            className={isDestructive ? 'button-red' : undefined}\n            disabled={submitting || confirmDisable}>\n            {confirmButtonText}\n          </SubmitButton>\n          <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n            {cancelButtonText}\n          </ResetButtonLink>\n        </footer>\n      </form>\n    );\n  };\n\n  render() {\n    const { header, onClose, noBackdrop, size } = this.props;\n    const modalProps = { header, onClose, noBackdrop, size };\n    return (\n      <SimpleModal onSubmit={this.handleSubmit} {...modalProps}>\n        {this.renderModalContent}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DeferredSpinner from '../common/DeferredSpinner';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\n\nexport interface Props {\n  count: number;\n  className?: string;\n  loading?: boolean;\n  loadMore?: () => void;\n  needReload?: boolean;\n  reload?: () => void;\n  ready?: boolean;\n  total?: number;\n}\n\nexport default function ListFooter({ ready = true, ...props }: Props) {\n  const handleLoadMore = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (props.loadMore) {\n      props.loadMore();\n    }\n  };\n\n  const handleReload = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (props.reload) {\n      props.reload();\n    }\n  };\n\n  const hasMore = props.total && props.total > props.count;\n\n  const loadMoreLink = (\n    <a className=\"spacer-left\" href=\"#\" onClick={handleLoadMore}>\n      {translate('show_more')}\n    </a>\n  );\n\n  const reloadLink = (\n    <a className=\"spacer-left\" href=\"#\" onClick={handleReload}>\n      {translate('reload')}\n    </a>\n  );\n\n  const className = classNames(\n    'spacer-top note text-center',\n    { 'new-loading': !ready },\n    props.className\n  );\n\n  let link;\n\n  if (props.needReload && props.reload) {\n    link = reloadLink;\n  } else if (hasMore && props.loadMore) {\n    link = loadMoreLink;\n  }\n\n  return (\n    <footer className={className}>\n      {translateWithParameters(\n        'x_of_y_shown',\n        formatMeasure(props.count, 'INT', null),\n        formatMeasure(props.total, 'INT', null)\n      )}\n      {link}\n      {props.loading && <DeferredSpinner className=\"text-bottom spacer-left position-absolute\" />}\n    </footer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { A11yContext } from './A11yContext';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nconst CLASS_SIDEBAR_PAGE = 'sidebar-page';\nconst CLASS_WHITE_PAGE = 'white-page';\n\nexport function addSideBarClass() {\n  toggleBodyClass(CLASS_SIDEBAR_PAGE, true);\n}\n\nexport function addWhitePageClass() {\n  toggleBodyClass(CLASS_WHITE_PAGE, true);\n}\n\nexport function removeSideBarClass() {\n  toggleBodyClass(CLASS_SIDEBAR_PAGE, false);\n}\n\nexport function removeWhitePageClass() {\n  toggleBodyClass(CLASS_WHITE_PAGE, false);\n}\n\nfunction toggleBodyClass(className: string, force?: boolean) {\n  document.body.classList.toggle(className, force);\n  if (document.documentElement) {\n    document.documentElement.classList.toggle(className, force);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from '../helpers/csv';\nimport {\n  request,\n  checkStatus,\n  parseJSON,\n  getJSON,\n  post,\n  postJSON,\n  RequestData\n} from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile(data: {\n  compareToSonarWay?: boolean;\n  profile: string;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', data);\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return request('/api/qualityprofiles/create')\n    .setMethod('post')\n    .setData(data)\n    .submit()\n    .then(checkStatus)\n    .then(parseJSON)\n    .catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return request('/api/qualityprofiles/restore')\n    .setMethod('post')\n    .setData(data)\n    .submit()\n    .then(checkStatus)\n    .then(parseJSON)\n    .catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance(profileKey: string): Promise<any> {\n  return getJSON('/api/qualityprofiles/inheritance', { profileKey }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile(profileKey: string): Promise<void> {\n  return post('/api/qualityprofiles/set_default', { profileKey });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile(profileKey: string) {\n  return post('/api/qualityprofiles/delete', { profileKey }).catch(throwGlobalError);\n}\n\nexport function changeProfileParent(profileKey: string, parentKey: string) {\n  return post('/api/qualityprofiles/change_parent', { profileKey, parentKey }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(data: RequestData): Promise<any> {\n  return getJSON('/api/qualityprofiles/changelog', data);\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(key: string, project: string) {\n  return post('/api/qualityprofiles/add_project', { key, project }).catch(throwGlobalError);\n}\n\nexport function dissociateProject(key: string, project: string) {\n  return post('/api/qualityprofiles/remove_project', { key, project }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\nexport interface SearchUsersResponse {\n  users: Array<{\n    avatar?: string;\n    login: string;\n    name: string;\n    selected?: boolean;\n  }>;\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal, { ConfirmModalProps } from './ConfirmModal';\nimport ModalButton, { ChildrenProps, ModalProps } from './ModalButton';\n\ninterface Props<T> extends ConfirmModalProps<T> {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modalBody: React.ReactNode;\n  modalHeader: string;\n  modalHeaderDescription?: React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ConfirmButton<T> extends React.PureComponent<Props<T>, State> {\n  renderConfirmModal = ({ onClose }: ModalProps) => {\n    const {\n      children,\n      modalBody,\n      modalHeader,\n      modalHeaderDescription,\n      ...confirmModalProps\n    } = this.props;\n    return (\n      <ConfirmModal\n        header={modalHeader}\n        headerDescription={modalHeaderDescription}\n        onClose={onClose}\n        {...confirmModalProps}>\n        {modalBody}\n      </ConfirmModal>\n    );\n  };\n\n  render() {\n    return <ModalButton modal={this.renderConfirmModal}>{this.props.children}</ModalButton>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport interface ChildrenProps {\n  onClick: () => void;\n  onFormSubmit: (event: React.FormEvent<HTMLFormElement>) => void;\n}\n\nexport interface ModalProps {\n  onClose: () => void;\n}\n\nexport interface Props {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modal: (props: ModalProps) => React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ModalButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleFormSubmit = (event?: React.FormEvent<HTMLFormElement>) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({\n          onClick: this.handleButtonClick,\n          onFormSubmit: this.handleFormSubmit\n        })}\n        {this.state.modal && this.props.modal({ onClose: this.handleCloseModal })}\n      </>\n    );\n  }\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { post, getJSON, postJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: T.Dict<T.RuleActivation[]>;\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: T.Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: T.RuleActivation[]; rule: T.RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    error => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (error && error.response && error.response.status === 409) {\n        return Promise.reject(error.response);\n      } else {\n        return throwGlobalError(error);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  className?: string;\n  children: React.ReactNode;\n  property: string;\n}\n\nexport default function FacetBox(props: Props) {\n  return (\n    <div\n      className={classNames('search-navigator-facet-box', props.className)}\n      data-property={props.property}>\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../ui/buttons';\nimport DeferredSpinner from '../common/DeferredSpinner';\nimport HelpTooltip from '../controls/HelpTooltip';\nimport OpenCloseIcon from '../icons-components/OpenCloseIcon';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  children?: React.ReactNode;\n  clearLabel?: string;\n  fetching?: boolean;\n  helper?: string;\n  name: React.ReactNode;\n  onClear?: () => void;\n  onClick?: () => void;\n  open: boolean;\n  values?: string[];\n}\n\nexport default class FacetHeader extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.onClick) {\n      this.props.onClick();\n    }\n  };\n\n  renderHelper() {\n    if (!this.props.helper) {\n      return null;\n    }\n    return <HelpTooltip className=\"spacer-left\" overlay={this.props.helper} />;\n  }\n\n  renderValueIndicator() {\n    const { values } = this.props;\n    if (!values || !values.length) {\n      return null;\n    }\n    const value =\n      values.length === 1 ? values[0] : translateWithParameters('x_selected', values.length);\n    return (\n      <span className=\"badge badge-secondary text-ellipsis\" title={value}>\n        {value}\n      </span>\n    );\n  }\n\n  render() {\n    const showClearButton =\n      this.props.values != null && this.props.values.length > 0 && this.props.onClear != null;\n\n    return (\n      <div className=\"search-navigator-facet-header-wrapper display-flex-center\">\n        {this.props.onClick ? (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            <a href=\"#\" onClick={this.handleClick}>\n              <OpenCloseIcon className=\"little-spacer-right\" open={this.props.open} />\n              {this.props.name}\n            </a>\n            {this.renderHelper()}\n          </span>\n        ) : (\n          <span className=\"search-navigator-facet-header display-flex-center\">\n            {this.props.name}\n            {this.renderHelper()}\n          </span>\n        )}\n\n        {this.props.children}\n\n        <span className=\"search-navigator-facet-header-value spacer-left spacer-right \">\n          {this.renderValueIndicator()}\n        </span>\n\n        {this.props.fetching && (\n          <span className=\"little-spacer-right\">\n            <DeferredSpinner />\n          </span>\n        )}\n\n        {showClearButton && (\n          <Button\n            className=\"search-navigator-facet-header-button button-small button-red\"\n            onClick={this.props.onClear}>\n            {translate(this.props.clearLabel || 'clear')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ChevronDownIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M7.72 11.596L3.119 6.992A.382.382 0 0 1 3 6.713c0-.108.04-.2.118-.279l1.03-1.03a.382.382 0 0 1 .278-.117c.108 0 .201.04.28.117L8 8.7l3.294-3.295a.382.382 0 0 1 .28-.117c.108 0 .2.04.279.117l1.03 1.03a.382.382 0 0 1 .117.28c0 .107-.04.2-.118.278L8.28 11.596a.382.382 0 0 1-.279.117.382.382 0 0 1-.28-.117z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\nexport interface Props {\n  active?: boolean;\n  className?: string;\n  disabled?: boolean;\n  halfWidth?: boolean;\n  name: React.ReactNode;\n  onClick: (x: string, multiple?: boolean) => void;\n  stat?: React.ReactNode;\n  /** Textual version of `name` */\n  tooltip?: string;\n  value: string;\n}\n\nexport default class FacetItem extends React.PureComponent<Props> {\n  static defaultProps = {\n    disabled: false,\n    halfWidth: false,\n    loading: false\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick(this.props.value, event.ctrlKey || event.metaKey);\n  };\n\n  renderValue() {\n    if (this.props.stat == null) {\n      return null;\n    }\n\n    return <span className=\"facet-stat\">{this.props.stat}</span>;\n  }\n\n  render() {\n    const { name } = this.props;\n    const className = classNames('search-navigator-facet', this.props.className, {\n      active: this.props.active,\n      'search-navigator-facet-half': this.props.halfWidth\n    });\n\n    return this.props.disabled ? (\n      <span className={className} data-facet={this.props.value} title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </span>\n    ) : (\n      <a\n        className={className}\n        data-facet={this.props.value}\n        href=\"#\"\n        onClick={this.handleClick}\n        title={this.props.tooltip}>\n        <span className=\"facet-name\">{name}</span>\n        {this.renderValue()}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function csvEscape(value: string): string {\n  const escaped = value.replace(/\"/g, '\\\\\"');\n  return `\"${escaped}\"`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IconProps } from './Icon';\nimport ChevronDownIcon from './ChevronDownIcon';\nimport ChevronRightIcon from './ChevronRightcon';\n\ninterface Props extends IconProps {\n  open: boolean;\n}\n\nexport default function OpenCloseIcon({ open, ...props }: Props) {\n  return open ? <ChevronDownIcon {...props} /> : <ChevronRightIcon {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n  title?: string;\n}\n\nexport default function FacetItemsList({ children, title }: Props) {\n  return (\n    <div className=\"search-navigator-facet-list\">\n      {title && <div className=\"search-navigator-facet-list-title\">{title}</div>}\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getWrappedDisplayName } from './utils';\nimport { Store, getAppState } from '../../store/rootReducer';\n\nexport function withAppState<P>(\n  WrappedComponent: React.ComponentClass<P & { appState: Partial<T.AppState> }>\n) {\n  class Wrapper extends React.Component<P & { appState: T.AppState }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withAppState');\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  function mapStateToProps(state: Store) {\n    return { appState: getAppState(state) };\n  }\n\n  return connect(mapStateToProps)(Wrapper);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { debounce } from 'lodash';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isLoggedIn } from './users';\n\nexport function isPaidOrganization(organization: T.Organization | undefined): boolean {\n  return Boolean(organization && organization.subscription === 'PAID');\n}\n\nexport function hasPrivateAccess(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return (\n    !isPaidOrganization(organization) ||\n    isCurrentUserMemberOf(currentUser, organization, userOrganizations)\n  );\n}\n\nexport function isCurrentUserMemberOf(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return Boolean(\n    organization &&\n      isLoggedIn(currentUser) &&\n      ((organization.actions && organization.actions.admin) ||\n        userOrganizations.some(org => org.key === organization.key))\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  count: number;\n  showMore: () => void;\n  showLess: (() => void) | undefined;\n  total: number;\n}\n\nexport default class ListStyleFacetFooter extends React.PureComponent<Props> {\n  handleShowMoreClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.showMore();\n  };\n\n  handleShowLessClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.showLess) {\n      this.props.showLess();\n    }\n  };\n\n  render() {\n    const { count, total } = this.props;\n    const hasMore = total > count;\n    const allShown = Boolean(total && total === count);\n\n    return (\n      <footer className=\"note spacer-top spacer-bottom text-center\">\n        {translateWithParameters('x_show', formatMeasure(count, 'INT', null))}\n\n        {hasMore && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowMoreClick}>\n            {translate('show_more')}\n          </a>\n        )}\n\n        {this.props.showLess && allShown && (\n          <a className=\"spacer-left text-muted\" href=\"#\" onClick={this.handleShowLessClick}>\n            {translate('show_less')}\n          </a>\n        )}\n      </footer>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { sortBy, without } from 'lodash';\nimport FacetBox from './FacetBox';\nimport FacetHeader from './FacetHeader';\nimport FacetItem from './FacetItem';\nimport FacetItemsList from './FacetItemsList';\nimport ListStyleFacetFooter from './ListStyleFacetFooter';\nimport MultipleSelectionHint from './MultipleSelectionHint';\nimport { Alert } from '../ui/Alert';\nimport ListFooter from '../controls/ListFooter';\nimport SearchBox from '../controls/SearchBox';\nimport Tooltip from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\nimport { queriesEqual, RawQuery } from '../../helpers/query';\nimport { translate } from '../../helpers/l10n';\n\ninterface SearchResponse<S> {\n  maxResults?: boolean;\n  results: S[];\n  paging?: T.Paging;\n}\n\nexport interface Props<S> {\n  className?: string;\n  disabled?: boolean;\n  disabledHelper?: string;\n  facetHeader: string;\n  fetching: boolean;\n  getFacetItemText: (item: string) => string;\n  getSearchResultKey: (result: S) => string;\n  getSearchResultText: (result: S) => string;\n  loadSearchResultCount?: (result: S[]) => Promise<T.Dict<number>>;\n  maxInitialItems: number;\n  maxItems: number;\n  minSearchLength: number;\n  onChange: (changes: T.Dict<string | string[]>) => void;\n  onClear?: () => void;\n  onItemClick?: (itemValue: string, multiple: boolean) => void;\n  onSearch: (query: string, page?: number) => Promise<SearchResponse<S>>;\n  onToggle: (property: string) => void;\n  open: boolean;\n  property: string;\n  query?: RawQuery;\n  renderFacetItem: (item: string) => React.ReactNode;\n  renderSearchResult: (result: S, query: string) => React.ReactNode;\n  searchPlaceholder: string;\n  getSortedItems?: () => string[];\n  stats: T.Dict<number> | undefined;\n  values: string[];\n}\n\ninterface State<S> {\n  autoFocus: boolean;\n  query: string;\n  searching: boolean;\n  searchMaxResults?: boolean;\n  searchPaging?: T.Paging;\n  searchResults?: S[];\n  searchResultsCounts: T.Dict<number>;\n  showFullList: boolean;\n}\n\nexport default class ListStyleFacet<S> extends React.Component<Props<S>, State<S>> {\n  mounted = false;\n\n  static defaultProps = {\n    maxInitialItems: 15,\n    maxItems: 100,\n    minSearchLength: 2\n  };\n\n  state: State<S> = {\n    autoFocus: false,\n    query: '',\n    searching: false,\n    searchResultsCounts: {},\n    showFullList: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(prevProps: Props<S>) {\n    if (!prevProps.open && this.props.open) {\n      // focus search field *only* if it was manually open\n      this.setState({ autoFocus: true });\n    } else if (\n      (prevProps.open && !this.props.open) ||\n      !queriesEqual(prevProps.query || {}, this.props.query || {})\n    ) {\n      // reset state when closing the facet, or when query changes\n      this.setState({\n        query: '',\n        searchMaxResults: undefined,\n        searchResults: undefined,\n        searching: false,\n        searchResultsCounts: {},\n        showFullList: false\n      });\n    } else if (\n      prevProps.stats !== this.props.stats &&\n      Object.keys(this.props.stats || {}).length < this.props.maxInitialItems\n    ) {\n      // show limited list if `stats` changed and there are less than 15 items\n      this.setState({ showFullList: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    if (this.props.onItemClick) {\n      this.props.onItemClick(itemValue, multiple);\n    } else {\n      const { values } = this.props;\n      if (multiple) {\n        const newValue = sortBy(\n          values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n        );\n        this.props.onChange({ [this.props.property]: newValue });\n      } else {\n        this.props.onChange({\n          [this.props.property]: values.includes(itemValue) && values.length < 2 ? [] : [itemValue]\n        });\n      }\n    }\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.props.property);\n  };\n\n  handleClear = () => {\n    if (this.props.onClear) {\n      this.props.onClear();\n    } else this.props.onChange({ [this.props.property]: [] });\n  };\n\n  stopSearching = () => {\n    if (this.mounted) {\n      this.setState({ searching: false });\n    }\n  };\n\n  search = (query: string) => {\n    if (query.length >= this.props.minSearchLength) {\n      this.setState({ query, searching: true });\n      this.props\n        .onSearch(query)\n        .then(this.loadCountsForSearchResults)\n        .then(({ maxResults, paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchMaxResults: maxResults,\n              searchResults: results,\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    } else {\n      this.setState({ query, searching: false, searchResults: [] });\n    }\n  };\n\n  searchMore = () => {\n    const { query, searchPaging, searchResults } = this.state;\n    if (query && searchResults && searchPaging) {\n      this.setState({ searching: true });\n      this.props\n        .onSearch(query, searchPaging.pageIndex + 1)\n        .then(this.loadCountsForSearchResults)\n        .then(({ paging, results, stats }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              searching: false,\n              searchResults: [...searchResults, ...results],\n              searchPaging: paging,\n              searchResultsCounts: { ...state.searchResultsCounts, ...stats }\n            }));\n          }\n        })\n        .catch(this.stopSearching);\n    }\n  };\n\n  loadCountsForSearchResults = (response: SearchResponse<S>) => {\n    const { loadSearchResultCount = () => Promise.resolve({}) } = this.props;\n    const resultsToLoad = response.results.filter(result => {\n      const key = this.props.getSearchResultKey(result);\n      return this.getStat(key) === undefined && this.state.searchResultsCounts[key] === undefined;\n    });\n    if (resultsToLoad.length > 0) {\n      return loadSearchResultCount(resultsToLoad).then(stats => ({ ...response, stats }));\n    } else {\n      return { ...response, stats: {} };\n    }\n  };\n\n  getStat(item: string) {\n    const { stats } = this.props;\n    return stats && stats[item] !== undefined ? stats && stats[item] : undefined;\n  }\n\n  showFullList = () => {\n    this.setState({ showFullList: true });\n  };\n\n  hideFullList = () => {\n    this.setState({ showFullList: false });\n  };\n\n  renderList() {\n    const { stats } = this.props;\n\n    if (!stats) {\n      return null;\n    }\n\n    const sortedItems = this.props.getSortedItems\n      ? this.props.getSortedItems()\n      : sortBy(Object.keys(stats), key => -stats[key], key => this.props.getFacetItemText(key));\n\n    const limitedList = this.state.showFullList\n      ? sortedItems\n      : sortedItems.slice(0, this.props.maxInitialItems);\n\n    // make sure all selected items are displayed\n    const selectedBelowLimit = this.state.showFullList\n      ? []\n      : sortedItems\n          .slice(this.props.maxInitialItems)\n          .filter(item => this.props.values.includes(item));\n\n    const mightHaveMoreResults = sortedItems.length >= this.props.maxItems;\n\n    return (\n      <>\n        <FacetItemsList>\n          {limitedList.map(item => (\n            <FacetItem\n              active={this.props.values.includes(item)}\n              key={item}\n              name={this.props.renderFacetItem(item)}\n              onClick={this.handleItemClick}\n              stat={formatFacetStat(this.getStat(item))}\n              tooltip={this.props.getFacetItemText(item)}\n              value={item}\n            />\n          ))}\n        </FacetItemsList>\n        {selectedBelowLimit.length > 0 && (\n          <>\n            <div className=\"note spacer-bottom text-center\">⋯</div>\n            <FacetItemsList>\n              {selectedBelowLimit.map(item => (\n                <FacetItem\n                  active={true}\n                  key={item}\n                  name={this.props.renderFacetItem(item)}\n                  onClick={this.handleItemClick}\n                  stat={formatFacetStat(this.getStat(item))}\n                  tooltip={this.props.getFacetItemText(item)}\n                  value={item}\n                />\n              ))}\n            </FacetItemsList>\n          </>\n        )}\n        <ListStyleFacetFooter\n          count={limitedList.length + selectedBelowLimit.length}\n          showLess={this.state.showFullList ? this.hideFullList : undefined}\n          showMore={this.showFullList}\n          total={sortedItems.length}\n        />\n        {mightHaveMoreResults && this.state.showFullList && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n      </>\n    );\n  }\n\n  renderSearch() {\n    if (!this.props.stats || !Object.keys(this.props.stats).length) {\n      return null;\n    }\n\n    return (\n      <SearchBox\n        autoFocus={this.state.autoFocus}\n        className=\"little-spacer-top spacer-bottom\"\n        loading={this.state.searching}\n        minLength={this.props.minSearchLength}\n        onChange={this.search}\n        placeholder={this.props.searchPlaceholder}\n        value={this.state.query}\n      />\n    );\n  }\n\n  renderSearchResults() {\n    const { searching, searchMaxResults, searchResults, searchPaging } = this.state;\n\n    if (!searching && (!searchResults || !searchResults.length)) {\n      return <div className=\"note spacer-bottom\">{translate('no_results')}</div>;\n    }\n\n    if (!searchResults) {\n      // initial search\n      return null;\n    }\n\n    return (\n      <>\n        <FacetItemsList>\n          {searchResults.map(result => this.renderSearchResult(result))}\n        </FacetItemsList>\n        {searchMaxResults && (\n          <Alert className=\"spacer-top\" variant=\"warning\">\n            {translate('facet_might_have_more_results')}\n          </Alert>\n        )}\n        {searchPaging && (\n          <ListFooter\n            className=\"spacer-bottom\"\n            count={searchResults.length}\n            loadMore={this.searchMore}\n            ready={!searching}\n            total={searchPaging.total}\n          />\n        )}\n      </>\n    );\n  }\n\n  renderSearchResult(result: S) {\n    const key = this.props.getSearchResultKey(result);\n    const active = this.props.values.includes(key);\n    const stat = this.getStat(key) || this.state.searchResultsCounts[key];\n    const disabled = !active && stat === 0;\n    return (\n      <FacetItem\n        active={active}\n        disabled={disabled}\n        key={key}\n        name={this.props.renderSearchResult(result, this.state.query)}\n        onClick={this.handleItemClick}\n        stat={formatFacetStat(stat)}\n        tooltip={this.props.getSearchResultText(result)}\n        value={key}\n      />\n    );\n  }\n\n  render() {\n    const { disabled, stats = {} } = this.props;\n    const { query, searching, searchResults } = this.state;\n    const values = this.props.values.map(item => this.props.getFacetItemText(item));\n    const loadingResults =\n      query !== '' && searching && (searchResults === undefined || searchResults.length === 0);\n    const showList = !query || loadingResults;\n    return (\n      <FacetBox\n        className={classNames(this.props.className, {\n          'search-navigator-facet-box-forbidden': disabled\n        })}\n        property={this.props.property}>\n        <FacetHeader\n          fetching={this.props.fetching}\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{this.props.facetHeader}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}\n        />\n\n        {this.props.open && !disabled && (\n          <>\n            {this.renderSearch()}\n            {showList ? this.renderList() : this.renderSearchResults()}\n            <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />\n          </>\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nfunction formatFacetStat(stat: number | undefined) {\n  return stat && formatMeasure(stat, 'SHORT_INT');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport function highlightTerm(str: string, term: string) {\n  const pos = str.toLowerCase().indexOf(term.toLowerCase());\n  return pos !== -1 ? (\n    <>\n      {pos > 0 && str.substring(0, pos)}\n      <mark>{str.substr(pos, term.length)}</mark>\n      {pos + term.length < str.length && str.substring(pos + term.length)}\n    </>\n  ) : (\n    str\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\nimport './MultipleSelectionHint.css';\n\ninterface Props {\n  options: number;\n  values: number;\n}\n\nexport default function MultipleSelectionHint({ options, values }: Props) {\n  // do not render if nothing is selected or there are less than 2 possible options\n  if (values === 0 || options < 2) {\n    return null;\n  }\n\n  return (\n    <div className=\"multiple-selection-hint\">\n      <div className=\"multiple-selection-hint-inner\">\n        {translate(\n          isOnMac()\n            ? 'shortcuts.section.global.facets.multiselection.mac'\n            : 'shortcuts.section.global.facets.multiselection'\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction isOnMac() {\n  return navigator.userAgent.indexOf('Mac OS X') !== -1;\n}\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".search-navigator.sticky .search-navigator-workspace-header{position:fixed;z-index:50;top:0;left:300px;right:0}.search-navigator.sticky .search-navigator-workspace-details,.search-navigator.sticky .search-navigator-workspace-list{padding-top:43px}.search-navigator-facet-box{background-color:#f3f3f3;font-size:13px}.search-navigator-facet-box.leak-facet-box{background-color:#fbf3d5;border:1px solid #eae3c7}.search-navigator-facet-box.is-inner{margin-left:8px;padding-left:12px;border-left:1px solid #e6e6e6}.search-navigator-facet-box.is-inner .search-navigator-facet-header{padding-top:6px;padding-bottom:6px}.leak-facet-box:not(.hidden)+.leak-facet-box{border-top:none}.search-navigator-facet-box-forbidden{background-color:transparent;opacity:.5}.search-navigator-facet-box-forbidden .search-navigator-facet-container,.search-navigator-facet-box-forbidden .search-navigator-facet-empty,.search-navigator-facet-box-forbidden .search-navigator-facet-list{display:none}.search-navigator-facet-box-forbidden .search-navigator-facet-header{color:#777}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#4b9fd5}.search-navigator-facet-box-forbidden .search-navigator-facet-header{cursor:default}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#777}.search-navigator-facet{position:relative;display:inline-flex;justify-content:space-between;align-items:center;width:100%;height:24px;margin:0 0 1px;padding:0 6px;border:1px solid transparent;border-radius:2px;box-sizing:border-box;white-space:normal;opacity:.3;cursor:not-allowed;transition:none}a.search-navigator-facet{opacity:1;cursor:pointer}a.search-navigator-facet .facet-name{color:#444}.search-navigator-facet.active,a.search-navigator-facet:focus,a.search-navigator-facet:hover{border-color:#4b9fd5}.search-navigator-facet.facet-category{opacity:1;cursor:default}.search-navigator-facet.facet-category .facet-name{color:#777}.search-navigator-facet .facet-name{flex:1 1 auto;min-width:0;line-height:16px;padding:1px 0;color:#777;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-navigator-facet .facet-stat{display:flex;align-items:center;margin-left:8px;color:#777;font-size:12px}.search-navigator-facet .facet-toggle{display:none;float:left;height:16px;line-height:16px;margin-top:-1px;padding:0 5px;border-radius:2px;font-size:11px;text-transform:lowercase}.search-navigator-facet .facet-toggle:hover{color:#444}.search-navigator-facet .facet-toggle-active.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet .facet-toggle-active.facet-toggle-red{background-color:#d4333f;color:#fff}.leak-facet-box .search-navigator-facet .facet-name,.leak-facet-box .search-navigator-facet .facet-stat{background-color:#fbf3d5}.leak-facet-box .search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(251,243,213,0),#fbf3d5 75%)}.search-navigator-facet.active{background-color:#cae3f2;text-decoration:none}.search-navigator-facet.active .facet-toggle{display:inline}.search-navigator-facet.compare .facet-toggle{cursor:not-allowed;opacity:.5}.search-navigator-facet.compare .facet-toggle.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet.compare .facet-toggle.facet-toggle-red{background-color:transparent;color:#777}.search-navigator-facet-half{width:45%}.search-navigator-facet-half:nth-child(odd){margin-right:10%}.search-navigator-facet-highlight-under-container{margin-bottom:1px}.search-navigator-facet-highlight-under-container .search-navigator-facet{margin-bottom:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover{border-bottom:none;padding-bottom:1px;border-radius:2px 2px 0 0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet{border-top:none;border-bottom:none;border-left-color:#4b9fd5;border-right-color:#4b9fd5;border-radius:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:0 0 2px 2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet{background-color:#cae3f2;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet.active{border-top:1px solid #4b9fd5}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet{background-color:#a1cde8;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-toggle,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-header{display:block;flex-shrink:0;padding:8px 0;color:#444;font-weight:600;overflow:hidden;white-space:nowrap}.search-navigator-facet-header>a{border-bottom:none;color:#444}.search-navigator-facet-header>a:focus,.search-navigator-facet-header>a:hover{color:#4b9fd5}.search-navigator-facet-header>.note{font-weight:400}.search-navigator-facet-header-value{display:block;overflow:hidden}.search-navigator-facet-header-value>.badge{display:block}.search-navigator-facet-header-button{flex-shrink:0;margin-left:auto}.search-navigator-facet-header-wrapper{display:flex;align-items:center}.search-navigator-facet-list{padding-bottom:8px;font-size:0}.search-navigator-facet-list-title{margin:0 8px 4px;font-size:12px;font-weight:700}.search-navigator-facet-list+.search-navigator-facet-list>.search-navigator-facet-list-title{border-top:1px solid #e6e6e6;padding-top:8px}.search-navigator-facet-empty{margin:0;padding:0 10px 10px;color:#444;font-size:12px;white-space:nowrap}.search-navigator-facet-footer{display:block;padding-bottom:8px;border-bottom:none}.search-navigator-facet-container{margin-top:6px;padding:0 10px 16px}.search-navigator-date-facet-selection{position:relative;padding-left:8px;font-size:12px}.search-navigator-date-facet-selection:after,.search-navigator-date-facet-selection:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-date-facet-selection:after{clear:both}.search-navigator-date-facet-selection .date-input-control-input{width:115px!important}.search-navigator-date-facet-selection-dropdown-left{float:left;border-bottom:none}.search-navigator-date-facet-selection-dropdown-right{float:right;border-bottom:none}.search-navigator-date-facet-selection-input-left{position:absolute;left:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection-input-right{position:absolute;right:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection .date-input-control:not(:first-of-type) .date-input-calendar{left:auto;right:0}.search-navigator-filters{position:relative;padding:5px 10px;background-color:#f3f3f3}.search-navigator-filters:after,.search-navigator-filters:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-filters:after{clear:both}.search-navigator-filters-header{margin-bottom:12px;padding-bottom:11px;border-bottom:1px solid #e6e6e6}.search-navigator-intro{width:500px;margin:0 auto;padding-top:100px}\", \"\"]);\n\n","var baseOrderBy = require('./_baseOrderBy'),\n    isArray = require('./isArray');\n\n/**\n * This method is like `_.sortBy` except that it allows specifying the sort\n * orders of the iteratees to sort by. If `orders` is unspecified, all values\n * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n * descending or \"asc\" for ascending sort order of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @param {string[]} [orders] The sort orders of `iteratees`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 34 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 36 }\n * ];\n *\n * // Sort by `user` in ascending order and by `age` in descending order.\n * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n */\nfunction orderBy(collection, iteratees, orders, guard) {\n  if (collection == null) {\n    return [];\n  }\n  if (!isArray(iteratees)) {\n    iteratees = iteratees == null ? [] : [iteratees];\n  }\n  orders = guard ? undefined : orders;\n  if (!isArray(orders)) {\n    orders = orders == null ? [] : [orders];\n  }\n  return baseOrderBy(collection, iteratees, orders);\n}\n\nmodule.exports = orderBy;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n/*\n * Latinize string by removing all diacritics\n * From http://stackoverflow.com/questions/990904/javascript-remove-accents-in-strings\n */\nconst defaultDiacriticsRemovalap = [\n  {\n    base: 'A',\n    letters:\n      '\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'\n  },\n  {\n    base: 'AA',\n    letters: '\\uA732'\n  },\n  {\n    base: 'AE',\n    letters: '\\u00C6\\u01FC\\u01E2'\n  },\n  {\n    base: 'AO',\n    letters: '\\uA734'\n  },\n  {\n    base: 'AU',\n    letters: '\\uA736'\n  },\n  {\n    base: 'AV',\n    letters: '\\uA738\\uA73A'\n  },\n  {\n    base: 'AY',\n    letters: '\\uA73C'\n  },\n  {\n    base: 'B',\n    letters: '\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'\n  },\n  {\n    base: 'C',\n    letters: '\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'\n  },\n  {\n    base: 'D',\n    letters: '\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779'\n  },\n  {\n    base: 'DZ',\n    letters: '\\u01F1\\u01C4'\n  },\n  {\n    base: 'Dz',\n    letters: '\\u01F2\\u01C5'\n  },\n  {\n    base: 'E',\n    letters:\n      '\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'\n  },\n  {\n    base: 'F',\n    letters: '\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'\n  },\n  {\n    base: 'G',\n    letters:\n      '\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'\n  },\n  {\n    base: 'H',\n    letters: '\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'\n  },\n  {\n    base: 'I',\n    letters:\n      '\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'\n  },\n  {\n    base: 'J',\n    letters: '\\u004A\\u24BF\\uFF2A\\u0134\\u0248'\n  },\n  {\n    base: 'K',\n    letters: '\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'\n  },\n  {\n    base: 'L',\n    letters:\n      '\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'\n  },\n  {\n    base: 'LJ',\n    letters: '\\u01C7'\n  },\n  {\n    base: 'Lj',\n    letters: '\\u01C8'\n  },\n  {\n    base: 'M',\n    letters: '\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'\n  },\n  {\n    base: 'N',\n    letters:\n      '\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'\n  },\n  {\n    base: 'NJ',\n    letters: '\\u01CA'\n  },\n  {\n    base: 'Nj',\n    letters: '\\u01CB'\n  },\n  {\n    base: 'O',\n    letters:\n      '\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'\n  },\n  {\n    base: 'OI',\n    letters: '\\u01A2'\n  },\n  {\n    base: 'OO',\n    letters: '\\uA74E'\n  },\n  {\n    base: 'OU',\n    letters: '\\u0222'\n  },\n  {\n    base: 'OE',\n    letters: '\\u008C\\u0152'\n  },\n  {\n    base: 'oe',\n    letters: '\\u009C\\u0153'\n  },\n  {\n    base: 'P',\n    letters: '\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'\n  },\n  {\n    base: 'Q',\n    letters: '\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'\n  },\n  {\n    base: 'R',\n    letters:\n      '\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'\n  },\n  {\n    base: 'S',\n    letters:\n      '\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'\n  },\n  {\n    base: 'T',\n    letters:\n      '\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'\n  },\n  {\n    base: 'TZ',\n    letters: '\\uA728'\n  },\n  {\n    base: 'U',\n    letters:\n      '\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'\n  },\n  {\n    base: 'V',\n    letters: '\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'\n  },\n  {\n    base: 'VY',\n    letters: '\\uA760'\n  },\n  {\n    base: 'W',\n    letters: '\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'\n  },\n  {\n    base: 'X',\n    letters: '\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'\n  },\n  {\n    base: 'Y',\n    letters:\n      '\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'\n  },\n  {\n    base: 'Z',\n    letters: '\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'\n  },\n  {\n    base: 'a',\n    letters:\n      '\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'\n  },\n  {\n    base: 'aa',\n    letters: '\\uA733'\n  },\n  {\n    base: 'ae',\n    letters: '\\u00E6\\u01FD\\u01E3'\n  },\n  {\n    base: 'ao',\n    letters: '\\uA735'\n  },\n  {\n    base: 'au',\n    letters: '\\uA737'\n  },\n  {\n    base: 'av',\n    letters: '\\uA739\\uA73B'\n  },\n  {\n    base: 'ay',\n    letters: '\\uA73D'\n  },\n  {\n    base: 'b',\n    letters: '\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'\n  },\n  {\n    base: 'c',\n    letters: '\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'\n  },\n  {\n    base: 'd',\n    letters: '\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'\n  },\n  {\n    base: 'dz',\n    letters: '\\u01F3\\u01C6'\n  },\n  {\n    base: 'e',\n    letters:\n      '\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'\n  },\n  {\n    base: 'f',\n    letters: '\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'\n  },\n  {\n    base: 'g',\n    letters:\n      '\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'\n  },\n  {\n    base: 'h',\n    letters:\n      '\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'\n  },\n  {\n    base: 'hv',\n    letters: '\\u0195'\n  },\n  {\n    base: 'i',\n    letters:\n      '\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'\n  },\n  {\n    base: 'j',\n    letters: '\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'\n  },\n  {\n    base: 'k',\n    letters: '\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'\n  },\n  {\n    base: 'l',\n    letters:\n      '\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'\n  },\n  {\n    base: 'lj',\n    letters: '\\u01C9'\n  },\n  {\n    base: 'm',\n    letters: '\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'\n  },\n  {\n    base: 'n',\n    letters:\n      '\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'\n  },\n  {\n    base: 'nj',\n    letters: '\\u01CC'\n  },\n  {\n    base: 'o',\n    letters:\n      '\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'\n  },\n  {\n    base: 'oi',\n    letters: '\\u01A3'\n  },\n  {\n    base: 'ou',\n    letters: '\\u0223'\n  },\n  {\n    base: 'oo',\n    letters: '\\uA74F'\n  },\n  {\n    base: 'p',\n    letters: '\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'\n  },\n  {\n    base: 'q',\n    letters: '\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'\n  },\n  {\n    base: 'r',\n    letters:\n      '\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'\n  },\n  {\n    base: 's',\n    letters:\n      '\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'\n  },\n  {\n    base: 't',\n    letters:\n      '\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'\n  },\n  {\n    base: 'tz',\n    letters: '\\uA729'\n  },\n  {\n    base: 'u',\n    letters:\n      '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'\n  },\n  {\n    base: 'v',\n    letters: '\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'\n  },\n  {\n    base: 'vy',\n    letters: '\\uA761'\n  },\n  {\n    base: 'w',\n    letters: '\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'\n  },\n  {\n    base: 'x',\n    letters: '\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'\n  },\n  {\n    base: 'y',\n    letters:\n      '\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'\n  },\n  {\n    base: 'z',\n    letters: '\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'\n  }\n];\n\nconst diacriticsMap: T.Dict<string> = {};\ndefaultDiacriticsRemovalap.forEach(defaultDiacritic =>\n  defaultDiacritic.letters.split('').forEach(letter => {\n    diacriticsMap[letter] = defaultDiacritic.base;\n  })\n);\n\n// \"what?\" version ... http://jsperf.com/diacritics/12\nexport function latinize(str: string): string {\n  // eslint-disable-next-line no-control-regex\n  return str.replace(/[^\\u0000-\\u007E]/g, a => diacriticsMap[a] || a);\n}\n\n// Inspired from https://github.com/SonarSource/sonar-enterprise/blob/master/sonar-core/src/main/java/org/sonar/core/util/Slug.java\nexport function slugify(text: string) {\n  return latinize(text.trim().toLowerCase())\n    .replace(/&/g, '-and-') // Replace & with 'and'\n    .replace(/[^\\w-]+/g, '-') // Replace all non-word chars with dash\n    .replace(/\\s+/g, '-') // Replace whitespaces with dash\n    .replace(/[·/_,:;]/g, '-') // Replace special chars with dash\n    .replace(/--+/g, '-') // Replace multiple dash with single dash\n    .replace(/^-+/, '') // Remove heading dash\n    .replace(/-+$/, ''); // Remove trailing dash\n}\n\nexport function decodeJwt(token: string) {\n  const segments = token.split('.');\n  const base64Url = segments.length > 1 ? segments[1] : segments[0];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  return JSON.parse(window.atob(base64));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from './Tooltip';\nimport * as theme from '../../app/theme';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  tooltip?: string;\n  onClick: () => void;\n}\n\nexport default class ReloadButton extends React.PureComponent<Props> {\n  handleClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick();\n  };\n\n  renderIcon = () => (\n    <svg height=\"24\" viewBox=\"0 0 18 24\" width=\"18\">\n      <path\n        d=\"M16.6454 8.1084c-.3-.5-.9-.7-1.4-.4-.5.3-.7.9-.4 1.4.9 1.6 1.1 3.4.6 5.1-.5 1.7-1.7 3.2-3.2 4-3.3 1.8-7.4.6-9.1-2.7-1.8-3.1-.8-6.9 2.1-8.8v3.3h2v-7h-7v2h3.9c-3.7 2.5-5 7.5-2.8 11.4 1.6 3 4.6 4.6 7.7 4.6 1.4 0 2.8-.3 4.2-1.1 2-1.1 3.5-3 4.2-5.2.6-2.2.3-4.6-.8-6.6z\"\n        fill={theme.secondFontColor}\n      />\n    </svg>\n  );\n\n  render() {\n    const { tooltip = translate('reload') } = this.props;\n    return (\n      <Tooltip overlay={tooltip}>\n        <a\n          className={classNames('link-no-underline', this.props.className)}\n          href=\"#\"\n          onClick={this.handleClick}>\n          {this.renderIcon()}\n        </a>\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('outline-badge', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return (\n      <DocTooltip\n        doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/built-in-quality-profile.md')}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n  return badge;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getStandards(): Promise<T.Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: T.Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","export default \"Built-in profiles are provided directly by the language analyzers and may be updated with each new analyzer version. They represent best-practice, minimum rule sets.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Query } from '../query';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport { translate } from '../../../helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport FilterIcon from '../../../components/icons-components/FilterIcon';\nimport DropdownIcon from '../../../components/icons-components/DropdownIcon';\nimport TagsIcon from '../../../components/icons-components/TagsIcon';\n\ninterface Props {\n  onFilterChange: (changes: Partial<Query>) => void;\n  rule: T.Rule;\n}\n\nexport default class SimilarRulesFilter extends React.PureComponent<Props> {\n  handleLanguageClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.lang) {\n      this.props.onFilterChange({ languages: [this.props.rule.lang] });\n    }\n  };\n\n  handleTypeClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onFilterChange({ types: [this.props.rule.type] });\n  };\n\n  handleSeverityClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.severity) {\n      this.props.onFilterChange({ severities: [this.props.rule.severity] });\n    }\n  };\n\n  handleTagClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { tag } = event.currentTarget.dataset;\n    if (tag) {\n      this.props.onFilterChange({ tags: [tag] });\n    }\n  };\n\n  render() {\n    const { rule } = this.props;\n    const { tags = [], sysTags = [], severity } = rule;\n    const allTags = [...tags, ...sysTags];\n\n    return (\n      <Dropdown\n        className=\"display-inline-block\"\n        overlay={\n          <>\n            <ul className=\"menu\">\n              <li className=\"menu-header\">{translate('coding_rules.filter_similar_rules')}</li>\n              <li>\n                <a data-field=\"language\" href=\"#\" onClick={this.handleLanguageClick}>\n                  {rule.langName}\n                </a>\n              </li>\n\n              <li>\n                <a data-field=\"type\" href=\"#\" onClick={this.handleTypeClick}>\n                  {translate('issue.type', rule.type)}\n                </a>\n              </li>\n\n              {severity && (\n                <li>\n                  <a data-field=\"severity\" href=\"#\" onClick={this.handleSeverityClick}>\n                    <SeverityHelper severity={rule.severity} />\n                  </a>\n                </li>\n              )}\n\n              {allTags.length > 0 && (\n                <>\n                  <li className=\"divider\" />\n                  {allTags.map(tag => (\n                    <li key={tag}>\n                      <a data-field=\"tag\" data-tag={tag} href=\"#\" onClick={this.handleTagClick}>\n                        <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                        <span className=\"text-middle\">{tag}</span>\n                      </a>\n                    </li>\n                  ))}\n                </>\n              )}\n            </ul>\n          </>\n        }>\n        <a\n          className=\"js-rule-filter link-no-underline spacer-left dropdown-toggle\"\n          href=\"#\"\n          title={translate('coding_rules.filter_similar_rules')}>\n          <FilterIcon className=\"icon-half-transparent\" />\n          <DropdownIcon className=\"icon-half-transparent\" />\n        </a>\n      </Dropdown>\n    );\n  }\n}\n","export default \"Custom rules are created by administrators from templates, and are the only fully-editable rules.\\n\"","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".coding-rules-extended-view .coding-rules-list{display:none}.coding-rules-extended-view .coding-rules-details{display:block}.coding-rules-detail-title{position:relative;display:inline-block;margin:16px 0;font-size:16px;font-weight:400}.coding-rules-detail-quality-profile-parameter{display:block;height:100%;padding-top:0;padding-right:10px}.coding-rules-detail-quality-profile-parameter .key,.coding-rules-detail-quality-profile-parameter .sep,.coding-rules-detail-quality-profile-parameter .value{display:inline;vertical-align:top}.coding-rules-detail-quality-profile-parameter .value{display:inline-block;vertical-align:top;line-height:23px;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace}.coding-rules-detail-quality-profile-parameter+.coding-rules-detail-quality-profile-parameter{margin-top:0}.coding-rules-detail-properties{display:flex;flex-wrap:wrap;align-items:center;margin-top:8px}.coding-rules-detail-properties+.coding-rules-detail-properties{margin-top:-10px}.coding-rules-detail-property{display:flex;align-items:center;margin-right:16px;margin-bottom:8px;font-size:12px}.coding-rules-detail-tag+.coding-rules-detail-tag{margin-left:10px}.coding-rules-detail-tags-change{cursor:pointer}.coding-rules-detail-tags-change:hover span{text-decoration:underline}.coding-rules-detail-tag-edit{line-height:1}.coding-rules-details-tag-edit-cancel{vertical-align:middle}.coding-rules-detail-description{margin:20px 0}.coding-rules-detail-description-extra{margin-top:-10px}.coding-rules-detail-extend-description-form{margin:10px 0}.coding-rules-detail-parameters{width:100%;margin:10px 0 20px}.coding-rules-detail-parameter-name{width:1px;vertical-align:top;padding:5px 10px 5px 0;font-weight:700}.coding-rules-detail-parameter-description{vertical-align:top;padding:5px}.coding-rules-detail-parameter-value{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;word-break:break-all}.coding-rules-detail-list,.coding-rules-detail-quality-profiles{width:100%;line-height:22px}.coding-rules-detail-list td,.coding-rules-detail-quality-profiles td{border-top:1px solid #e6e6e6}.coding-rules-detail-list tr:first-child td,.coding-rules-detail-quality-profiles tr:first-child td{border-top:none}.coding-rules-detail-list-name,.coding-rules-detail-quality-profile-name{vertical-align:top;width:1px;padding:8px 5px 8px 0;font-weight:600;white-space:nowrap}.coding-rules-detail-list-severity,.coding-rules-detail-quality-profile-severity{vertical-align:top;width:1px;padding:8px 5px;white-space:nowrap}.coding-rules-detail-quality-profile-severity i{margin-top:2px}.coding-rules-detail-list-parameters,.coding-rules-detail-quality-profile-parameters{vertical-align:top;padding:8px 5px}.coding-rules-detail-list-actions,.coding-rules-detail-quality-profile-actions{vertical-align:top;width:1px;padding:8px 0 8px 5px;text-align:right;white-space:nowrap}.coding-rules-detail-quality-profile-inheritance{font-size:12px;font-weight:400}.coding-rules-detail-quality-profiles-activation{margin-top:-3px;margin-left:10px}.coding-rules-most-violated-projects td{border-top-color:transparent}.coding-rules-most-violated-projects tr:first-child+tr td{border-top-color:#e6e6e6}.coding-rules-most-violated-projects .coding-rules-detail-list-name{font-weight:400}.coding-rule{padding:8px 10px 8px 8px;border:1px solid transparent;background-color:#fff}.coding-rule.selected{border-color:#4b9fd5!important}.coding-rule+.coding-rule{border-top-color:#e6e6e6}.coding-rule.selected+.coding-rule{border-top-color:transparent}.coding-rule-table{width:100%}.coding-rule-table td{vertical-align:top}.coding-rule-table+.coding-rule-table{margin-top:5px}.coding-rule-table-meta-cell{width:1px;white-space:nowrap}@media (max-width:1320px){.coding-rule-table .tags-list span{max-width:100px}}.coding-rule-title{line-height:20px;font-size:13px}.coding-rule-meta{padding:2px 2px 2px 30px;font-size:12px}.coding-rule-activation{width:40px;line-height:19.5px}.coding-rule-activation-actions{padding-left:20px}.coding-rule-section-separator{height:0;margin:10px 0;border-top:1px solid #e6e6e6}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./MultipleSelectionHint.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".multiple-selection-hint{margin-top:8px;margin-bottom:8px;text-align:center}.multiple-selection-hint-inner{display:inline-block;height:24px;line-height:24px;border-radius:24px;background-color:#e6e6e6;text-align:center;padding:0 8px;font-size:12px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy, without, omit } from 'lodash';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport MultipleSelectionHint from '../../../components/facet/MultipleSelectionHint';\nimport { translate } from '../../../helpers/l10n';\nimport { highlightTerm } from '../../../helpers/search';\nimport {\n  getStandards,\n  renderCWECategory,\n  renderOwaspTop10Category,\n  renderSansTop25Category,\n  renderSonarSourceSecurityCategory\n} from '../../../helpers/security-standard';\nimport { Query, STANDARDS, formatFacetStat, Facet } from '../utils';\n\ninterface Props {\n  cwe: string[];\n  cweOpen: boolean;\n  cweStats: T.Dict<number> | undefined;\n  fetchingCwe: boolean;\n  fetchingOwaspTop10: boolean;\n  fetchingSansTop25: boolean;\n  fetchingSonarSourceSecurity: boolean;\n  loadSearchResultCount?: (property: string, changes: Partial<Query>) => Promise<Facet>;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  owaspTop10: string[];\n  owaspTop10Open: boolean;\n  owaspTop10Stats: T.Dict<number> | undefined;\n  query: Partial<Query>;\n  sansTop25: string[];\n  sansTop25Open: boolean;\n  sansTop25Stats: T.Dict<number> | undefined;\n  sonarsourceSecurity: string[];\n  sonarsourceSecurityOpen: boolean;\n  sonarsourceSecurityStats: T.Dict<number> | undefined;\n}\n\ninterface State {\n  cweQuery: string;\n  standards: T.Standards;\n}\n\ntype StatsProp = 'owaspTop10Stats' | 'cweStats' | 'sansTop25Stats' | 'sonarsourceSecurityStats';\ntype ValuesProp = T.StandardType;\n\nexport default class StandardFacet extends React.PureComponent<Props, State> {\n  mounted = false;\n  property = STANDARDS;\n  state: State = {\n    cweQuery: '',\n    standards: { owaspTop10: {}, sansTop25: {}, cwe: {}, sonarsourceSecurity: {} }\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n\n    // load standards.json only if the facet is open, or there is a selected value\n    if (\n      this.props.open ||\n      this.props.owaspTop10.length > 0 ||\n      this.props.cwe.length > 0 ||\n      this.props.sansTop25.length > 0 ||\n      this.props.sonarsourceSecurity.length > 0\n    ) {\n      this.loadStandards();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.open && this.props.open) {\n      this.loadStandards();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStandards = () => {\n    getStandards().then(\n      ({ owaspTop10, sansTop25, cwe, sonarsourceSecurity }: T.Standards) => {\n        if (this.mounted) {\n          this.setState({ standards: { owaspTop10, sansTop25, cwe, sonarsourceSecurity } });\n        }\n      },\n      () => {}\n    );\n  };\n\n  getValues = () => {\n    return [\n      ...this.props.sonarsourceSecurity.map(item =>\n        renderSonarSourceSecurityCategory(this.state.standards, item, true)\n      ),\n      ...this.props.owaspTop10.map(item =>\n        renderOwaspTop10Category(this.state.standards, item, true)\n      ),\n      ...this.props.sansTop25.map(item =>\n        renderSansTop25Category(this.state.standards, item, true)\n      ),\n      ...this.props.cwe.map(item => renderCWECategory(this.state.standards, item))\n    ];\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleOwaspTop10HeaderClick = () => {\n    this.props.onToggle('owaspTop10');\n  };\n\n  handleSansTop25HeaderClick = () => {\n    this.props.onToggle('sansTop25');\n  };\n\n  handleSonarSourceSecurityHeaderClick = () => {\n    this.props.onToggle('sonarsourceSecurity');\n  };\n\n  handleClear = () => {\n    this.props.onChange({\n      [this.property]: [],\n      owaspTop10: [],\n      sansTop25: [],\n      cwe: [],\n      sonarsourceSecurity: []\n    });\n  };\n\n  handleItemClick = (prop: ValuesProp, itemValue: string, multiple: boolean) => {\n    const items = this.props[prop];\n    if (multiple) {\n      const newValue = sortBy(\n        items.includes(itemValue) ? without(items, itemValue) : [...items, itemValue]\n      );\n      this.props.onChange({ [prop]: newValue });\n    } else {\n      this.props.onChange({\n        [prop]: items.includes(itemValue) && items.length < 2 ? [] : [itemValue]\n      });\n    }\n  };\n\n  handleOwaspTop10ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('owaspTop10', itemValue, multiple);\n  };\n\n  handleSansTop25ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('sansTop25', itemValue, multiple);\n  };\n\n  handleSonarSourceSecurityItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('sonarsourceSecurity', itemValue, multiple);\n  };\n\n  handleCWESearch = (query: string) => {\n    return Promise.resolve({\n      results: Object.keys(this.state.standards.cwe).filter(cwe =>\n        renderCWECategory(this.state.standards, cwe)\n          .toLowerCase()\n          .includes(query.toLowerCase())\n      )\n    });\n  };\n\n  loadCWESearchResultCount = (categories: string[]) => {\n    const { loadSearchResultCount } = this.props;\n    return loadSearchResultCount\n      ? loadSearchResultCount('cwe', { cwe: categories })\n      : Promise.resolve({});\n  };\n\n  renderList = (\n    statsProp: StatsProp,\n    valuesProp: ValuesProp,\n    renderName: (standards: T.Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    const stats = this.props[statsProp];\n    const values = this.props[valuesProp];\n    if (!stats) {\n      return null;\n    }\n    const categories = sortBy(Object.keys(stats), key => -stats[key]);\n    return this.renderFacetItemsList(stats, values, categories, renderName, renderName, onClick);\n  };\n\n  // eslint-disable-next-line max-params\n  renderFacetItemsList = (\n    stats: any,\n    values: string[],\n    categories: string[],\n    renderName: (standards: T.Standards, category: string) => React.ReactNode,\n    renderTooltip: (standards: T.Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    if (!categories.length) {\n      return (\n        <div className=\"search-navigator-facet-empty little-spacer-top\">\n          {translate('no_results')}\n        </div>\n      );\n    }\n\n    const getStat = (category: string) => {\n      return stats ? stats[category] : undefined;\n    };\n\n    return (\n      <FacetItemsList>\n        {categories.map(category => (\n          <FacetItem\n            active={values.includes(category)}\n            key={category}\n            name={renderName(this.state.standards, category)}\n            onClick={onClick}\n            stat={formatFacetStat(getStat(category))}\n            tooltip={renderTooltip(this.state.standards, category)}\n            value={category}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  };\n\n  renderHint = (statsProp: StatsProp, valuesProp: ValuesProp) => {\n    const stats = this.props[statsProp] || {};\n    const values = this.props[valuesProp];\n    return <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />;\n  };\n\n  renderOwaspTop10List() {\n    return this.renderList(\n      'owaspTop10Stats',\n      'owaspTop10',\n      renderOwaspTop10Category,\n      this.handleOwaspTop10ItemClick\n    );\n  }\n\n  renderOwaspTop10Hint() {\n    return this.renderHint('owaspTop10Stats', 'owaspTop10');\n  }\n\n  renderSansTop25List() {\n    return this.renderList(\n      'sansTop25Stats',\n      'sansTop25',\n      renderSansTop25Category,\n      this.handleSansTop25ItemClick\n    );\n  }\n\n  renderSansTop25Hint() {\n    return this.renderHint('sansTop25Stats', 'sansTop25');\n  }\n\n  renderSonarSourceSecurityList() {\n    return this.renderList(\n      'sonarsourceSecurityStats',\n      'sonarsourceSecurity',\n      renderSonarSourceSecurityCategory,\n      this.handleSonarSourceSecurityItemClick\n    );\n  }\n\n  renderSonarSourceSecurityHint() {\n    return this.renderHint('sonarsourceSecurityStats', 'sonarsourceSecurity');\n  }\n\n  renderSubFacets() {\n    return (\n      <>\n        <FacetBox className=\"is-inner\" property=\"sonarsourceSecurity\">\n          <FacetHeader\n            fetching={this.props.fetchingSonarSourceSecurity}\n            name={translate('issues.facet.sonarsourceSecurity')}\n            onClick={this.handleSonarSourceSecurityHeaderClick}\n            open={this.props.sonarsourceSecurityOpen}\n            values={this.props.sonarsourceSecurity.map(item =>\n              renderSonarSourceSecurityCategory(this.state.standards, item)\n            )}\n          />\n          {this.props.sonarsourceSecurityOpen && (\n            <>\n              {this.renderSonarSourceSecurityList()}\n              {this.renderSonarSourceSecurityHint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property=\"owaspTop10\">\n          <FacetHeader\n            fetching={this.props.fetchingOwaspTop10}\n            name={translate('issues.facet.owaspTop10')}\n            onClick={this.handleOwaspTop10HeaderClick}\n            open={this.props.owaspTop10Open}\n            values={this.props.owaspTop10.map(item =>\n              renderOwaspTop10Category(this.state.standards, item)\n            )}\n          />\n          {this.props.owaspTop10Open && (\n            <>\n              {this.renderOwaspTop10List()}\n              {this.renderOwaspTop10Hint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property=\"sansTop25\">\n          <FacetHeader\n            fetching={this.props.fetchingSansTop25}\n            name={translate('issues.facet.sansTop25')}\n            onClick={this.handleSansTop25HeaderClick}\n            open={this.props.sansTop25Open}\n            values={this.props.sansTop25.map(item =>\n              renderSansTop25Category(this.state.standards, item)\n            )}\n          />\n          {this.props.sansTop25Open && (\n            <>\n              {this.renderSansTop25List()}\n              {this.renderSansTop25Hint()}\n            </>\n          )}\n        </FacetBox>\n        <ListStyleFacet<string>\n          className=\"is-inner\"\n          facetHeader={translate('issues.facet.cwe')}\n          fetching={this.props.fetchingCwe}\n          getFacetItemText={item => renderCWECategory(this.state.standards, item)}\n          getSearchResultKey={item => item}\n          getSearchResultText={item => renderCWECategory(this.state.standards, item)}\n          loadSearchResultCount={this.loadCWESearchResultCount}\n          onChange={this.props.onChange}\n          onSearch={this.handleCWESearch}\n          onToggle={this.props.onToggle}\n          open={this.props.cweOpen}\n          property=\"cwe\"\n          query={omit(this.props.query, 'cwe')}\n          renderFacetItem={item => renderCWECategory(this.state.standards, item)}\n          renderSearchResult={(item, query) =>\n            highlightTerm(renderCWECategory(this.state.standards, item), query)\n          }\n          searchPlaceholder={translate('search.search_for_cwe')}\n          stats={this.props.cweStats}\n          values={this.props.cwe}\n        />\n      </>\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && this.renderSubFacets()}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  current?: number;\n  label: string;\n  total: number;\n}\n\nexport default function PageCounter({ className, current, label, total }: Props) {\n  return (\n    <div className={classNames('display-inline-block', className)}>\n      <strong className=\"little-spacer-right\">\n        {current !== undefined && formatMeasure(current + 1, 'INT') + ' / '}\n        <span className=\"js-page-counter-total\">{formatMeasure(total, 'INT')}</span>\n      </strong>\n      {label}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from '../ui/IssueTypeIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  type: T.IssueType | T.RuleType;\n}\n\nexport default function TypeHelper(props: Props) {\n  return (\n    <span className={props.className}>\n      <IssueTypeIcon className=\"little-spacer-right\" query={props.type} />\n      {translate('issue.type', props.type)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  displayReset: boolean;\n  onReset: () => void;\n}\n\nexport default function FiltersHeader({ displayReset, onReset }: Props) {\n  return (\n    <div className=\"search-navigator-filters-header\">\n      {displayReset && (\n        <div className=\"pull-right\">\n          <Button className=\"button-red\" id=\"coding-rules-clear-all-filters\" onClick={onReset}>\n            {translate('clear_all_filters')}\n          </Button>\n        </div>\n      )}\n\n      <h3>{translate('filters')}</h3>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { without, uniq, difference } from 'lodash';\nimport TagsSelector from '../../../components/tags/TagsSelector';\nimport { getRuleTags } from '../../../api/rules';\n\nexport interface Props {\n  organization: string | undefined;\n  setTags: (tags: string[]) => void;\n  sysTags: string[];\n  tags: string[];\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class RuleDetailsTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return getRuleTags({\n      q: query,\n      ps: Math.min(this.props.tags.length + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      tags => {\n        if (this.mounted) {\n          // systems tags can not be unset, don't display them in the results\n          this.setState({ searchResult: without(tags, ...this.props.sysTags) });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags(uniq([...this.props.tags, tag]));\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.tags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.tags);\n    return (\n      <TagsSelector\n        listSize={LIST_SIZE}\n        onSearch={this.onSearch}\n        onSelect={this.onSelect}\n        onUnselect={this.onUnselect}\n        selectedTags={this.props.tags}\n        tags={availableTags}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function RuleScopeIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 3.071c2.724 0 4.929 2.204 4.929 4.929s-2.204 4.929-4.929 4.929c-2.724 0-4.929-2.204-4.929-4.929s2.204-4.929 4.929-4.929zM8 1.357c-3.669 0-6.643 2.974-6.643 6.643s2.974 6.643 6.643 6.643 6.643-2.974 6.643-6.643-2.974-6.643-6.643-6.643zM8 6.286c0.945 0 1.714 0.769 1.714 1.714s-0.769 1.714-1.714 1.714-1.714-0.769-1.714-1.714 0.769-1.714 1.714-1.714zM8 4.571c-1.893 0-3.429 1.535-3.429 3.429s1.535 3.429 3.429 3.429 3.429-1.535 3.429-3.429-1.535-3.429-3.429-3.429z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport RuleDetailsTagsPopup from './RuleDetailsTagsPopup';\nimport SimilarRulesFilter from './SimilarRulesFilter';\nimport DateFormatter from '../../../components/intl/DateFormatter';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport Dropdown from '../../../components/controls/Dropdown';\nimport IssueTypeIcon from '../../../components/ui/IssueTypeIcon';\nimport LinkIcon from '../../../components/icons-components/LinkIcon';\nimport RuleScopeIcon from '../../../components/icons-components/RuleScopeIcon';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TagsList from '../../../components/tags/TagsList';\nimport Tooltip from '../../../components/controls/Tooltip';\nimport { ButtonLink } from '../../../components/ui/buttons';\nimport { PopupPlacement } from '../../../components/ui/popups';\nimport { Query } from '../query';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  hideSimilarRulesFilter?: boolean;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onTagsChange: (tags: string[]) => void;\n  organization: string | undefined;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleDetails: T.RuleDetails;\n}\n\nconst EXTERNAL_RULE_REPO_PREFIX = 'external_';\n\nexport default class RuleDetailsMeta extends React.PureComponent<Props> {\n  renderType = () => {\n    const { ruleDetails } = this.props;\n    return (\n      <Tooltip overlay={translate('coding_rules.type.tooltip', ruleDetails.type)}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"type\">\n          <IssueTypeIcon className=\"little-spacer-right\" query={ruleDetails.type} />\n          {translate('issue.type', ruleDetails.type)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderSeverity = () => (\n    <Tooltip overlay={translate('default_severity')}>\n      <li className=\"coding-rules-detail-property\" data-meta=\"severity\">\n        <SeverityHelper\n          className=\"display-inline-flex-center\"\n          severity={this.props.ruleDetails.severity}\n        />\n      </li>\n    </Tooltip>\n  );\n\n  renderStatus = () => {\n    const { ruleDetails } = this.props;\n    if (ruleDetails.status === 'READY') {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('status')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"status\">\n          <span className=\"badge badge-normal-size badge-danger-light\">\n            {translate('rules.status', ruleDetails.status)}\n          </span>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTags = () => {\n    const { canWrite, ruleDetails } = this.props;\n    const { sysTags = [], tags = [] } = ruleDetails;\n    const allTags = [...sysTags, ...tags];\n\n    return (\n      <li className=\"coding-rules-detail-property\" data-meta=\"tags\">\n        {this.props.canWrite ? (\n          <Dropdown\n            closeOnClick={false}\n            closeOnClickOutside={true}\n            overlay={\n              <RuleDetailsTagsPopup\n                organization={this.props.organization}\n                setTags={this.props.onTagsChange}\n                sysTags={sysTags}\n                tags={tags}\n              />\n            }\n            overlayPlacement={PopupPlacement.BottomLeft}>\n            <ButtonLink>\n              <TagsList\n                allowUpdate={canWrite}\n                tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n              />\n            </ButtonLink>\n          </Dropdown>\n        ) : (\n          <TagsList\n            allowUpdate={canWrite}\n            className=\"display-flex-center\"\n            tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n          />\n        )}\n      </li>\n    );\n  };\n\n  renderCreationDate = () => (\n    <li className=\"coding-rules-detail-property\" data-meta=\"available-since\">\n      <span className=\"little-spacer-right\">{translate('coding_rules.available_since')}</span>\n      <DateFormatter date={this.props.ruleDetails.createdAt} />\n    </li>\n  );\n\n  renderRepository = () => {\n    const { referencedRepositories, ruleDetails } = this.props;\n    const repository = referencedRepositories[ruleDetails.repo];\n    if (!repository) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.repository_language')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"repository\">\n          {repository.name} ({ruleDetails.langName})\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTemplate = () => {\n    if (!this.props.ruleDetails.isTemplate) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n        <li className=\"coding-rules-detail-property\">{translate('coding_rules.rule_template')}</li>\n      </Tooltip>\n    );\n  };\n\n  renderParentTemplate = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.templateKey) {\n      return null;\n    }\n    return (\n      <li className=\"coding-rules-detail-property\">\n        {translate('coding_rules.custom_rule')}\n        {' ('}\n        <Link to={getRuleUrl(ruleDetails.templateKey, this.props.organization)}>\n          {translate('coding_rules.show_template')}\n        </Link>\n        {')'}\n        <DocTooltip\n          className=\"little-spacer-left\"\n          doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/custom-rules.md')}\n        />\n      </li>\n    );\n  };\n\n  renderRemediation = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.debtRemFnType) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.remediation_function')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"remediation-function\">\n          {translate('coding_rules.remediation_function', ruleDetails.debtRemFnType)}\n          {':'}\n          {ruleDetails.debtRemFnOffset !== undefined && ` ${ruleDetails.debtRemFnOffset}`}\n          {ruleDetails.debtRemFnCoeff !== undefined && ` +${ruleDetails.debtRemFnCoeff}`}\n          {ruleDetails.effortToFixDescription !== undefined &&\n            ` ${ruleDetails.effortToFixDescription}`}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderScope = () => {\n    const scope = this.props.ruleDetails.scope || 'MAIN';\n    return (\n      <Tooltip overlay={translate('coding_rules.scope.title')}>\n        <li className=\"coding-rules-detail-property\">\n          <RuleScopeIcon className=\"little-spacer-right\" />\n          {translate('coding_rules.scope', scope)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderExternalBadge = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.repo) {\n      return null;\n    }\n    const engine = ruleDetails.repo.replace(new RegExp(`^${EXTERNAL_RULE_REPO_PREFIX}`), '');\n    if (!engine) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translateWithParameters('coding_rules.external_rule.engine', engine)}>\n        <li className=\"coding-rules-detail-property\">\n          <div className=\"outline-badge badge-tiny-height spacer-left text-text-top\">{engine}</div>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderKey() {\n    const EXTERNAL_PREFIX = 'external_';\n    const { ruleDetails } = this.props;\n    const displayedKey = ruleDetails.key.startsWith(EXTERNAL_PREFIX)\n      ? ruleDetails.key.substr(EXTERNAL_PREFIX.length)\n      : ruleDetails.key;\n    return <span className=\"note text-middle\">{displayedKey}</span>;\n  }\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasTypeData = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n    return (\n      <div className=\"js-rule-meta\">\n        <header className=\"page-header\">\n          <div className=\"pull-right\">\n            {this.renderKey()}\n            {!ruleDetails.isExternal && (\n              <Link\n                className=\"coding-rules-detail-permalink link-no-underline spacer-left text-middle\"\n                title={translate('permalink')}\n                to={getRuleUrl(ruleDetails.key, this.props.organization)}>\n                <LinkIcon />\n              </Link>\n            )}\n            {!this.props.hideSimilarRulesFilter && (\n              <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={ruleDetails} />\n            )}\n          </div>\n          <h3 className=\"page-title coding-rules-detail-header\">\n            <big>{ruleDetails.name}</big>\n          </h3>\n        </header>\n\n        {hasTypeData && (\n          <ul className=\"coding-rules-detail-properties\">\n            {this.renderType()}\n            {this.renderSeverity()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderStatus()}\n                {this.renderScope()}\n              </>\n            )}\n            {this.renderTags()}\n            {!ruleDetails.isExternal && this.renderCreationDate()}\n            {this.renderRepository()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderTemplate()}\n                {this.renderParentTemplate()}\n                {this.renderRemediation()}\n              </>\n            )}\n            {ruleDetails.isExternal && this.renderExternalBadge()}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SimpleModal from '../../../components/controls/SimpleModal';\nimport { SubmitButton, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  onCancel: () => void;\n  onSubmit: () => void;\n}\n\nexport default function RemoveExtendedDescriptionModal({ onCancel, onSubmit }: Props) {\n  const header = translate('coding_rules.remove_extended_description');\n  return (\n    <SimpleModal header={header} onClose={onCancel} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translate('coding_rules.remove_extended_description.confirm')}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('remove')}\n            </SubmitButton>\n            <ResetButtonLink onClick={onCloseClick}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport RemoveExtendedDescriptionModal from './RemoveExtendedDescriptionModal';\nimport { updateRule } from '../../../api/rules';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { Button, ResetButtonLink } from '../../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  onChange: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  descriptionForm: boolean;\n  removeDescriptionModal: boolean;\n  submitting: boolean;\n}\n\nexport default class RuleDetailsDescription extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    description: '',\n    descriptionForm: false,\n    submitting: false,\n    removeDescriptionModal: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleCancelClick = () => {\n    this.setState({ descriptionForm: false });\n  };\n\n  handleSaveClick = () => {\n    this.updateDescription(this.state.description);\n  };\n\n  handleRemoveDescriptionClick = () => {\n    this.setState({ removeDescriptionModal: true });\n  };\n\n  handleCancelRemoving = () => this.setState({ removeDescriptionModal: false });\n\n  handleConfirmRemoving = () => {\n    this.setState({ removeDescriptionModal: false });\n    this.updateDescription('');\n  };\n\n  updateDescription = (text: string) => {\n    this.setState({ submitting: true });\n\n    updateRule({\n      key: this.props.ruleDetails.key,\n      markdown_note: text,\n      organization: this.props.organization\n    }).then(\n      ruleDetails => {\n        this.props.onChange(ruleDetails);\n        if (this.mounted) {\n          this.setState({ submitting: false, descriptionForm: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  handleExtendDescriptionClick = () => {\n    this.setState({\n      // set description` to the current `mdNote` each time the form is open\n      description: this.props.ruleDetails.mdNote || '',\n      descriptionForm: true\n    });\n  };\n\n  renderDescription = () => (\n    <div id=\"coding-rules-detail-description-extra\">\n      {this.props.ruleDetails.htmlNote !== undefined && (\n        <div\n          className=\"rule-desc spacer-bottom markdown\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: sanitize(this.props.ruleDetails.htmlNote) }}\n        />\n      )}\n      {this.props.canWrite && (\n        <Button\n          id=\"coding-rules-detail-extend-description\"\n          onClick={this.handleExtendDescriptionClick}>\n          {translate('coding_rules.extend_description')}\n        </Button>\n      )}\n    </div>\n  );\n\n  renderForm = () => (\n    <div className=\"coding-rules-detail-extend-description-form\">\n      <table className=\"width-100\">\n        <tbody>\n          <tr>\n            <td colSpan={2}>\n              <textarea\n                autoFocus={true}\n                className=\"width-100 little-spacer-bottom\"\n                id=\"coding-rules-detail-extend-description-text\"\n                onChange={this.handleDescriptionChange}\n                rows={4}\n                value={this.state.description}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <Button\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-submit\"\n                onClick={this.handleSaveClick}>\n                {translate('save')}\n              </Button>\n              {this.props.ruleDetails.mdNote !== undefined && (\n                <>\n                  <Button\n                    className=\"button-red spacer-left\"\n                    disabled={this.state.submitting}\n                    id=\"coding-rules-detail-extend-description-remove\"\n                    onClick={this.handleRemoveDescriptionClick}>\n                    {translate('remove')}\n                  </Button>\n                  {this.state.removeDescriptionModal && (\n                    <RemoveExtendedDescriptionModal\n                      onCancel={this.handleCancelRemoving}\n                      onSubmit={this.handleConfirmRemoving}\n                    />\n                  )}\n                </>\n              )}\n              <ResetButtonLink\n                className=\"spacer-left\"\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-cancel\"\n                onClick={this.handleCancelClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n              {this.state.submitting && <i className=\"spinner spacer-left\" />}\n            </td>\n            <td className=\"text-right\">\n              <MarkdownTips />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasDescription = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n\n    return (\n      <div className=\"js-rule-description\">\n        {hasDescription ? (\n          <div\n            className=\"coding-rules-detail-description rule-desc markdown\"\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: sanitize(ruleDetails.htmlDesc || '') }}\n          />\n        ) : (\n          <div className=\"coding-rules-detail-description rule-desc markdown\">\n            {translateWithParameters('issue.external_issue_description', ruleDetails.name)}\n          </div>\n        )}\n\n        {!ruleDetails.templateKey && (\n          <div className=\"coding-rules-detail-description coding-rules-detail-description-extra\">\n            {!this.state.descriptionForm && this.renderDescription()}\n            {this.state.descriptionForm && this.props.canWrite && this.renderForm()}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { activateRule, Profile } from '../../../api/quality-profiles';\nimport Modal from '../../../components/controls/Modal';\nimport Select from '../../../components/controls/Select';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Alert } from '../../../components/ui/Alert';\nimport { ResetButtonLink, SubmitButton } from '../../../components/ui/buttons';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { translate } from '../../../helpers/l10n';\nimport { sortProfiles } from '../../quality-profiles/utils';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  modalHeader: string;\n  onClose: () => void;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: Profile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  params: T.Dict<string>;\n  profile: string;\n  severity: string;\n  submitting: boolean;\n}\n\nexport default class ActivationFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const profilesWithDepth = this.getQualityProfilesWithDepth(props);\n    this.state = {\n      params: this.getParams(props),\n      profile: profilesWithDepth.length > 0 ? profilesWithDepth[0].key : '',\n      severity: props.activation ? props.activation.severity : props.rule.severity,\n      submitting: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getParams = ({ activation, rule } = this.props) => {\n    const params: T.Dict<string> = {};\n    if (rule && rule.params) {\n      for (const param of rule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n      if (activation && activation.params) {\n        for (const param of activation.params) {\n          params[param.key] = param.value;\n        }\n      }\n    }\n    return params;\n  };\n\n  // Choose QP which a user can administrate, which are the same language and which are not built-in\n  getQualityProfilesWithDepth = ({ profiles } = this.props) => {\n    return sortProfiles(\n      profiles.filter(\n        profile =>\n          !profile.isBuiltIn &&\n          profile.actions &&\n          profile.actions.edit &&\n          profile.language === this.props.rule.lang\n      )\n    ).map(profile => ({\n      ...profile,\n      // Decrease depth by 1, so the top level starts at 0\n      depth: profile.depth - 1\n    }));\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    const data = {\n      key: this.state.profile,\n      organization: this.props.organization,\n      params: this.state.params,\n      rule: this.props.rule.key,\n      severity: this.state.severity\n    };\n    activateRule(data)\n      .then(() => this.props.onDone(data.severity))\n      .then(\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n            this.props.onClose();\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n  };\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  handleProfileChange = ({ value }: { value: string }) => {\n    this.setState({ profile: value });\n  };\n\n  handleSeverityChange = ({ value }: { value: string }) => {\n    this.setState({ severity: value });\n  };\n\n  renderSeverityOption = ({ value }: { value: string }) => {\n    return <SeverityHelper severity={value} />;\n  };\n\n  render() {\n    const { activation, rule } = this.props;\n    const { profile, severity, submitting } = this.state;\n    const { params = [] } = rule;\n    const profilesWithDepth = this.getQualityProfilesWithDepth();\n    const isCustomRule = !!(rule as T.RuleDetails).templateKey;\n    const activeInAllProfiles = profilesWithDepth.length <= 0;\n    const isUpdateMode = !!activation;\n\n    return (\n      <Modal contentLabel={this.props.modalHeader} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{this.props.modalHeader}</h2>\n          </div>\n\n          <div className=\"modal-body modal-container\">\n            {!isUpdateMode && activeInAllProfiles && (\n              <Alert variant=\"info\">{translate('coding_rules.active_in_all_profiles')}</Alert>\n            )}\n\n            <div className=\"modal-field\">\n              <label>{translate('coding_rules.quality_profile')}</label>\n              <Select\n                className=\"js-profile\"\n                clearable={false}\n                disabled={submitting || profilesWithDepth.length === 1}\n                onChange={this.handleProfileChange}\n                options={profilesWithDepth.map(profile => ({\n                  label: '   '.repeat(profile.depth) + profile.name,\n                  value: profile.key\n                }))}\n                value={profile}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label>{translate('severity')}</label>\n              <Select\n                className=\"js-severity\"\n                clearable={false}\n                disabled={submitting}\n                onChange={this.handleSeverityChange}\n                optionRenderer={this.renderSeverityOption}\n                options={SEVERITIES.map(severity => ({\n                  label: translate('severity', severity),\n                  value: severity\n                }))}\n                searchable={false}\n                value={severity}\n                valueRenderer={this.renderSeverityOption}\n              />\n            </div>\n            {isCustomRule ? (\n              <div className=\"modal-field\">\n                <p className=\"note\">{translate('coding_rules.custom_rule.activation_notice')}</p>\n              </div>\n            ) : (\n              params.map(param => (\n                <div className=\"modal-field\" key={param.key}>\n                  <label title={param.key}>{param.key}</label>\n                  {param.type === 'TEXT' ? (\n                    <textarea\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      rows={3}\n                      value={this.state.params[param.key] || ''}\n                    />\n                  ) : (\n                    <input\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      type=\"text\"\n                      value={this.state.params[param.key] || ''}\n                    />\n                  )}\n                  <div\n                    className=\"note\"\n                    // eslint-disable-next-line react/no-danger\n                    dangerouslySetInnerHTML={{ __html: sanitize(param.htmlDesc || '') }}\n                  />\n                </div>\n              ))\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitting || activeInAllProfiles}>\n              {isUpdateMode ? translate('save') : translate('coding_rules.activate')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n"],"sourceRoot":""}