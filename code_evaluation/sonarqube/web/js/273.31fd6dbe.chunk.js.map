{"version":3,"sources":["webpack:///./node_modules/lodash/max.js","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltipsContent.tsx","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltips.tsx","webpack:///./src/main/js/components/preview-graph/PreviewGraph.tsx","webpack:///./src/main/js/apps/portfolio/styles.css?506b","webpack:///./src/main/js/apps/portfolio/styles.css","webpack:///./src/main/js/apps/portfolio/components/Summary.tsx","webpack:///./src/main/js/apps/portfolio/components/Subscription.tsx","webpack:///./src/main/js/api/report.ts","webpack:///./src/main/js/apps/portfolio/components/SubscriptionContainer.tsx","webpack:///./src/main/js/apps/portfolio/components/Report.tsx","webpack:///./src/main/js/apps/portfolio/components/WorstProjects.tsx","webpack:///./src/main/js/apps/portfolio/components/RatingFreshness.tsx","webpack:///./src/main/js/apps/portfolio/components/ReleasabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/Effort.tsx","webpack:///./src/main/js/apps/portfolio/components/MeasuresButtonLink.tsx","webpack:///./src/main/js/apps/portfolio/components/HistoryButtonLink.tsx","webpack:///./src/main/js/apps/portfolio/components/MainRating.tsx","webpack:///./src/main/js/apps/portfolio/components/ReliabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/SecurityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/MaintainabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/Activity.tsx","webpack:///./src/main/js/apps/portfolio/utils.ts","webpack:///./src/main/js/apps/portfolio/components/App.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.tsx","webpack:///./node_modules/lodash/toFinite.js","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.css?1425","webpack:///./src/main/js/components/controls/HelpTooltip.css","webpack:///./src/main/js/components/icons-components/QualifierIcon.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./node_modules/lodash/map.js","webpack:///./src/main/js/components/ui/Rating.tsx","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./node_modules/lodash/groupBy.js","webpack:///./src/main/js/components/ui/Level.css?5a2b","webpack:///./src/main/js/components/ui/Level.css","webpack:///./src/main/js/components/ui/Rating.css?38ca","webpack:///./src/main/js/components/ui/Rating.css","webpack:///./node_modules/lodash/toInteger.js","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/apps/projectActivity/utils.ts","webpack:///./src/main/js/helpers/organizations.ts","webpack:///./node_modules/lodash/_baseExtremum.js","webpack:///./src/main/js/components/icons-components/BubblesIcon.tsx","webpack:///./src/main/js/components/icons-components/VisibleIcon.tsx","webpack:///./src/main/js/components/common/PrivacyBadgeContainer.tsx","webpack:///./src/main/js/components/charts/BarChart.css?d69c","webpack:///./src/main/js/components/charts/BarChart.css","webpack:///../sonar-docs/src/tooltips/project/visibility-private.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-paid-org-admin.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-paid-org.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-admin.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public.md","webpack:///./node_modules/lodash/flatMap.js","webpack:///./src/main/js/components/charts/LineChart.css?a838","webpack:///./src/main/js/components/icons-components/ChartLegendIcon.tsx","webpack:///./src/main/js/components/icons-components/HistoryIcon.tsx","webpack:///./src/main/js/components/charts/Histogram.css?58e5","webpack:///./src/main/js/components/charts/Histogram.css","webpack:///./node_modules/lodash/_baseGt.js","webpack:///./src/main/js/components/charts/LineChart.css","webpack:///./node_modules/lodash/minBy.js","webpack:///./node_modules/lodash/_baseLt.js","webpack:///./src/main/js/components/charts/AdvancedTimeline.tsx","webpack:///./src/main/js/components/charts/AdvancedTimeline.css?76b9","webpack:///./src/main/js/components/charts/AdvancedTimeline.css","webpack:///./node_modules/lodash/chunk.js","webpack:///./node_modules/lodash/_baseSlice.js","webpack:///./src/main/js/api/time-machine.ts","webpack:///./src/main/js/components/charts/Histogram.tsx","webpack:///./src/main/js/components/charts/LanguageDistribution.tsx","webpack:///./src/main/js/components/charts/LanguageDistributionContainer.tsx"],"names":["baseExtremum","__webpack_require__","baseGt","identity","module","exports","array","length","undefined","PreviewGraphTooltipsContent","_a","style","translatedName","value","index_js_exposed","className","ChartLegendIcon","_super","PreviewGraphTooltips","__extends","prototype","render","_this","this","tooltipIdx","props","left","tooltipPos","placement","popups","RightTop","graphWidth","LeftTop","top","width","DateFormatter","date","selectedDate","long","series","map","serie","idx","point","data","y","key","name","toString","formatValue","GRAPH_PADDING","MAX_GRAPH_NB","MAX_SERIES_PER_GRAPH","PreviewGraph_PreviewGraph","PreviewGraph","call","tick","Object","measures","utils","state","getDisplayedMetrics","graph","customMetrics","metrics","getSeries","history","myHistory","displayedMetrics","firstValid","minBy_default","metric","find","p","measureHistory","filter","handleClick","router","push","pathname","query","__assign","id","project","branches","branchLike","updateTooltip","tooltipXPos","setState","customGraphs","storage","split","PreviewGraph_extends","componentWillReceiveProps","nextProps","renderTimeline","AutoSizer","disableHeight","AdvancedTimeline","height","hideGrid","hideXAxis","metricType","padding","showAreas","includes","preview_graph_PreviewGraphTooltips","onClick","role","tabIndex","renderWhenEmpty","__webpack_exports__","withRouter","content","i","options","hmr","transform","insertInto","locals","Summary","component","projects","ncloc","nclocDistribution","description","react_router_es","to","urls","componentKey","Measure","metricKey","l10n","LanguageDistributionContainer","distribution","Subscription","mounted","stopLoading","loading","handleSubscription","subscribed","handleSubscribe","request","catch","throwGlobalError","then","handleUnsubscribe","getEffectiveFrequencyText","effectiveFrequency","status","componentFrequency","globalFrequency","renderLoading","renderWhenSubscribed","AlertSuccessIcon","buttons","renderWhenNotSubscribed","componentDidMount","componentWillUnmount","inner","hasEmail","users","currentUser","email","SubscriptionContainer","es","rootReducer","components_Subscription","Report","apply","arguments","renderHeader","Report_extends","loadStatus","canDownload","download","href","window","baseUrl","encodeURIComponent","getReportUrl","target","canSubscribe","WorstProjects","subComponents","total","count","maxLoc","max_default","Number","projectsPageUrl","refKey","QualifierIcon","qualifier","renderCell","barWidth","Math","max","round","x","renderNcloc","helpers_measures","type","RatingFreshness","lastChange","rating","index_es","defaultMessage","values","Rating","small","JSON","parse","DateFromNow","ReleasabilityBox","lastReleasabilityChange","effort","Level","level","Effort","String","MeasuresButtonLink","BubblesIcon","size","HistoryButtonLink","HistoryIcon","MainRating","ReliabilityBox","lastReliabilityChange","rawEffort","SecurityBox","lastSecurityChange","MaintainabilityBox","lastMaintainabilityChange","Activity","fetchHistory","graphMetrics","time_machine","join","timeMachine","history_1","forEach","measure","analysis","dates","Activity_extends","componentDidUpdate","prevProps","PORTFOLIO_METRICS","SUB_COMPONENTS_METRICS","convertMeasures","result","App_App","App","isEmpty","isNotComputed","App_extends","fetchMetrics","fetchData","Promise","all","api_measures","metricKeys","components","ps","s","totalSubComponents","paging","renderSpinner","renderEmpty","renderWhenNotComputed","renderMain","visibility","PrivacyBadgeContainer","organization","tooltipProps","projectKey","components_Activity","components_Report","mapDispatchToProps","rootActions","d","HelpTooltip","react__WEBPACK_IMPORTED_MODULE_0__","classnames__WEBPACK_IMPORTED_MODULE_1__","_Tooltip__WEBPACK_IMPORTED_MODULE_2__","_icons_components_HelpIcon__WEBPACK_IMPORTED_MODULE_3__","_app_theme__WEBPACK_IMPORTED_MODULE_4__","children","fill","_b","tagName","mouseLeaveDelay","onShow","overlay","toNumber","INFINITY","MAX_INTEGER","DocMarkdownBlock","_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","e","bind","DocTooltip","open","close","doc","default","document","addEventListener","removeEventListener","_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1__","childProps","overlayProps","isTooltip","_Icon__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","qualifierIcons","app","brc","dev","dir","DirectoryIcon","fil","svw","trk","ProjectIcon","uts","UnitTestIcon","vw","cla","dev_prj","lib","pac","toLowerCase","FoundIcon","formatterOption","year","month","day","longFormatterOption","react_intl__WEBPACK_IMPORTED_MODULE_1__","_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","arrayMap","baseIteratee","baseMap","isArray","collection","iteratee","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","muted","_c","formatted","rating-small","rating-muted","level-small","level-muted","baseAssignValue","createAggregator","hasOwnProperty","groupBy","toFinite","remainder","getLeakPeriod","getPeriodLabel","getPeriodDate","_l10n__WEBPACK_IMPORTED_MODULE_0__","_dates__WEBPACK_IMPORTED_MODULE_1__","periods","index","Array","period","getPeriod","dateFormatter","parameter","modeParam","mode","_utils__WEBPACK_IMPORTED_MODULE_1__","_ui_Rating__WEBPACK_IMPORTED_MODULE_2__","_ui_Level__WEBPACK_IMPORTED_MODULE_3__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_4__","_helpers_measures__WEBPACK_IMPORTED_MODULE_5__","decimals","formattedValue","tooltip","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","substr","EVENT_TYPES","APPLICATION_EVENT_TYPES","DEFAULT_GRAPH","GRAPH_TYPES","GRAPHS_METRICS_DISPLAYED","issues","coverage","duplications","GRAPHS_METRICS","concat","PROJECT_ACTIVITY_GRAPH","PROJECT_ACTIVITY_GRAPH_CUSTOM","datesQueryChanged","prevQuery","nextQuery","lodash_isEqual__WEBPACK_IMPORTED_MODULE_1___default","from","activityQueryChanged","category","customMetricsChanged","hasDataValues","some","Boolean","hasHistoryData","hasHistoryDataValue","historyQueryChanged","isCustomGraph","selectedDateQueryChanged","generateSeries","measuresHistory","lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default","indexOf","uncoveredLines","linesToCover","_helpers_l10n__WEBPACK_IMPORTED_MODULE_7__","generateCoveredLinesMetric","findMetric","splitSeriesInGraphs","maxGraph","maxSeries","lodash_flatMap__WEBPACK_IMPORTED_MODULE_3___default","lodash_groupBy__WEBPACK_IMPORTED_MODULE_2___default","lodash_chunk__WEBPACK_IMPORTED_MODULE_4___default","slice","getSeriesMetricType","getAnalysesByVersionByDay","analyses","reduce","acc","currentVersion","versionEvent","events","event","newVersion","version","byDay","keys","_helpers_dates__WEBPACK_IMPORTED_MODULE_6__","getTime","matchFilters","isAfterFrom","isBeforeTo","hasSelectedCategoryEvents","getDisplayedHistoryMetrics","getHistoryMetrics","parseQuery","urlQuery","_helpers_query__WEBPACK_IMPORTED_MODULE_5__","serializeQuery","serializeUrlQuery","custom_metrics","selected_date","isPaidOrganization","hasPrivateAccess","isCurrentUserMemberOf","_users__WEBPACK_IMPORTED_MODULE_0__","subscription","userOrganizations","actions","admin","org","isSymbol","comparator","current","computed","fillRule","VisibleIcon","Icon","onSonarCloud","system","organizations","icon","theme","badge","classnames","badge-info","badge-icon","resolve","t","getDoc","Tooltip","baseFlatten","other","baseLt","getRatingScale","availableHeight","d3_scale__WEBPACK_IMPORTED_MODULE_8__","domain","range","getLevelScale","getYScale","flatData","d3_array__WEBPACK_IMPORTED_MODULE_7__","nice","getXScale","availableWidth","startDate","endDate","dateRange","start","end","xScale","lodash_sortBy__WEBPACK_IMPORTED_MODULE_2___default","clamp","maxXRange","getScales","lodash_flatten__WEBPACK_IMPORTED_MODULE_4___default","yScale","getSelectedDatePos","firstSerie","findIndex","valueOf","xRange","sort","xPos","selectedDateXPos","selectedDateIdx","getEventMarker","half","handleWheel","preventDefault","parentBbox","currentTarget","getBoundingClientRect","mouseXPos","pageX","speed","deltaMode","zoomSpeed","leftPos","deltaY","rightPos","invert","handleZoomUpdate","updateZoom","handleMouseMove","updateTooltipPos","handleMouseEnter","mouseOver","handleMouseOut","updateSelectedDate","bisectX","right","previousPoint","nextPoint","xPos_1","renderHorizontalGrid","formatYTick","ticks","maxYTicksCount","formattedTicks","lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_5__","dx","dy","textAnchor","x1","x2","y1","y2","renderXAxisTicks","format","tickFormat","nextTick","renderLeak","leakPeriodDate","yRange","leakWidth","_app_theme__WEBPACK_IMPORTED_MODULE_10__","renderLines","lineGenerator","d3_shape__WEBPACK_IMPORTED_MODULE_9__","defined","basisCurve","curve","classnames__WEBPACK_IMPORTED_MODULE_6__","renderDots","serieIdx","pointNotDefined","hasPointBefore","hasPointAfter","cx","cy","r","_helpers_types__WEBPACK_IMPORTED_MODULE_11__","dots","renderAreas","areaGenerator","y0","renderSelectedDate","renderClipPath","renderMouseEventsOverlay","zoomEnabled","mouseEvents","onWheel","onMouseEnter","onMouseMove","onMouseOut","scales","selectedDatePos","lodash_throttle__WEBPACK_IMPORTED_MODULE_1___default","lodash_isEqual__WEBPACK_IMPORTED_MODULE_3___default","disableZoom","isZoomed","chart-zoomed","defaultProps","eventSize","baseSlice","isIterateeCall","toInteger","nativeCeil","ceil","nativeMax","guard","resIndex","getAllTimeMachineData","prev","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","getTimeMachineData","pageIndex","pageSize","DEFAULT_PADDING","Histogram","renderBar","alignTicks","bandwidth","renderValue","yValues","BAR_HEIGHT","yTooltips","renderTick","yTicks","historyTickClass","renderBars","bars","d3_scale_src","src","_","rangeRound","cutLanguageName","languages","tokens","language","lines","parseInt","sortBy_default","langKey","lang","getLanguageName","components_charts_Histogram"],"mappings":"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","file":"js/273.31fd6dbe.chunk.js","sourcesContent":["var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    identity = require('./identity');\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nmodule.exports = max;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ChartLegendIcon from '../icons-components/ChartLegendIcon';\n\ninterface Props {\n  style: string;\n  translatedName: string;\n  value: string;\n}\n\nexport default function PreviewGraphTooltipsContent({ style, translatedName, value }: Props) {\n  return (\n    <tr className=\"overview-analysis-graph-tooltip-line\">\n      <td className=\"thin\">\n        <ChartLegendIcon\n          className={'little-spacer-right line-chart-legend line-chart-legend-' + style}\n        />\n      </td>\n      <td className=\"overview-analysis-graph-tooltip-value text-right little-spacer-right thin\">\n        {value}\n      </td>\n      <td>\n        <div className=\"text-ellipsis overview-analysis-graph-tooltip-description\">\n          {translatedName}\n        </div>\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PreviewGraphTooltipsContent from './PreviewGraphTooltipsContent';\nimport DateFormatter from '../intl/DateFormatter';\nimport { Popup, PopupPlacement } from '../ui/popups';\nimport { Serie } from '../../apps/projectActivity/utils';\n\ninterface Props {\n  formatValue: (value: number | string) => string;\n  graph: string;\n  graphWidth: number;\n  selectedDate: Date;\n  series: Serie[];\n  tooltipIdx: number;\n  tooltipPos: number;\n}\n\nconst TOOLTIP_WIDTH = 160;\n\nexport default class PreviewGraphTooltips extends React.PureComponent<Props> {\n  render() {\n    const { tooltipIdx } = this.props;\n    const top = 16;\n    let left = this.props.tooltipPos;\n    let placement = PopupPlacement.RightTop;\n    if (left > this.props.graphWidth - TOOLTIP_WIDTH) {\n      left -= TOOLTIP_WIDTH;\n      placement = PopupPlacement.LeftTop;\n    }\n\n    return (\n      <Popup\n        className=\"overview-analysis-graph-popup disabled-pointer-events\"\n        placement={placement}\n        style={{ top, left, width: TOOLTIP_WIDTH }}>\n        <div className=\"overview-analysis-graph-tooltip\">\n          <div className=\"overview-analysis-graph-tooltip-title\">\n            <DateFormatter date={this.props.selectedDate} long={true} />\n          </div>\n          <table className=\"width-100\">\n            <tbody>\n              {this.props.series.map((serie, idx) => {\n                const point = serie.data[tooltipIdx];\n                if (!point || (!point.y && point.y !== 0)) {\n                  return null;\n                }\n                return (\n                  <PreviewGraphTooltipsContent\n                    key={serie.name}\n                    style={idx.toString()}\n                    translatedName={serie.translatedName}\n                    value={this.props.formatValue(point.y)}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Popup>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { minBy } from 'lodash';\nimport { AutoSizer } from 'react-virtualized/dist/commonjs/AutoSizer';\nimport PreviewGraphTooltips from './PreviewGraphTooltips';\nimport AdvancedTimeline from '../charts/AdvancedTimeline';\nimport {\n  DEFAULT_GRAPH,\n  getDisplayedHistoryMetrics,\n  generateSeries,\n  getSeriesMetricType,\n  hasHistoryDataValue,\n  PROJECT_ACTIVITY_GRAPH,\n  PROJECT_ACTIVITY_GRAPH_CUSTOM,\n  splitSeriesInGraphs,\n  Serie\n} from '../../apps/projectActivity/utils';\nimport { get } from '../../helpers/storage';\nimport { formatMeasure, getShortType } from '../../helpers/measures';\nimport { getBranchLikeQuery } from '../../helpers/branches';\nimport { withRouter, Router } from '../hoc/withRouter';\n\ninterface History {\n  [x: string]: Array<{ date: Date; value?: string }>;\n}\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  history?: History;\n  metrics: { [key: string]: T.Metric };\n  project: string;\n  renderWhenEmpty?: () => React.ReactNode;\n  router: Pick<Router, 'push'>;\n}\n\ninterface State {\n  customMetrics: string[];\n  graph: string;\n  selectedDate?: Date;\n  series: Serie[];\n  tooltipIdx?: number;\n  tooltipXPos?: number;\n}\n\nconst GRAPH_PADDING = [4, 0, 4, 0];\nconst MAX_GRAPH_NB = 1;\nconst MAX_SERIES_PER_GRAPH = 3;\n\nclass PreviewGraph extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const customGraphs = get(PROJECT_ACTIVITY_GRAPH_CUSTOM);\n    const graph = get(PROJECT_ACTIVITY_GRAPH) || 'issues';\n    const customMetrics = customGraphs ? customGraphs.split(',') : [];\n    const series = splitSeriesInGraphs(\n      this.getSeries(props.history, graph, customMetrics, props.metrics),\n      MAX_GRAPH_NB,\n      MAX_SERIES_PER_GRAPH\n    );\n    this.state = {\n      customMetrics,\n      graph,\n      series: series.length > 0 ? series[0] : []\n    };\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.history !== this.props.history || nextProps.metrics !== this.props.metrics) {\n      const customGraphs = get(PROJECT_ACTIVITY_GRAPH_CUSTOM);\n      const graph = get(PROJECT_ACTIVITY_GRAPH) || 'issues';\n      const customMetrics = customGraphs ? customGraphs.split(',') : [];\n      const series = splitSeriesInGraphs(\n        this.getSeries(nextProps.history, graph, customMetrics, nextProps.metrics),\n        MAX_GRAPH_NB,\n        MAX_SERIES_PER_GRAPH\n      );\n      this.setState({\n        customMetrics,\n        graph,\n        series: series.length > 0 ? series[0] : []\n      });\n    }\n  }\n\n  formatValue = (tick: number | string) => {\n    return formatMeasure(tick, getShortType(getSeriesMetricType(this.state.series)));\n  };\n\n  getDisplayedMetrics = (graph: string, customMetrics: string[]) => {\n    const metrics = getDisplayedHistoryMetrics(graph, customMetrics);\n    if (!metrics || metrics.length <= 0) {\n      return getDisplayedHistoryMetrics(DEFAULT_GRAPH, customMetrics);\n    }\n    return metrics;\n  };\n\n  getSeries = (\n    history: History | undefined,\n    graph: string,\n    customMetrics: string[],\n    metrics: { [x: string]: T.Metric }\n  ) => {\n    const myHistory = history;\n    if (!myHistory) {\n      return [];\n    }\n    const displayedMetrics = this.getDisplayedMetrics(graph, customMetrics);\n    const firstValid = minBy(\n      displayedMetrics.map(metric => myHistory[metric].find(p => p.value !== undefined)),\n      'date'\n    );\n    const measureHistory = displayedMetrics.map(metric => ({\n      metric,\n      history: firstValid\n        ? myHistory[metric].filter(p => p.date >= firstValid.date)\n        : myHistory[metric]\n    }));\n    return generateSeries(measureHistory, graph, metrics, displayedMetrics);\n  };\n\n  handleClick = () => {\n    this.props.router.push({\n      pathname: '/project/activity',\n      query: { id: this.props.project, ...getBranchLikeQuery(this.props.branchLike) }\n    });\n  };\n\n  updateTooltip = (selectedDate?: Date, tooltipXPos?: number, tooltipIdx?: number) =>\n    this.setState({ selectedDate, tooltipXPos, tooltipIdx });\n\n  renderTimeline() {\n    const { graph, selectedDate, series, tooltipIdx, tooltipXPos } = this.state;\n    return (\n      <AutoSizer disableHeight={true}>\n        {({ width }) => (\n          <div>\n            <AdvancedTimeline\n              height={80}\n              hideGrid={true}\n              hideXAxis={true}\n              metricType={getSeriesMetricType(series)}\n              padding={GRAPH_PADDING}\n              series={series}\n              showAreas={['coverage', 'duplications'].includes(graph)}\n              updateTooltip={this.updateTooltip}\n              width={width}\n            />\n            {selectedDate !== undefined &&\n              tooltipXPos !== undefined &&\n              tooltipIdx !== undefined && (\n                <PreviewGraphTooltips\n                  formatValue={this.formatValue}\n                  graph={graph}\n                  graphWidth={width}\n                  selectedDate={selectedDate}\n                  series={series}\n                  tooltipIdx={tooltipIdx}\n                  tooltipPos={tooltipXPos}\n                />\n              )}\n          </div>\n        )}\n      </AutoSizer>\n    );\n  }\n\n  render() {\n    const { series } = this.state;\n    if (!hasHistoryDataValue(series)) {\n      return this.props.renderWhenEmpty ? this.props.renderWhenEmpty() : null;\n    }\n\n    return (\n      <div\n        className=\"overview-analysis-graph big-spacer-bottom spacer-top\"\n        onClick={this.handleClick}\n        role=\"link\"\n        tabIndex={0}>\n        {this.renderTimeline()}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(PreviewGraph);\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2018 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.portfolio-measure-secondary-value {\\n  line-height: 24px;\\n  font-size: 18px;\\n  font-weight: 300;\\n}\\n\\n.portfolio-grid {\\n  position: relative;\\n  z-index: 10;\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center;\\n}\\n\\n.portfolio-grid > li {\\n  vertical-align: top;\\n  width: 50%;\\n  text-align: center;\\n}\\n\\n.portfolio-grid > li.text-middle {\\n  vertical-align: middle;\\n}\\n\\n.portfolio-freshness {\\n  line-height: 24px;\\n  margin-top: 12px;\\n  color: #777;\\n  font-size: 12px;\\n  white-space: nowrap;\\n}\\n\\n.portfolio-effort {\\n  margin-top: 12px;\\n  padding-top: 12px;\\n  border-top: 1px solid #e6e6e6;\\n}\\n\\n.portfolio-boxes {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: stretch;\\n  margin-bottom: 20px;\\n  padding: 15px 0;\\n  border: 1px solid #e6e6e6;\\n  background-color: #fff;\\n}\\n\\n.portfolio-box {\\n  position: relative;\\n  width: 25%;\\n  padding: 0 5px;\\n  border-radius: 3px;\\n  box-sizing: border-box;\\n  text-align: center;\\n}\\n\\n.portfolio-box-title {\\n  margin-bottom: 25px;\\n  font-size: 16px;\\n}\\n\\n.portfolio-box-title > .button-small > svg {\\n  margin-top: 0;\\n}\\n\\n.portfolio-box-rating,\\n.portfolio-box-rating .rating {\\n  display: block;\\n  width: 120px;\\n  height: 120px;\\n  line-height: 120px;\\n}\\n\\n.portfolio-box-rating {\\n  margin: 0 auto;\\n  border: none;\\n}\\n\\n.portfolio-box-rating .rating {\\n  border-radius: 120px;\\n  font-size: 60px;\\n  text-align: center;\\n}\\n\\n.portfolio-sub-components table.data > thead > tr > th {\\n  font-size: 13px;\\n  text-transform: none;\\n}\\n\\n.portfolio-sub-components-cell {\\n  width: 90px;\\n}\\n\\n.portfolio-meta-header {\\n  margin-bottom: 4px;\\n  color: #444;\\n}\\n\\n.portfolio-meta-card {\\n  min-width: 200px;\\n  box-sizing: border-box;\\n}\\n\\n.portfolio-meta-card + .portfolio-meta-card {\\n  margin-top: 16px;\\n  padding-top: 15px;\\n  border-top: 1px solid #e6e6e6;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport LanguageDistributionContainer from '../../../components/charts/LanguageDistributionContainer';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: { description?: string; key: string };\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function Summary({ component, measures }: Props) {\n  const { projects, ncloc } = measures;\n  const nclocDistribution = measures['ncloc_language_distribution'];\n\n  return (\n    <section className=\"big-spacer-bottom\" id=\"portfolio-summary\">\n      {component.description && <div className=\"big-spacer-bottom\">{component.description}</div>}\n\n      <ul className=\"portfolio-grid\">\n        <li>\n          <div className=\"portfolio-measure-secondary-value\">\n            {projects ? (\n              <Link\n                to={getComponentDrilldownUrl({ componentKey: component.key, metric: 'projects' })}>\n                <Measure metricKey=\"projects\" metricType=\"SHORT_INT\" value={projects} />\n              </Link>\n            ) : (\n              '0'\n            )}\n          </div>\n          <div className=\"spacer-top text-muted\">{translate('projects')}</div>\n        </li>\n        <li>\n          <div className=\"portfolio-measure-secondary-value\">\n            {ncloc ? (\n              <Link to={getComponentDrilldownUrl({ componentKey: component.key, metric: 'ncloc' })}>\n                <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={ncloc} />\n              </Link>\n            ) : (\n              '0'\n            )}\n          </div>\n          <div className=\"spacer-top text-muted\">{translate('metric.ncloc.name')}</div>\n        </li>\n      </ul>\n\n      {nclocDistribution && (\n        <div className=\"big-spacer-top\">\n          <LanguageDistributionContainer distribution={nclocDistribution} width={260} />\n        </div>\n      )}\n    </section>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AlertSuccessIcon from '../../../components/icons-components/AlertSuccessIcon';\nimport { ReportStatus, subscribe, unsubscribe } from '../../../api/report';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { Button } from '../../../components/ui/buttons';\nimport { isLoggedIn } from '../../../helpers/users';\n\ninterface Props {\n  component: string;\n  currentUser: T.CurrentUser;\n  status: ReportStatus;\n}\n\ninterface State {\n  loading: boolean;\n  subscribed?: boolean;\n}\n\nexport default class Subscription extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { subscribed: props.status.subscribed, loading: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.status.subscribed !== this.props.status.subscribed) {\n      this.setState({ subscribed: nextProps.status.subscribed });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  handleSubscription = (subscribed: boolean) => {\n    if (this.mounted) {\n      this.setState({ loading: false, subscribed });\n    }\n  };\n\n  handleSubscribe = () => {\n    this.setState({ loading: true });\n    subscribe(this.props.component)\n      .then(() => this.handleSubscription(true))\n      .catch(this.stopLoading);\n  };\n\n  handleUnsubscribe = () => {\n    this.setState({ loading: true });\n    unsubscribe(this.props.component)\n      .then(() => this.handleSubscription(false))\n      .catch(this.stopLoading);\n  };\n\n  getEffectiveFrequencyText = () => {\n    const effectiveFrequency =\n      this.props.status.componentFrequency || this.props.status.globalFrequency;\n    return translate('report.frequency', effectiveFrequency, 'effective');\n  };\n\n  renderLoading = () => this.state.loading && <i className=\"spacer-left spinner\" />;\n\n  renderWhenSubscribed = () => (\n    <div className=\"js-subscribed\">\n      <div className=\"spacer-bottom\">\n        <AlertSuccessIcon className=\"pull-left spacer-right\" />\n        <div className=\"overflow-hidden\">\n          {translateWithParameters('report.subscribed', this.getEffectiveFrequencyText())}\n        </div>\n      </div>\n      <Button onClick={this.handleUnsubscribe}>{translate('report.unsubscribe')}</Button>\n      {this.renderLoading()}\n    </div>\n  );\n\n  renderWhenNotSubscribed = () => (\n    <div className=\"js-not-subscribed\">\n      <p className=\"spacer-bottom\">\n        {translateWithParameters('report.unsubscribed', this.getEffectiveFrequencyText())}\n      </p>\n      <Button className=\"js-report-subscribe\" onClick={this.handleSubscribe}>\n        {translate('report.subscribe')}\n      </Button>\n      {this.renderLoading()}\n    </div>\n  );\n\n  render() {\n    const hasEmail = isLoggedIn(this.props.currentUser) && !!this.props.currentUser.email;\n    const { subscribed } = this.state;\n\n    let inner;\n    if (hasEmail) {\n      inner = subscribed ? this.renderWhenSubscribed() : this.renderWhenNotSubscribed();\n    } else {\n      inner = <p className=\"note js-no-email\">{translate('report.no_email_to_subscribe')}</p>;\n    }\n\n    return <div className=\"big-spacer-top js-report-subscription\">{inner}</div>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ReportStatus {\n  canDownload?: boolean;\n  canSubscribe: boolean;\n  componentFrequency?: string;\n  globalFrequency: string;\n  subscribed?: boolean;\n}\n\nexport function getReportStatus(component: string): Promise<ReportStatus> {\n  return getJSON('/api/governance_reports/status', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getReportUrl(component: string): string {\n  return (\n    (window as any).baseUrl +\n    '/api/governance_reports/download?componentKey=' +\n    encodeURIComponent(component)\n  );\n}\n\nexport function subscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/subscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function unsubscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/unsubscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport Subscription from './Subscription';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(Subscription);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SubscriptionContainer from './SubscriptionContainer';\nimport { getReportStatus, ReportStatus, getReportUrl } from '../../../api/report';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: { key: string; name: string };\n}\n\ninterface State {\n  loading: boolean;\n  status?: ReportStatus;\n}\n\nexport default class Report extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadStatus();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStatus() {\n    getReportStatus(this.props.component.key).then(\n      status => {\n        if (this.mounted) {\n          this.setState({ status, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  renderHeader = () => <h4>{translate('report.page')}</h4>;\n\n  render() {\n    const { component } = this.props;\n    const { status, loading } = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          {this.renderHeader()}\n          <i className=\"spinner\" />\n        </div>\n      );\n    }\n\n    if (!status) {\n      return null;\n    }\n\n    return (\n      <div>\n        {this.renderHeader()}\n\n        {!status.canDownload && (\n          <div className=\"note js-report-cant-download\">{translate('report.cant_download')}</div>\n        )}\n\n        {status.canDownload && (\n          <div className=\"js-report-can-download\">\n            {translate('report.can_download')}\n            <div className=\"spacer-top\">\n              <a\n                className=\"button js-report-download\"\n                download={component.name + ' - Executive Report.pdf'}\n                href={getReportUrl(component.key)}\n                target=\"_blank\">\n                {translate('report.print')}\n              </a>\n            </div>\n          </div>\n        )}\n\n        {status.canSubscribe && <SubscriptionContainer component={component.key} status={status} />}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { max } from 'lodash';\nimport { SubComponent } from '../types';\nimport Measure from '../../../components/measure/Measure';\nimport QualifierIcon from '../../../components/icons-components/QualifierIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { getProjectUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  subComponents: SubComponent[];\n  total: number;\n}\n\nexport default function WorstProjects({ component, subComponents, total }: Props) {\n  const count = subComponents.length;\n\n  if (!count) {\n    return null;\n  }\n\n  const maxLoc = max(\n    subComponents.map(component => Number(component.measures['ncloc'] || 0))\n  ) as number;\n\n  const projectsPageUrl = { pathname: '/code', query: { id: component } };\n\n  return (\n    <div className=\"panel panel-white portfolio-sub-components\" id=\"portfolio-sub-components\">\n      <table className=\"data zebra\">\n        <thead>\n          <tr>\n            <th>&nbsp;</th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Releasability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Reliability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Security')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Maintainability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric.ncloc.name')}\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {subComponents.map(component => (\n            <tr key={component.key}>\n              <td>\n                <Link\n                  className=\"link-with-icon\"\n                  to={getProjectUrl(component.refKey || component.key)}>\n                  <QualifierIcon qualifier={component.qualifier} /> {component.name}\n                </Link>\n              </td>\n              {component.qualifier === 'TRK'\n                ? renderCell(component.measures, 'alert_status', 'LEVEL')\n                : renderCell(component.measures, 'releasability_rating', 'RATING')}\n              {renderCell(component.measures, 'reliability_rating', 'RATING')}\n              {renderCell(component.measures, 'security_rating', 'RATING')}\n              {renderCell(component.measures, 'sqale_rating', 'RATING')}\n              {renderNcloc(component.measures, maxLoc)}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {total > count && (\n        <footer className=\"spacer-top note text-center\">\n          {translateWithParameters(\n            'x_of_y_shown',\n            formatMeasure(count, 'INT'),\n            formatMeasure(total, 'INT')\n          )}\n          <Link className=\"spacer-left\" to={projectsPageUrl}>\n            {translate('show_more')}\n          </Link>\n        </footer>\n      )}\n    </div>\n  );\n}\n\nfunction renderCell(measures: { [key: string]: string | undefined }, metric: string, type: string) {\n  return (\n    <td className=\"text-center\">\n      <Measure metricKey={metric} metricType={type} value={measures[metric]} />\n    </td>\n  );\n}\n\nfunction renderNcloc(measures: { [key: string]: string | undefined }, maxLoc: number) {\n  const ncloc = Number(measures['ncloc'] || 0);\n  const barWidth = maxLoc > 0 ? Math.max(1, Math.round((ncloc / maxLoc) * 50)) : 0;\n  return (\n    <td className=\"text-right\">\n      <span className=\"note\">\n        <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={measures['ncloc']} />\n      </span>\n      {maxLoc > 0 && (\n        <svg className=\"spacer-left\" height=\"16\" width=\"50\">\n          <rect className=\"bar-chart-bar\" height=\"10\" width={barWidth} x=\"0\" y=\"3\" />\n        </svg>\n      )}\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport Rating from '../../../components/ui/Rating';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  lastChange?: string;\n  rating?: string;\n}\n\nexport default function RatingFreshness({ lastChange, rating }: Props) {\n  if (!lastChange) {\n    return (\n      <div className=\"portfolio-freshness\">\n        {rating && (\n          <FormattedMessage\n            defaultMessage={translate('portfolio.has_always_been_x')}\n            id=\"portfolio.has_always_been_x\"\n            values={{ rating: <Rating small={true} value={rating} /> }}\n          />\n        )}\n      </div>\n    );\n  }\n\n  const data = JSON.parse(lastChange);\n\n  return (\n    <div className=\"portfolio-freshness\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.was_x_y')}\n        id=\"portfolio.was_x_y\"\n        values={{\n          rating: <Rating small={true} value={data.value} />,\n          date: <DateFromNow date={data.date} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport RatingFreshness from './RatingFreshness';\nimport Rating from '../../../components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\nimport Level from '../../../components/ui/Level';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function ReleasabilityBox({ component, measures }: Props) {\n  const rating = measures['releasability_rating'];\n  const lastReleasabilityChange = measures['last_change_on_releasability_rating'];\n  const effort = measures['releasability_effort'];\n\n  return (\n    <div className=\"portfolio-box portfolio-releasability\">\n      <h2 className=\"portfolio-box-title\">{translate('metric_domain.Releasability')}</h2>\n\n      {rating && (\n        <Link\n          className=\"portfolio-box-rating\"\n          to={getComponentDrilldownUrl({ componentKey: component, metric: 'alert_status' })}>\n          <Rating value={rating} />\n        </Link>\n      )}\n\n      <RatingFreshness lastChange={lastReleasabilityChange} rating={rating} />\n\n      {effort &&\n        Number(effort) > 0 && (\n          <div className=\"portfolio-effort\">\n            <Link\n              to={getComponentDrilldownUrl({ componentKey: component, metric: 'alert_status' })}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={effort}\n                />\n                {Number(effort) === 1 ? 'project' : 'projects'}\n              </span>\n            </Link>{' '}\n            <Level level=\"ERROR\" small={true} />\n          </div>\n        )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { FormattedMessage } from 'react-intl';\nimport Rating from '../../../components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  effort: { projects: number; rating: number };\n  metricKey: string;\n}\n\nexport default function Effort({ component, effort, metricKey }: Props) {\n  return (\n    <div className=\"portfolio-effort\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.x_in_y')}\n        id=\"portfolio.x_in_y\"\n        values={{\n          projects: (\n            <Link to={getComponentDrilldownUrl({ componentKey: component, metric: metricKey })}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={String(effort.projects)}\n                />\n                {translate('projects_')}\n              </span>\n            </Link>\n          ),\n          rating: <Rating small={true} value={effort.rating} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport BubblesIcon from '../../../components/icons-components/BubblesIcon';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n}\n\nexport default function MeasuresButtonLink({ component, metric }: Props) {\n  return (\n    <Link\n      className=\"button button-small spacer-left text-text-bottom\"\n      to={getComponentDrilldownUrl({ componentKey: component, metric })}>\n      <BubblesIcon size={14} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HistoryIcon from '../../../components/icons-components/HistoryIcon';\nimport { getMeasureHistoryUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n}\n\nexport default function HistoryButtonLink({ component, metric }: Props) {\n  return (\n    <Link\n      className=\"button button-small spacer-left text-text-bottom\"\n      to={getMeasureHistoryUrl(component, metric)}>\n      <HistoryIcon size={14} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Rating from '../../../components/ui/Rating';\nimport { getMeasureTreemapUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n  value: string;\n}\n\nexport default function MainRating({ component, metric, value }: Props) {\n  return (\n    <Link className=\"portfolio-box-rating\" to={getMeasureTreemapUrl(component, metric)}>\n      <Rating value={value} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport MainRating from './MainRating';\nimport RatingFreshness from './RatingFreshness';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function ReliabilityBox({ component, measures }: Props) {\n  const rating = measures['reliability_rating'];\n  const lastReliabilityChange = measures['last_change_on_reliability_rating'];\n  const rawEffort = measures['reliability_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-reliability\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Reliability')}\n        <MeasuresButtonLink component={component} metric=\"Reliability\" />\n        <HistoryButtonLink component={component} metric=\"reliability_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric=\"reliability_rating\" value={rating} />}\n\n      <RatingFreshness lastChange={lastReliabilityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey=\"reliability_rating\" />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport RatingFreshness from './RatingFreshness';\nimport MainRating from './MainRating';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function SecurityBox({ component, measures }: Props) {\n  const rating = measures['security_rating'];\n  const lastSecurityChange = measures['last_change_on_security_rating'];\n  const rawEffort = measures['security_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-security\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Security')}\n        <MeasuresButtonLink component={component} metric=\"Security\" />\n        <HistoryButtonLink component={component} metric=\"security_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric=\"security_rating\" value={rating} />}\n\n      <RatingFreshness lastChange={lastSecurityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey=\"security_rating\" />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MainRating from './MainRating';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport RatingFreshness from './RatingFreshness';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function MaintainabilityBox({ component, measures }: Props) {\n  const rating = measures['sqale_rating'];\n  const lastMaintainabilityChange = measures['last_change_on_maintainability_rating'];\n  const rawEffort = measures['maintainability_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-maintainability\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Maintainability')}\n        <MeasuresButtonLink component={component} metric=\"Maintainability\" />\n        <HistoryButtonLink component={component} metric=\"sqale_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric={'sqale_rating'} value={rating} />}\n\n      <RatingFreshness lastChange={lastMaintainabilityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey={'sqale_rating'} />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport {\n  getDisplayedHistoryMetrics,\n  DEFAULT_GRAPH,\n  PROJECT_ACTIVITY_GRAPH,\n  PROJECT_ACTIVITY_GRAPH_CUSTOM\n} from '../../projectActivity/utils';\nimport PreviewGraph from '../../../components/preview-graph/PreviewGraph';\nimport { getAllTimeMachineData } from '../../../api/time-machine';\nimport { parseDate } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\nimport { get } from '../../../helpers/storage';\n\ninterface Props {\n  component: string;\n  metrics: { [key: string]: T.Metric };\n}\n\ninterface State {\n  history?: {\n    [metric: string]: Array<{ date: Date; value?: string }>;\n  };\n  loading: boolean;\n}\n\nexport default class Activity extends React.PureComponent<Props> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHistory();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchHistory();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHistory = () => {\n    const { component } = this.props;\n\n    const customGraphs = get(PROJECT_ACTIVITY_GRAPH_CUSTOM);\n    let graphMetrics = getDisplayedHistoryMetrics(\n      get(PROJECT_ACTIVITY_GRAPH) || 'issues',\n      customGraphs ? customGraphs.split(',') : []\n    );\n    if (!graphMetrics || graphMetrics.length <= 0) {\n      graphMetrics = getDisplayedHistoryMetrics(DEFAULT_GRAPH, []);\n    }\n\n    this.setState({ loading: true });\n    return getAllTimeMachineData({ component, metrics: graphMetrics.join() }).then(\n      timeMachine => {\n        if (this.mounted) {\n          const history: { [metric: string]: Array<{ date: Date; value?: string }> } = {};\n          timeMachine.measures.forEach(measure => {\n            const measureHistory = measure.history.map(analysis => ({\n              date: parseDate(analysis.date),\n              value: analysis.value\n            }));\n            history[measure.metric] = measureHistory;\n          });\n          this.setState({ history, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderWhenEmpty = () => <div className=\"note\">{translate('component_measures.no_history')}</div>;\n\n  render() {\n    return (\n      <div className=\"big-spacer-bottom\">\n        <h4>{translate('project_activity.page')}</h4>\n\n        {this.state.loading ? (\n          <i className=\"spinner\" />\n        ) : (\n          this.state.history !== undefined && (\n            <PreviewGraph\n              history={this.state.history}\n              metrics={this.props.metrics}\n              project={this.props.component}\n              renderWhenEmpty={this.renderWhenEmpty}\n            />\n          )\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getNextRating(rating: number): number | undefined {\n  return rating > 1 ? rating - 1 : undefined;\n}\n\nfunction getWorstSeverity(data: string): { severity: string; count: number } | undefined {\n  const SEVERITY_ORDER = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\n  const severities: { [key: string]: number } = {};\n  data.split(';').forEach(equality => {\n    const [key, count] = equality.split('=');\n    severities[key] = Number(count);\n  });\n\n  for (let i = 0; i < SEVERITY_ORDER.length; i++) {\n    const count = severities[SEVERITY_ORDER[i]];\n    if (count > 0) {\n      return { severity: SEVERITY_ORDER[i], count };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getEffortToNextRating(\n  measures: Array<{ metric: { key: string }; value: string }>,\n  metricKey: string\n) {\n  const measure = measures.find(measure => measure.metric.key === metricKey);\n  if (!measure) {\n    return undefined;\n  }\n  return getWorstSeverity(measure.value);\n}\n\nexport const PORTFOLIO_METRICS = [\n  'projects',\n  'ncloc',\n  'ncloc_language_distribution',\n\n  'releasability_rating',\n  'releasability_effort',\n\n  'sqale_rating',\n  'maintainability_rating_effort',\n\n  'reliability_rating',\n  'reliability_rating_effort',\n\n  'security_rating',\n  'security_rating_effort',\n\n  'last_change_on_releasability_rating',\n  'last_change_on_maintainability_rating',\n  'last_change_on_security_rating',\n  'last_change_on_reliability_rating'\n];\n\nexport const SUB_COMPONENTS_METRICS = [\n  'ncloc',\n  'releasability_rating',\n  'security_rating',\n  'reliability_rating',\n  'sqale_rating',\n  'alert_status'\n];\n\nexport function convertMeasures(measures: Array<{ metric: string; value?: string }>) {\n  const result: { [key: string]: string | undefined } = {};\n  measures.forEach(measure => {\n    result[measure.metric] = measure.value;\n  });\n  return result;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Summary from './Summary';\nimport Report from './Report';\nimport WorstProjects from './WorstProjects';\nimport ReleasabilityBox from './ReleasabilityBox';\nimport ReliabilityBox from './ReliabilityBox';\nimport SecurityBox from './SecurityBox';\nimport MaintainabilityBox from './MaintainabilityBox';\nimport Activity from './Activity';\nimport { SubComponent } from '../types';\nimport { PORTFOLIO_METRICS, SUB_COMPONENTS_METRICS, convertMeasures } from '../utils';\nimport { getMeasures } from '../../../api/measures';\nimport { getChildren } from '../../../api/components';\nimport { translate } from '../../../helpers/l10n';\nimport { fetchMetrics } from '../../../store/rootActions';\nimport { getMetrics, Store } from '../../../store/rootReducer';\nimport '../styles.css';\nimport PrivacyBadgeContainer from '../../../components/common/PrivacyBadgeContainer';\n\ninterface OwnProps {\n  component: T.Component;\n}\n\ninterface StateToProps {\n  metrics: { [key: string]: T.Metric };\n}\n\ninterface DispatchToProps {\n  fetchMetrics: () => void;\n}\n\ntype Props = StateToProps & DispatchToProps & OwnProps;\n\ninterface State {\n  loading: boolean;\n  measures?: { [key: string]: string | undefined };\n  subComponents?: SubComponent[];\n  totalSubComponents?: number;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchMetrics();\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData() {\n    this.setState({ loading: true });\n    Promise.all([\n      getMeasures({ component: this.props.component.key, metricKeys: PORTFOLIO_METRICS.join() }),\n      getChildren(this.props.component.key, SUB_COMPONENTS_METRICS, { ps: 20, s: 'qualifier' })\n    ]).then(\n      ([measures, subComponents]) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            measures: convertMeasures(measures),\n            subComponents: subComponents.components.map((component: any) => ({\n              ...component,\n              measures: convertMeasures(component.measures)\n            })),\n            totalSubComponents: subComponents.paging.total\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  isEmpty = () => this.state.measures === undefined || this.state.measures['ncloc'] === undefined;\n\n  isNotComputed = () =>\n    this.state.measures && this.state.measures['reliability_rating'] === undefined;\n\n  renderSpinner() {\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"text-center\">\n          <i className=\"spinner spinner-margin\" />\n        </div>\n      </div>\n    );\n  }\n\n  renderEmpty() {\n    return (\n      <div className=\"empty-search\">\n        <h3>\n          {!this.state.measures || !this.state.measures['projects']\n            ? translate('portfolio.empty')\n            : translate('portfolio.no_lines_of_code')}\n        </h3>\n      </div>\n    );\n  }\n\n  renderWhenNotComputed() {\n    return (\n      <div className=\"empty-search\">\n        <h3>{translate('portfolio.not_computed')}</h3>\n      </div>\n    );\n  }\n\n  renderMain() {\n    const { component } = this.props;\n    const { measures, subComponents, totalSubComponents } = this.state;\n\n    if (this.isEmpty()) {\n      return this.renderEmpty();\n    }\n\n    if (this.isNotComputed()) {\n      return this.renderWhenNotComputed();\n    }\n\n    return (\n      <div>\n        <div className=\"portfolio-boxes\">\n          <ReleasabilityBox component={component.key} measures={measures!} />\n          <ReliabilityBox component={component.key} measures={measures!} />\n          <SecurityBox component={component.key} measures={measures!} />\n          <MaintainabilityBox component={component.key} measures={measures!} />\n        </div>\n\n        {subComponents !== undefined &&\n          totalSubComponents !== undefined && (\n            <WorstProjects\n              component={component.key}\n              subComponents={subComponents}\n              total={totalSubComponents}\n            />\n          )}\n      </div>\n    );\n  }\n\n  render() {\n    const { component } = this.props;\n    const { loading, measures } = this.state;\n\n    if (loading) {\n      return this.renderSpinner();\n    }\n\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"page-with-sidebar\">\n          <div className=\"page-main\">{this.renderMain()}</div>\n\n          <aside className=\"page-sidebar-fixed\">\n            <div className=\"portfolio-meta-card\">\n              <h4 className=\"portfolio-meta-header\">\n                {translate('overview.about_this_portfolio')}\n                {component.visibility && (\n                  <PrivacyBadgeContainer\n                    className=\"spacer-left pull-right\"\n                    organization={component.organization}\n                    qualifier={component.qualifier}\n                    tooltipProps={{ projectKey: component.key }}\n                    visibility={component.visibility}\n                  />\n                )}\n              </h4>\n              <Summary component={component} measures={measures || {}} />\n            </div>\n\n            <div className=\"portfolio-meta-card\">\n              <Activity component={component.key} metrics={this.props.metrics} />\n            </div>\n\n            <div className=\"portfolio-meta-card\">\n              <Report component={component} />\n            </div>\n          </aside>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps: DispatchToProps = { fetchMetrics };\n\nconst mapStateToProps = (state: Store): StateToProps => ({\n  metrics: getMetrics(state)\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip, { Placement } from './Tooltip';\nimport HelpIcon from '../icons-components/HelpIcon';\nimport * as theme from '../../app/theme';\nimport './HelpTooltip.css';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  onShow?: () => void;\n  overlay: React.ReactNode;\n  placement?: Placement;\n  tagName?: string;\n}\n\nexport default function HelpTooltip(props: Props) {\n  const { children = <HelpIcon fill={theme.gray71} size={12} />, tagName = 'div' } = props;\n\n  return React.createElement(\n    tagName,\n    { className: classNames('help-tooltip', props.className) },\n    <Tooltip\n      mouseLeaveDelay={0.25}\n      onShow={props.onShow}\n      overlay={props.overlay}\n      placement={props.placement}>\n      <span className=\"display-inline-flex-center\">{children}</span>\n    </Tooltip>\n  );\n}\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from '../controls/HelpTooltip';\nimport { lazyLoad } from '../lazyLoad';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: { [k: string]: string };\n}\n\ninterface State {\n  content?: string;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  state: State = { open: false };\n\n  componentDidMount() {\n    this.props.doc.then(\n      ({ default: content }) => {\n        this.setState({ content });\n      },\n      () => {}\n    );\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  close = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={this.state.content}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2018 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.help-tooltip {\\n  display: inline-flex;\\n  align-items: center;\\n  vertical-align: middle;\\n}\\n\\n.help-toolip-link {\\n  display: block;\\n  width: 12px;\\n  height: 12px;\\n  border: none;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\nconst qualifierIcons: { [x: string]: (props: IconProps) => React.ReactElement<any> } = {\n  app: ApplicationIcon,\n  brc: SubProjectIcon,\n  dev: DeveloperIcon,\n  dir: DirectoryIcon,\n  fil: FileIcon,\n  svw: SubPortfolioIcon,\n  trk: ProjectIcon,\n  uts: UnitTestIcon,\n  vw: PortfolioIcon,\n\n  // deprecated:\n  cla: UnitTestIcon,\n  dev_prj: ProjectIcon,\n  lib: LibraryIcon,\n  pac: DirectoryIcon\n};\n\ninterface QualifierIconProps {\n  className?: string;\n  fill?: string;\n  qualifier: string | null | undefined;\n}\n\nexport default function QualifierIcon(props: QualifierIconProps) {\n  if (!props.qualifier) {\n    return null;\n  }\n\n  const qualifier = props.qualifier.toLowerCase();\n  const FoundIcon = qualifierIcons[qualifier];\n  return FoundIcon ? <FoundIcon className={props.className} fill={props.fill} /> : null;\n}\n\nfunction ApplicationIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M3.014 10.986a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm-5.004-.021c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zm-4.98 1.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM2.984 6a2 2 0 1 1-.001 4.001A2 2 0 0 1 2.984 6zm9.984 0a2 2 0 1 1-.001 4.001A2 2 0 0 1 12.968 6zm-5.004-.021c1.103 0 2 .897 2 2a2 2 0 1 1-2-2zM2.984 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM3 1.025a2 2 0 1 1-.001 4.001A2 2 0 0 1 3 1.025zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zM7.98 1.004c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zM3 2.025a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.98 2.004a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction DeveloperIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M7.974 8.02a3.5 3.5 0 0 1-2.482-1.017 3.428 3.428 0 0 1-1.028-2.455c0-.927.365-1.8 1.028-2.455a3.505 3.505 0 0 1 2.482-1.017 3.5 3.5 0 0 1 2.482 1.017 3.434 3.434 0 0 1 1.027 2.455c0 .928-.365 1.8-1.027 2.455A3.504 3.504 0 0 1 7.974 8.02zm0-5.778c-1.286 0-2.332 1.034-2.332 2.306s1.046 2.307 2.332 2.307c1.285 0 2.332-1.035 2.332-2.307S9.258 2.242 7.974 2.242zm3.534 6.418c.127.016.243.045.348.086.17.066.302.146.406.246.132.124.253.282.36.47.126.218.226.442.3.668.08.253.15.535.206.838.056.313.095.604.113.867.02.28.03.57.03.862 0 .532-.174.758-.306.882-.142.132-.397.31-.973.31H3.948c-.233 0-.437-.03-.606-.09-.14-.05-.26-.123-.366-.222-.13-.123-.306-.35-.306-.88 0-.294.01-.584.03-.863.018-.263.056-.554.112-.867a6.5 6.5 0 0 1 .207-.838c.073-.226.173-.45.298-.667.108-.19.23-.347.36-.47.106-.1.238-.18.407-.247.105-.04.22-.07.348-.086.202.13.432.277.683.435.342.217.756.4 1.265.564.523.166 1.06.25 1.59.25a5.25 5.25 0 0 0 1.592-.25c.51-.164.923-.348 1.266-.565.25-.158.48-.304.682-.435l-.002.002zm-.244-1.18c-.055 0-.184.066-.387.196-.202.13-.43.276-.685.437-.255.16-.586.307-.994.437-.408.13-.818.196-1.23.196-.41 0-.82-.065-1.228-.196a4.303 4.303 0 0 1-.993-.437c-.255-.16-.484-.306-.686-.437-.202-.13-.33-.196-.386-.196-.374 0-.716.06-1.026.183-.31.12-.572.283-.787.487a3.28 3.28 0 0 0-.57.737 4.662 4.662 0 0 0-.395.888c-.098.303-.18.633-.244.988a9.652 9.652 0 0 0-.128.992c-.02.306-.032.62-.032.942 0 .73.224 1.304.672 1.726.448.42 1.043.632 1.785.632h8.044c.743 0 1.34-.21 1.787-.633.447-.42.67-.996.67-1.725 0-.32-.01-.635-.03-.942a9.159 9.159 0 0 0-.374-1.98c-.098-.304-.23-.6-.395-.888a3.23 3.23 0 0 0-.57-.737 2.404 2.404 0 0 0-.788-.487 2.779 2.779 0 0 0-1.026-.183h-.004z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction DirectoryIcon({ className, fill = theme.orange, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 12.286V5.703a.673.673 0 0 0-.195-.5.644.644 0 0 0-.49-.203H6.704a.686.686 0 0 1-.5-.214.707.707 0 0 1-.203-.51v-.57c0-.2-.07-.363-.207-.502A.679.679 0 0 0 5.29 3H2.707a.672.672 0 0 0-.5.204.683.683 0 0 0-.206.5v8.582c0 .2.07.367.206.506.137.14.304.208.5.208h10.61a.66.66 0 0 0 .49-.208.685.685 0 0 0 .194-.506H14zm1-6.598v6.65c0 .458-.152.83-.475 1.16-.324.326-.7.502-1.15.502H2.647c-.452 0-.84-.175-1.162-.503a1.572 1.572 0 0 1-.486-1.158V3.654a1.6 1.6 0 0 1 .486-1.17A1.578 1.578 0 0 1 2.648 2h2.7c.45 0 .84.157 1.164.485.324.328.488.714.488 1.17V4h6.373c.452 0 .83.174 1.152.5.323.33.475.73.475 1.187v.001z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction FileIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 15H2V1l7.997.02c1 .034 1.759.758 2.428 1.42.667.663 1.561 1.605 1.574 2.555H14V15zM9 2H3v12h10V6H9V2zm3 10H4v-1h8v1zm0-2H4V9h8v1zm-1.988-5h3.008c-.012-.674-.714-1.443-1.204-1.937-.488-.495-1.039-1.058-1.816-1.055v2.96l.012.032z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction LibraryIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M1 13h4V3H1v10zm3-1H2v-2h2v2zM2 4h2v4H2V4zm4 9h4V3H6v10zm3-1H7v-2h2v2zM7 4h2v4H7V4zm4 9h4V3h-4v10zm3-1h-2v-2h2v2zm-2-8h2v4h-2V4z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction PortfolioIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.97 14.97H1.016V1.015H14.97V14.97zm-1-12.955H2.015V13.97H13.97V2.015zm-.973 10.982H9V9h3.997v3.997zM7 12.996H3.004V9H7v3.996zM11.997 10H10v1.997h1.997V10zM6 10H4.004v1.996H6V10zm1-3H3.006V3.006H7V7zm5.985 0H9V3.015h3.985V7zM6 4.006H4.006V6H6V4.006zm5.985.009H10V6h1.985V4.015z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction ProjectIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.985 13.988L1 14.005 1.02 5h13.966v8.988h-.001zM1.998 5.995l.006 7.02L14.022 13 14 6.004l-12.002-.01v.001zM3 4.5V4h9.996l.004.5h1l-.005-1.497-11.98.003L2 4.5h1zm1-2v-.504h8.002L12 2.5h1l-.004-1.495H3.003L3 2.5h1z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction SubPortfolioIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 7h2v9H7v-2H0V0h14v7zM8 8v7h7V8H8zm3 6H9v-2h2v2zm3 0h-2v-2h2v2zm-1-7V1H1v12h6V7h6zm-7 5H2V8h4v4zm5-1H9V9h2v2zm3 0h-2V9h2v2zM5 9H3v2h2V9zm1-3H2V2h4v4zm6 0H8V2h4v4zM5 3H3v2h2V3zm6 0H9v2h2V3z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction SubProjectIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 9V8h6v1h1v1h1v6H6v-6h1V9h1zm7 2H7v4h8v-4zm-1-7v3h-1V5H1v7h4v1H0V4h14zm-1-2v1.5h-1V3H2v.5H1V2h12zm-1-2v1.5h-1V1H3v.5H2V0h10z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction UnitTestIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 15H2V1l7.997.02c1.013-.03 1.57.893 2.239 1.555.667.663 1.75 1.47 1.763 2.42H14V15zM9 2H3v12h10V6H9V2zM7 8l-3 2.5L7 13V8zm1 5l3-2.5L8 8v5zm2.012-8h3.008c-.012-.674-.78-1.258-1.27-1.752-.488-.495-.973-1.243-1.75-1.24v2.96l.012.032z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Rating.css';\n\ninterface Props {\n  className?: string;\n  muted?: boolean;\n  small?: boolean;\n  value: string | number | undefined;\n}\n\nexport default function Rating({ className, muted = false, small = false, value }: Props) {\n  if (value === undefined) {\n    return <span>{'–'}</span>;\n  }\n  const formatted = formatMeasure(value, 'RATING');\n  return (\n    <span\n      className={classNames(\n        'rating',\n        'rating-' + formatted,\n        { 'rating-small': small, 'rating-muted': muted },\n        className\n      )}>\n      {formatted}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\ninterface Props {\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: Props) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n  return <span className={className}>{formatted}</span>;\n}\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2018 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.level {\\n  display: inline-block;\\n  width: auto;\\n  min-width: 80px;\\n  padding-left: 9px;\\n  padding-right: 9px;\\n  height: 24px;\\n  line-height: 24px;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n  color: #fff;\\n  letter-spacing: 0.02em;\\n  font-size: 13px;\\n  font-weight: 400;\\n  text-align: center;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35);\\n}\\n\\n.level-small {\\n  width: auto;\\n  min-width: 64px;\\n  padding-left: 9px;\\n  padding-right: 9px;\\n  margin-top: -1px;\\n  margin-bottom: -1px;\\n  height: 20px;\\n  line-height: 20px;\\n  font-size: 12px;\\n}\\n\\n.level-muted {\\n  background-color: #bdbdbd !important;\\n}\\n\\na > .level {\\n  margin-bottom: -1px;\\n  border-bottom: 1px solid;\\n  transition: all 0.2s ease;\\n}\\n\\na > .level:hover {\\n  opacity: 0.8;\\n}\\n\\n.level-OK {\\n  background-color: #00aa00;\\n}\\n\\n.level-WARN {\\n  background-color: #ed7d20;\\n}\\n\\n.level-ERROR {\\n  background-color: #d4333f;\\n}\\n\\n.level-NONE {\\n  background-color: #b4b4b4;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2018 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.rating {\\n  display: inline-block;\\n  width: 24px;\\n  height: 24px;\\n  line-height: 24px;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n  color: #fff;\\n  font-size: 16px;\\n  font-weight: 400;\\n  text-align: center;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35);\\n}\\n\\n.rating-muted {\\n  background-color: #bdbdbd !important;\\n  color: #fff !important;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35) !important;\\n}\\n\\na > .rating {\\n  margin-bottom: -1px;\\n  border-bottom: 1px solid;\\n  transition: all 0.2s ease;\\n}\\n\\na > .rating:hover {\\n  opacity: 0.8;\\n}\\n\\n.rating-A {\\n  line-height: 23px;\\n  background-color: #00aa00;\\n}\\n\\na > .rating-A {\\n  border-bottom-color: #00aa00;\\n}\\n\\n.rating-B {\\n  background-color: #b0d513;\\n}\\n\\na .rating-B {\\n  border-bottom-color: #b0d513;\\n}\\n\\n.rating-C {\\n  background-color: #eabe06;\\n}\\n\\na .rating-C {\\n  border-bottom-color: #eabe06;\\n}\\n\\n.rating-D {\\n  background-color: #ed7d20;\\n}\\n\\na .rating-D {\\n  border-bottom-color: #ed7d20;\\n}\\n\\n.rating-E {\\n  background-color: #e00;\\n}\\n\\na .rating-E {\\n  border-bottom-color: #e00;\\n}\\n\\n.rating-small {\\n  width: 18px;\\n  height: 18px;\\n  line-height: 18px;\\n  margin-top: -1px;\\n  margin-bottom: -1px;\\n  font-size: 12px;\\n}\\n\", \"\"]);\n\n// exports\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from './l10n';\nimport { parseDate } from './dates';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter;\n  if (period.mode === 'previous_version' && !parameter) {\n    return translate('overview.period.previous_version_only_date');\n  }\n\n  if (period.mode === 'date' && parameter) {\n    parameter = dateFormatter(parameter);\n  }\n\n  return translateWithParameters(`overview.period.${period.mode}`, parameter || '');\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getRatingTooltip } from './utils';\nimport Rating from '../ui/Rating';\nimport Level from '../ui/Level';\nimport Tooltip from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span>{'–'}</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = ['sqale_rating', 'reliability_rating', 'security_rating'];\n\nexport function enhanceMeasure(\n  measure: T.Measure,\n  metrics: { [key: string]: T.Metric }\n): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { chunk, flatMap, groupBy, isEqual, sortBy } from 'lodash';\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsDate,\n  parseAsString,\n  serializeStringArray,\n  serializeDate,\n  serializeString,\n  RawQuery\n} from '../../helpers/query';\nimport { parseDate, startOfDay } from '../../helpers/dates';\nimport { getLocalizedMetricName, translate } from '../../helpers/l10n';\n\nexport type ParsedAnalysis = T.Omit<T.Analysis, 'date'> & { date: Date };\n\nexport interface Query {\n  category: string;\n  customMetrics: string[];\n  from?: Date;\n  graph: string;\n  project: string;\n  selectedDate?: Date;\n  to?: Date;\n}\n\nexport interface Point {\n  x: Date;\n  y: number | string | undefined;\n}\n\nexport interface Serie {\n  data: Point[];\n  name: string;\n  translatedName: string;\n  type: string;\n}\n\nexport interface HistoryItem {\n  date: Date;\n  value?: string;\n}\n\nexport interface MeasureHistory {\n  metric: string;\n  history: HistoryItem[];\n}\n\nexport const EVENT_TYPES = ['VERSION', 'QUALITY_GATE', 'QUALITY_PROFILE', 'OTHER'];\nexport const APPLICATION_EVENT_TYPES = ['QUALITY_GATE', 'DEFINITION_CHANGE', 'OTHER'];\nexport const DEFAULT_GRAPH = 'issues';\nexport const GRAPH_TYPES = ['issues', 'coverage', 'duplications', 'custom'];\nexport const GRAPHS_METRICS_DISPLAYED: { [x: string]: string[] } = {\n  issues: ['bugs', 'code_smells', 'vulnerabilities'],\n  coverage: ['lines_to_cover', 'uncovered_lines'],\n  duplications: ['ncloc', 'duplicated_lines']\n};\nexport const GRAPHS_METRICS: { [x: string]: string[] } = {\n  issues: GRAPHS_METRICS_DISPLAYED['issues'].concat([\n    'reliability_rating',\n    'security_rating',\n    'sqale_rating'\n  ]),\n  coverage: GRAPHS_METRICS_DISPLAYED['coverage'].concat(['coverage']),\n  duplications: GRAPHS_METRICS_DISPLAYED['duplications'].concat(['duplicated_lines_density'])\n};\n\nexport const PROJECT_ACTIVITY_GRAPH = 'sonarqube.project_activity.graph';\nexport const PROJECT_ACTIVITY_GRAPH_CUSTOM = 'sonarqube.project_activity.graph.custom';\n\nexport function datesQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.from, nextQuery.from) || !isEqual(prevQuery.to, nextQuery.to);\n}\n\nexport function activityQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return prevQuery.category !== nextQuery.category || datesQueryChanged(prevQuery, nextQuery);\n}\n\nexport function customMetricsChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.customMetrics, nextQuery.customMetrics);\n}\n\nexport function hasDataValues(serie: Serie) {\n  return serie.data.some(point => Boolean(point.y || point.y === 0));\n}\n\nexport function hasHistoryData(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1);\n}\n\nexport function hasHistoryDataValue(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1 && hasDataValues(serie));\n}\n\nexport function historyQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return prevQuery.graph !== nextQuery.graph;\n}\n\nexport function isCustomGraph(graph: string) {\n  return graph === 'custom';\n}\n\nexport function selectedDateQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.selectedDate, nextQuery.selectedDate);\n}\n\nexport function generateCoveredLinesMetric(\n  uncoveredLines: MeasureHistory,\n  measuresHistory: MeasureHistory[]\n) {\n  const linesToCover = measuresHistory.find(measure => measure.metric === 'lines_to_cover');\n  return {\n    data: linesToCover\n      ? uncoveredLines.history.map((analysis, idx) => ({\n          x: analysis.date,\n          y: Number(linesToCover.history[idx].value) - Number(analysis.value)\n        }))\n      : [],\n    name: 'covered_lines',\n    translatedName: translate('project_activity.custom_metric.covered_lines'),\n    type: 'INT'\n  };\n}\n\nfunction findMetric(key: string, metrics: T.Metric[] | { [key: string]: T.Metric }) {\n  if (Array.isArray(metrics)) {\n    return metrics.find(metric => metric.key === key);\n  }\n  return metrics[key];\n}\n\nexport function generateSeries(\n  measuresHistory: MeasureHistory[],\n  graph: string,\n  metrics: T.Metric[] | { [key: string]: T.Metric },\n  displayedMetrics: string[]\n): Serie[] {\n  if (displayedMetrics.length <= 0 || typeof measuresHistory === 'undefined') {\n    return [];\n  }\n  return sortBy(\n    measuresHistory\n      .filter(measure => displayedMetrics.indexOf(measure.metric) >= 0)\n      .map(measure => {\n        if (measure.metric === 'uncovered_lines' && !isCustomGraph(graph)) {\n          return generateCoveredLinesMetric(measure, measuresHistory);\n        }\n        const metric = findMetric(measure.metric, metrics);\n        return {\n          data: measure.history.map(analysis => ({\n            x: analysis.date,\n            y: metric && metric.type === 'LEVEL' ? analysis.value : Number(analysis.value)\n          })),\n          name: measure.metric,\n          translatedName: metric ? getLocalizedMetricName(metric) : measure.metric,\n          type: metric ? metric.type : 'INT'\n        };\n      }),\n    serie =>\n      displayedMetrics.indexOf(serie.name === 'covered_lines' ? 'uncovered_lines' : serie.name)\n  );\n}\n\nexport function splitSeriesInGraphs(series: Serie[], maxGraph: number, maxSeries: number) {\n  return flatMap(groupBy(series, serie => serie.type), type => chunk(type, maxSeries)).slice(\n    0,\n    maxGraph\n  );\n}\n\nexport function getSeriesMetricType(series: Serie[]) {\n  return series.length > 0 ? series[0].type : 'INT';\n}\n\ninterface AnalysesByDay {\n  byDay: { [x: string]: ParsedAnalysis[] };\n  version: string | null;\n  key: string | null;\n}\n\nexport function getAnalysesByVersionByDay(analyses: ParsedAnalysis[], query: Query) {\n  return analyses.reduce<AnalysesByDay[]>((acc, analysis) => {\n    let currentVersion = acc[acc.length - 1];\n    const versionEvent = analysis.events.find(event => event.category === 'VERSION');\n    if (versionEvent) {\n      const newVersion = { version: versionEvent.name, key: versionEvent.key, byDay: {} };\n      if (!currentVersion || Object.keys(currentVersion.byDay).length > 0) {\n        acc.push(newVersion);\n      } else {\n        acc[acc.length - 1] = newVersion;\n      }\n      currentVersion = newVersion;\n    } else if (!currentVersion) {\n      // APPs don't have version events, so let's create a fake one\n      currentVersion = { version: null, key: null, byDay: {} };\n      acc.push(currentVersion);\n    }\n\n    const day = startOfDay(parseDate(analysis.date))\n      .getTime()\n      .toString();\n\n    let matchFilters = true;\n    if (query.category || query.from || query.to) {\n      const isAfterFrom = !query.from || analysis.date >= query.from;\n      const isBeforeTo = !query.to || analysis.date <= query.to;\n      const hasSelectedCategoryEvents =\n        !query.category || analysis.events.find(event => event.category === query.category) != null;\n      matchFilters = isAfterFrom && isBeforeTo && hasSelectedCategoryEvents;\n    }\n\n    if (matchFilters) {\n      if (!currentVersion.byDay[day]) {\n        currentVersion.byDay[day] = [];\n      }\n      currentVersion.byDay[day].push(analysis);\n    }\n    return acc;\n  }, []);\n}\n\nexport function getDisplayedHistoryMetrics(graph: string, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS_DISPLAYED[graph];\n}\n\nexport function getHistoryMetrics(graph: string, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS[graph];\n}\n\nfunction parseGraph(value?: string) {\n  const graph = parseAsString(value);\n  return GRAPH_TYPES.includes(graph) ? graph : DEFAULT_GRAPH;\n}\n\nfunction serializeGraph(value: string) {\n  return value === DEFAULT_GRAPH ? undefined : value;\n}\n\nexport function parseQuery(urlQuery: RawQuery): Query {\n  return {\n    category: parseAsString(urlQuery['category']),\n    customMetrics: parseAsArray(urlQuery['custom_metrics'], parseAsString),\n    from: parseAsDate(urlQuery['from']),\n    graph: parseGraph(urlQuery['graph']),\n    project: parseAsString(urlQuery['id']),\n    to: parseAsDate(urlQuery['to']),\n    selectedDate: parseAsDate(urlQuery['selected_date'])\n  };\n}\n\nexport function serializeQuery(query: Query): RawQuery {\n  return cleanQuery({\n    category: serializeString(query.category),\n    from: serializeDate(query.from),\n    project: serializeString(query.project),\n    to: serializeDate(query.to)\n  });\n}\n\nexport function serializeUrlQuery(query: Query): RawQuery {\n  return cleanQuery({\n    category: serializeString(query.category),\n    custom_metrics: serializeStringArray(query.customMetrics),\n    from: serializeDate(query.from),\n    graph: serializeGraph(query.graph),\n    id: serializeString(query.project),\n    to: serializeDate(query.to),\n    selected_date: serializeDate(query.selectedDate)\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isLoggedIn } from './users';\n\nexport function isPaidOrganization(organization: T.Organization | undefined): boolean {\n  return Boolean(organization && organization.subscription === 'PAID');\n}\n\nexport function hasPrivateAccess(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return (\n    !isPaidOrganization(organization) ||\n    isCurrentUserMemberOf(currentUser, organization, userOrganizations)\n  );\n}\n\nexport function isCurrentUserMemberOf(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return Boolean(\n    organization &&\n      isLoggedIn(currentUser) &&\n      ((organization.actions && organization.actions.admin) ||\n        userOrganizations.some(org => org.key === organization.key))\n  );\n}\n","var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BubblesIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size} style={{ fillRule: 'nonzero' }}>\n      <path\n        d=\"M4.1 10.2c1 0 1.9.8 1.9 1.9S5.1 14 4.1 14s-1.9-.8-1.9-1.9.8-1.9 1.9-1.9m0-2C2 8.2.2 9.9.2 12.1S1.9 16 4.1 16 8 14.3 8 12.1 6.2 8.2 4.1 8.2zM10.3 2c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7-3.8-1.6-3.8-3.7S8.2 2 10.3 2m0-2C7.1 0 4.5 2.6 4.5 5.7s2.6 5.7 5.7 5.7S16 8.9 16 5.7 13.4 0 10.3 0z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function VisibleIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M13.524 8.403q-1.093-1.697-2.74-2.539 0.439 0.748 0.439 1.618 0 1.331-0.946 2.276t-2.276 0.946-2.276-0.946-0.946-2.276q0-0.87 0.439-1.618-1.647 0.842-2.74 2.539 0.957 1.474 2.399 2.348t3.125 0.874 3.125-0.874 2.399-2.348zM8.345 5.641q0-0.144-0.101-0.245t-0.245-0.101q-0.899 0-1.543 0.644t-0.644 1.543q0 0.144 0.101 0.245t0.245 0.101 0.245-0.101 0.101-0.245q0-0.619 0.439-1.057t1.057-0.439q0.144 0 0.245-0.101t0.101-0.245zM14.444 8.403q0 0.245-0.144 0.496-1.007 1.654-2.708 2.65t-3.593 0.996-3.593-1-2.708-2.647q-0.144-0.252-0.144-0.496t0.144-0.496q1.007-1.647 2.708-2.647t3.593-1 3.593 1 2.708 2.647q0.144 0.252 0.144 0.496z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { connect } from 'react-redux';\nimport * as theme from '../../app/theme';\nimport Tooltip from '../controls/Tooltip';\nimport { translate } from '../../helpers/l10n';\nimport { isSonarCloud } from '../../helpers/system';\nimport { isCurrentUserMemberOf, isPaidOrganization } from '../../helpers/organizations';\nimport {\n  getCurrentUser,\n  getOrganizationByKey,\n  getMyOrganizations,\n  Store\n} from '../../store/rootReducer';\nimport VisibleIcon from '../icons-components/VisibleIcon';\nimport DocTooltip from '../docs/DocTooltip';\n\ninterface StateToProps {\n  currentUser: T.CurrentUser;\n  organization?: T.Organization;\n  userOrganizations: T.Organization[];\n}\n\ninterface OwnProps {\n  className?: string;\n  organization: T.Organization | string | undefined;\n  qualifier: string;\n  tooltipProps?: { projectKey: string };\n  visibility: T.Visibility;\n}\n\ninterface Props extends OwnProps, StateToProps {\n  organization: T.Organization | undefined;\n}\n\nexport function PrivacyBadge({\n  className,\n  currentUser,\n  organization,\n  qualifier,\n  userOrganizations,\n  tooltipProps,\n  visibility\n}: Props) {\n  const onSonarCloud = isSonarCloud();\n  if (\n    visibility !== 'private' &&\n    (!onSonarCloud || !isCurrentUserMemberOf(currentUser, organization, userOrganizations))\n  ) {\n    return null;\n  }\n\n  let icon = null;\n  if (isPaidOrganization(organization) && visibility === 'public') {\n    icon = <VisibleIcon className=\"little-spacer-right\" fill={theme.blue} />;\n  }\n\n  const badge = (\n    <div\n      className={classNames('outline-badge', className, {\n        'badge-info': Boolean(icon),\n        'badge-icon': Boolean(icon)\n      })}>\n      {icon}\n      {translate('visibility', visibility)}\n    </div>\n  );\n\n  if (onSonarCloud && organization) {\n    return (\n      <DocTooltip\n        className={className}\n        doc={getDoc(visibility, icon, organization)}\n        overlayProps={{ ...tooltipProps, organization: organization.key }}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n\n  return (\n    <Tooltip overlay={translate('visibility', visibility, 'description', qualifier)}>\n      {badge}\n    </Tooltip>\n  );\n}\n\nconst mapStateToProps = (state: Store, { organization }: OwnProps) => {\n  if (typeof organization === 'string') {\n    organization = getOrganizationByKey(state, organization);\n  }\n  return {\n    currentUser: getCurrentUser(state),\n    organization,\n    userOrganizations: getMyOrganizations(state)\n  };\n};\n\nexport default connect(mapStateToProps)(PrivacyBadge);\n\nfunction getDoc(visibility: T.Visibility, icon: JSX.Element | null, organization: T.Organization) {\n  let doc;\n  const { actions = {} } = organization;\n  if (visibility === 'private') {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-private.md');\n  } else if (icon) {\n    if (actions.admin) {\n      doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-paid-org-admin.md');\n    } else {\n      doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-paid-org.md');\n    }\n  } else if (actions.admin) {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-admin.md');\n  } else {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public.md');\n  }\n  return doc;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2018 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.bar-chart-bar {\\n  fill: #4b9fd5;\\n}\\n\\n.bar-chart-tick {\\n  fill: #777;\\n  font-size: 12px;\\n  text-anchor: middle;\\n}\\n\", \"\"]);\n\n// exports\n","module.exports = \"This project is private. Only the members of this organization are able to browse it and its source code.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Go to your project's [Administration > Permissions](/#sonarcloud#/project_roles?id=#projectKey#) to make it private.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Contact the project administrator to make it private.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Subscribe to a paid plan to get unlimited private projects in [Administration > Billing](/#sonarcloud#/organizations/#organization#/extension/billing/billing).\\n\\n---\\n\\nSee also: [Pricing](/sonarcloud-pricing/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Contact the organization administrator if you want to make it private.\\n\\n---\\n\\nSee also: [Pricing](/sonarcloud-pricing/)\\n\"","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ChartLegendIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.325 7.143v1.714q0 0.357-0.25 0.607t-0.607 0.25h-10.857q-0.357 0-0.607-0.25t-0.25-0.607v-1.714q0-0.357 0.25-0.607t0.607-0.25h10.857q0.357 0 0.607 0.25t0.25 0.607z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function HistoryIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.7 3.4v3.3c0 .1 0 .2-.1.2s-.2 0-.3-.1l-.9-.9-4.8 4.8c-.1.1-.1.1-.2.1s-.1 0-.2-.1L6.4 9l-3.2 3.2-1.5-1.5 4.5-4.5c.1-.1.1-.1.2-.1s.1 0 .2.1L8.4 8l3.5-3.5-.9-1c-.1-.1-.1-.2-.1-.3s.1-.1.2-.1h3.3c.1 0 .1 0 .2.1.1 0 .1.1.1.2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2018 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.histogram-tick {\\n  text-anchor: end;\\n}\\n\\n.histogram-tick-start {\\n  text-anchor: start;\\n}\\n\\n.histogram-value {\\n  text-anchor: start;\\n}\\n\", \"\"]);\n\n// exports\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2018 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.line-chart-path {\\n  fill: none;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-path.line-chart-path-1 {\\n  stroke: #236a97;\\n}\\n\\n.line-chart-path.line-chart-path-2 {\\n  stroke: #24c6e0;\\n}\\n\\n.line-chart-area {\\n  fill: rgba(75, 159, 213, 0.3);\\n  stroke-width: 0;\\n}\\n\\n.line-chart-area.line-chart-area-1 {\\n  fill: rgba(35, 106, 151, 0.3);\\n}\\n\\n.line-chart-area.line-chart-area-2 {\\n  fill: rgba(36, 198, 224, 0.3);\\n}\\n\\n.line-chart-point {\\n  fill: #fff;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-tick {\\n  fill: #777;\\n  font-size: 12px;\\n  text-anchor: middle;\\n}\\n\\n.line-chart-tick-x {\\n  text-anchor: end;\\n}\\n\\n.line-chart-tick-x-right {\\n  text-anchor: start;\\n}\\n\\n.line-chart-grid {\\n  shape-rendering: crispedges;\\n  stroke: #eee;\\n}\\n\", \"\"]);\n\n// exports\n","var baseExtremum = require('./_baseExtremum'),\n    baseIteratee = require('./_baseIteratee'),\n    baseLt = require('./_baseLt');\n\n/**\n * This method is like `_.min` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * // The `_.property` iteratee shorthand.\n * _.minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nfunction minBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseLt)\n    : undefined;\n}\n\nmodule.exports = minBy;\n","/**\n * The base implementation of `_.lt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than `other`,\n *  else `false`.\n */\nfunction baseLt(value, other) {\n  return value < other;\n}\n\nmodule.exports = baseLt;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { flatten, isEqual, sortBy, throttle, uniq } from 'lodash';\nimport { bisector, extent, max } from 'd3-array';\nimport { scaleLinear, scalePoint, scaleTime, ScaleTime } from 'd3-scale';\nimport { line as d3Line, area, curveBasis } from 'd3-shape';\nimport * as theme from '../../app/theme';\nimport { Serie, Point } from '../../apps/projectActivity/utils';\nimport { isDefined } from '../../helpers/types';\nimport './LineChart.css';\nimport './AdvancedTimeline.css';\n\nexport interface Props {\n  basisCurve?: boolean;\n  endDate?: Date;\n  disableZoom?: boolean;\n  formatYTick?: (tick: number | string) => string;\n  hideGrid?: boolean;\n  hideXAxis?: boolean;\n  height: number;\n  width: number;\n  leakPeriodDate?: Date;\n  // used to avoid same y ticks labels\n  maxYTicksCount: number;\n  metricType: string;\n  padding: number[];\n  selectedDate?: Date;\n  series: Serie[];\n  showAreas?: boolean;\n  startDate?: Date;\n  updateSelectedDate?: (selectedDate?: Date) => void;\n  updateTooltip?: (selectedDate?: Date, tooltipXPos?: number, tooltipIdx?: number) => void;\n  updateZoom?: (start?: Date, endDate?: Date) => void;\n  zoomSpeed: number;\n}\n\ntype XScale = ScaleTime<number, number>;\n// TODO it should be `ScaleLinear<number, number> | ScalePoint<number> | ScalePoint<string>`, but it's super hard to make it work :'(\ntype YScale = any;\n\ninterface State {\n  maxXRange: number[];\n  mouseOver?: boolean;\n  selectedDate?: Date;\n  selectedDateXPos?: number;\n  selectedDateIdx?: number;\n  yScale: YScale;\n  xScale: XScale;\n}\n\nexport default class AdvancedTimeline extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    eventSize: 8,\n    maxYTicksCount: 4,\n    padding: [10, 10, 30, 60],\n    zoomSpeed: 1\n  };\n\n  constructor(props: Props) {\n    super(props);\n    const scales = this.getScales(props);\n    const selectedDatePos = this.getSelectedDatePos(scales.xScale, props.selectedDate);\n    this.state = { ...scales, ...selectedDatePos };\n    this.updateTooltipPos = throttle(this.updateTooltipPos, 40);\n    this.handleZoomUpdate = throttle(this.handleZoomUpdate, 40);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    let scales;\n    let selectedDatePos;\n    if (\n      nextProps.metricType !== this.props.metricType ||\n      nextProps.startDate !== this.props.startDate ||\n      nextProps.endDate !== this.props.endDate ||\n      nextProps.width !== this.props.width ||\n      nextProps.padding !== this.props.padding ||\n      nextProps.height !== this.props.height ||\n      nextProps.series !== this.props.series\n    ) {\n      scales = this.getScales(nextProps);\n      if (this.state.selectedDate != null) {\n        selectedDatePos = this.getSelectedDatePos(scales.xScale, this.state.selectedDate);\n      }\n    }\n\n    if (!isEqual(nextProps.selectedDate, this.props.selectedDate)) {\n      const xScale = scales ? scales.xScale : this.state.xScale;\n      selectedDatePos = this.getSelectedDatePos(xScale, nextProps.selectedDate);\n    }\n\n    if (scales || selectedDatePos) {\n      if (scales) {\n        this.setState({ ...scales });\n      }\n      if (selectedDatePos) {\n        this.setState({ ...selectedDatePos });\n      }\n\n      if (selectedDatePos && nextProps.updateTooltip) {\n        nextProps.updateTooltip(\n          selectedDatePos.selectedDate,\n          selectedDatePos.selectedDateXPos,\n          selectedDatePos.selectedDateIdx\n        );\n      }\n    }\n  }\n\n  getRatingScale = (availableHeight: number) => {\n    return scalePoint<number>()\n      .domain([5, 4, 3, 2, 1])\n      .range([availableHeight, 0]);\n  };\n\n  getLevelScale = (availableHeight: number) => {\n    return scalePoint()\n      .domain(['ERROR', 'WARN', 'OK'])\n      .range([availableHeight, 0]);\n  };\n\n  getYScale = (props: Props, availableHeight: number, flatData: Point[]): YScale => {\n    if (props.metricType === 'RATING') {\n      return this.getRatingScale(availableHeight);\n    } else if (props.metricType === 'LEVEL') {\n      return this.getLevelScale(availableHeight);\n    } else {\n      return scaleLinear()\n        .range([availableHeight, 0])\n        .domain([0, max(flatData, d => Number(d.y || 0)) || 1])\n        .nice();\n    }\n  };\n\n  getXScale = ({ startDate, endDate }: Props, availableWidth: number, flatData: Point[]) => {\n    const dateRange = extent(flatData, d => d.x) as [Date, Date];\n    const start = startDate && startDate > dateRange[0] ? startDate : dateRange[0];\n    const end = endDate && endDate < dateRange[1] ? endDate : dateRange[1];\n    const xScale: ScaleTime<number, number> = scaleTime()\n      .domain(sortBy([start, end]))\n      .range([0, availableWidth])\n      .clamp(false);\n    return {\n      xScale,\n      maxXRange: dateRange.map(xScale)\n    };\n  };\n\n  getScales = (props: Props) => {\n    const availableWidth = props.width - props.padding[1] - props.padding[3];\n    const availableHeight = props.height - props.padding[0] - props.padding[2];\n    const flatData = flatten(props.series.map(serie => serie.data));\n    return {\n      ...this.getXScale(props, availableWidth, flatData),\n      yScale: this.getYScale(props, availableHeight, flatData)\n    };\n  };\n\n  getSelectedDatePos = (xScale: XScale, selectedDate?: Date) => {\n    const firstSerie = this.props.series[0];\n    if (selectedDate && firstSerie) {\n      const idx = firstSerie.data.findIndex(p => p.x.valueOf() === selectedDate.valueOf());\n      const xRange = xScale.range().sort();\n      const xPos = xScale(selectedDate);\n      if (idx >= 0 && xPos >= xRange[0] && xPos <= xRange[1]) {\n        return {\n          selectedDate,\n          selectedDateXPos: xScale(selectedDate),\n          selectedDateIdx: idx\n        };\n      }\n    }\n    return { selectedDate: undefined, selectedDateXPos: undefined, selectedDateIdx: undefined };\n  };\n\n  getEventMarker = (size: number) => {\n    const half = size / 2;\n    return `M${half} 0 L${size} ${half} L ${half} ${size} L0 ${half} L${half} 0 L${size} ${half}`;\n  };\n\n  handleWheel = (event: React.WheelEvent<SVGElement>) => {\n    event.preventDefault();\n    const { maxXRange, xScale } = this.state;\n    const parentBbox = event.currentTarget.getBoundingClientRect();\n    const mouseXPos = (event.pageX - parentBbox.left) / parentBbox.width;\n    const xRange = xScale.range();\n    const speed = event.deltaMode\n      ? (25 / event.deltaMode) * this.props.zoomSpeed\n      : this.props.zoomSpeed;\n    const leftPos = xRange[0] - Math.round(speed * event.deltaY * mouseXPos);\n    const rightPos = xRange[1] + Math.round(speed * event.deltaY * (1 - mouseXPos));\n    const startDate = leftPos > maxXRange[0] ? xScale.invert(leftPos) : undefined;\n    const endDate = rightPos < maxXRange[1] ? xScale.invert(rightPos) : undefined;\n    this.handleZoomUpdate(startDate, endDate);\n  };\n\n  handleZoomUpdate = (startDate?: Date, endDate?: Date) => {\n    if (this.props.updateZoom) {\n      this.props.updateZoom(startDate, endDate);\n    }\n  };\n\n  handleMouseMove = (event: React.MouseEvent<SVGElement>) => {\n    const parentBbox = event.currentTarget.getBoundingClientRect();\n    this.updateTooltipPos(event.pageX - parentBbox.left);\n  };\n\n  handleMouseEnter = () => {\n    this.setState({ mouseOver: true });\n  };\n\n  handleMouseOut = () => {\n    const { updateTooltip } = this.props;\n    if (updateTooltip) {\n      this.setState({\n        mouseOver: false,\n        selectedDate: undefined,\n        selectedDateXPos: undefined,\n        selectedDateIdx: undefined\n      });\n      updateTooltip(undefined, undefined, undefined);\n    }\n  };\n\n  handleClick = () => {\n    const { updateSelectedDate } = this.props;\n    if (updateSelectedDate) {\n      updateSelectedDate(this.state.selectedDate || undefined);\n    }\n  };\n\n  updateTooltipPos = (xPos: number) => {\n    const firstSerie = this.props.series[0];\n    if (this.state.mouseOver && firstSerie) {\n      const { updateTooltip } = this.props;\n      const date = this.state.xScale.invert(xPos);\n      const bisectX = bisector<Point, Date>(d => d.x).right;\n      let idx = bisectX(firstSerie.data, date);\n      if (idx >= 0) {\n        const previousPoint = firstSerie.data[idx - 1];\n        const nextPoint = firstSerie.data[idx];\n        if (\n          !nextPoint ||\n          (previousPoint &&\n            date.valueOf() - previousPoint.x.valueOf() <= nextPoint.x.valueOf() - date.valueOf())\n        ) {\n          idx--;\n        }\n        const selectedDate = firstSerie.data[idx].x;\n        const xPos = this.state.xScale(selectedDate);\n        this.setState({ selectedDate, selectedDateXPos: xPos, selectedDateIdx: idx });\n        if (updateTooltip) {\n          updateTooltip(selectedDate, xPos, idx);\n        }\n      }\n    }\n  };\n\n  renderHorizontalGrid = () => {\n    const { formatYTick } = this.props;\n    const { xScale, yScale } = this.state;\n    const hasTicks = typeof yScale.ticks === 'function';\n    let ticks: Array<string | number> = hasTicks\n      ? yScale.ticks(this.props.maxYTicksCount)\n      : yScale.domain();\n\n    if (!ticks.length) {\n      ticks.push(yScale.domain()[1]);\n    }\n\n    // if there are duplicated ticks, that means 4 ticks are too much for this data\n    // so let's just use the domain values (min and max)\n    if (formatYTick) {\n      const formattedTicks = ticks.map(tick => formatYTick(tick));\n      if (ticks.length > uniq(formattedTicks).length) {\n        ticks = yScale.domain();\n      }\n    }\n\n    return (\n      <g>\n        {ticks.map(tick => (\n          <g key={tick}>\n            {formatYTick != null && (\n              <text\n                className=\"line-chart-tick line-chart-tick-x\"\n                dx=\"-1em\"\n                dy=\"0.3em\"\n                textAnchor=\"end\"\n                x={xScale.range()[0]}\n                y={yScale(tick)}>\n                {formatYTick(tick)}\n              </text>\n            )}\n            <line\n              className=\"line-chart-grid\"\n              x1={xScale.range()[0]}\n              x2={xScale.range()[1]}\n              y1={yScale(tick)}\n              y2={yScale(tick)}\n            />\n          </g>\n        ))}\n      </g>\n    );\n  };\n\n  renderXAxisTicks = () => {\n    const { xScale, yScale } = this.state;\n    const format = xScale.tickFormat(7);\n    const ticks = xScale.ticks(7);\n    const y = yScale.range()[0];\n    return (\n      <g>\n        {ticks.slice(0, -1).map((tick, index) => {\n          const nextTick = index + 1 < ticks.length ? ticks[index + 1] : xScale.domain()[1];\n          const x = (xScale(tick) + xScale(nextTick)) / 2;\n          return (\n            <text className=\"line-chart-tick\" dy=\"1.5em\" key={index} x={x} y={y}>\n              {format(tick)}\n            </text>\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderLeak = () => {\n    const { leakPeriodDate } = this.props;\n    if (!leakPeriodDate) {\n      return null;\n    }\n    const { xScale, yScale } = this.state;\n    const yRange = yScale.range();\n    const xRange = xScale.range();\n    const leakWidth = xRange[xRange.length - 1] - xScale(leakPeriodDate);\n    if (leakWidth < 0) {\n      return null;\n    }\n    return (\n      <rect\n        className=\"leak-chart-rect\"\n        fill={theme.leakColor}\n        height={yRange[0] - yRange[yRange.length - 1]}\n        width={leakWidth}\n        x={xScale(leakPeriodDate)}\n        y={yRange[yRange.length - 1]}\n      />\n    );\n  };\n\n  renderLines = () => {\n    const lineGenerator = d3Line<Point>()\n      .defined(d => Boolean(d.y || d.y === 0))\n      .x(d => this.state.xScale(d.x))\n      .y(d => this.state.yScale(d.y));\n    if (this.props.basisCurve) {\n      lineGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            className={classNames('line-chart-path', 'line-chart-path-' + idx)}\n            d={lineGenerator(serie.data) || undefined}\n            key={serie.name}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderDots = () => {\n    return (\n      <g>\n        {this.props.series\n          .map((serie, serieIdx) =>\n            serie.data\n              .map((point, idx) => {\n                const pointNotDefined = !point.y && point.y !== 0;\n                const hasPointBefore =\n                  serie.data[idx - 1] && (serie.data[idx - 1].y || serie.data[idx - 1].y === 0);\n                const hasPointAfter =\n                  serie.data[idx + 1] && (serie.data[idx + 1].y || serie.data[idx + 1].y === 0);\n                if (pointNotDefined || (hasPointBefore || hasPointAfter)) {\n                  return undefined;\n                }\n                return (\n                  <circle\n                    className={classNames('line-chart-dot', 'line-chart-dot-' + serieIdx)}\n                    cx={this.state.xScale(point.x)}\n                    cy={this.state.yScale(point.y)}\n                    key={serie.name + idx}\n                    r=\"2\"\n                  />\n                );\n              })\n              .filter(isDefined)\n          )\n          .filter(dots => dots.length > 0)}\n      </g>\n    );\n  };\n\n  renderAreas = () => {\n    const areaGenerator = area<Point>()\n      .defined(d => Boolean(d.y || d.y === 0))\n      .x(d => this.state.xScale(d.x))\n      .y1(d => this.state.yScale(d.y))\n      .y0(this.state.yScale(0));\n    if (this.props.basisCurve) {\n      areaGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            className={classNames('line-chart-area', 'line-chart-area-' + idx)}\n            d={areaGenerator(serie.data) || undefined}\n            key={serie.name}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderSelectedDate = () => {\n    const { selectedDateIdx, selectedDateXPos, yScale } = this.state;\n    const firstSerie = this.props.series[0];\n    if (selectedDateIdx == null || selectedDateXPos == null || !firstSerie) {\n      return null;\n    }\n\n    return (\n      <g>\n        <line\n          className=\"line-tooltip\"\n          x1={selectedDateXPos}\n          x2={selectedDateXPos}\n          y1={yScale.range()[0]}\n          y2={yScale.range()[1]}\n        />\n        {this.props.series.map((serie, idx) => {\n          const point = serie.data[selectedDateIdx];\n          if (!point || (!point.y && point.y !== 0)) {\n            return null;\n          }\n          return (\n            <circle\n              className={classNames('line-chart-dot', 'line-chart-dot-' + idx)}\n              cx={selectedDateXPos}\n              cy={yScale(point.y)}\n              key={serie.name}\n              r=\"4\"\n            />\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderClipPath = () => {\n    return (\n      <defs>\n        <clipPath id=\"chart-clip\">\n          <rect\n            height={this.state.yScale.range()[0] + 10}\n            transform=\"translate(0,-5)\"\n            width={this.state.xScale.range()[1]}\n          />\n        </clipPath>\n      </defs>\n    );\n  };\n\n  renderMouseEventsOverlay = (zoomEnabled: boolean) => {\n    const mouseEvents: Partial<React.SVGProps<SVGRectElement>> = {};\n    if (zoomEnabled) {\n      mouseEvents.onWheel = this.handleWheel;\n    }\n    if (this.props.updateTooltip) {\n      mouseEvents.onMouseEnter = this.handleMouseEnter;\n      mouseEvents.onMouseMove = this.handleMouseMove;\n      mouseEvents.onMouseOut = this.handleMouseOut;\n    }\n    if (this.props.updateSelectedDate) {\n      mouseEvents.onClick = this.handleClick;\n    }\n    return (\n      <rect\n        className=\"chart-mouse-events-overlay\"\n        height={this.state.yScale.range()[0]}\n        width={this.state.xScale.range()[1]}\n        {...mouseEvents}\n      />\n    );\n  };\n\n  render() {\n    if (!this.props.width || !this.props.height) {\n      return <div />;\n    }\n    const zoomEnabled = !this.props.disableZoom && this.props.updateZoom != null;\n    const isZoomed = Boolean(this.props.startDate || this.props.endDate);\n    return (\n      <svg\n        className={classNames('line-chart', { 'chart-zoomed': isZoomed })}\n        height={this.props.height}\n        width={this.props.width}>\n        {zoomEnabled && this.renderClipPath()}\n        <g transform={`translate(${this.props.padding[3]}, ${this.props.padding[0]})`}>\n          {this.props.leakPeriodDate != null && this.renderLeak()}\n          {!this.props.hideGrid && this.renderHorizontalGrid()}\n          {!this.props.hideXAxis && this.renderXAxisTicks()}\n          {this.props.showAreas && this.renderAreas()}\n          {this.renderLines()}\n          {this.renderDots()}\n          {this.renderSelectedDate()}\n          {this.renderMouseEventsOverlay(zoomEnabled)}\n        </g>\n      </svg>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2018 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.line-tooltip {\\n  fill: none;\\n  stroke: #777;\\n  stroke-width: 1px;\\n  shape-rendering: crispEdges;\\n}\\n\\n.chart-mouse-events-overlay {\\n  fill: none;\\n  stroke: none;\\n  pointer-events: all;\\n}\\n\\n.chart-zoomed .line-chart-area {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.chart-zoomed .line-chart-path {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.chart-zoomed .leak-chart-rect {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.line-chart-dot {\\n  fill: #4b9fd5;\\n}\\n\\n.line-chart-dot.line-chart-dot-1 {\\n  fill: #236a97;\\n}\\n\\n.line-chart-dot.line-chart-dot-2 {\\n  fill: #24c6e0;\\n}\\n\\n.line-chart-event {\\n  fill: #fff;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-event.VERSION {\\n  stroke: #4b9fd5;\\n}\\n\\n.line-chart-event.QUALITY_GATE {\\n  stroke: #00aa00;\\n}\\n\\n.line-chart-event.QUALITY_PROFILE {\\n  stroke: #ed7d20;\\n}\\n\\n.line-chart-event.OTHER {\\n  stroke: #9139d4;\\n}\\n\", \"\"]);\n\n// exports\n","var baseSlice = require('./_baseSlice'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * Creates an array of elements split into groups the length of `size`.\n * If `array` can't be split evenly, the final chunk will be the remaining\n * elements.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to process.\n * @param {number} [size=1] The length of each chunk\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the new array of chunks.\n * @example\n *\n * _.chunk(['a', 'b', 'c', 'd'], 2);\n * // => [['a', 'b'], ['c', 'd']]\n *\n * _.chunk(['a', 'b', 'c', 'd'], 3);\n * // => [['a', 'b', 'c'], ['d']]\n */\nfunction chunk(array, size, guard) {\n  if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n    size = 1;\n  } else {\n    size = nativeMax(toInteger(size), 0);\n  }\n  var length = array == null ? 0 : array.length;\n  if (!length || size < 1) {\n    return [];\n  }\n  var index = 0,\n      resIndex = 0,\n      result = Array(nativeCeil(length / size));\n\n  while (index < length) {\n    result[resIndex++] = baseSlice(array, index, (index += size));\n  }\n  return result;\n}\n\nmodule.exports = chunk;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\ninterface TimeMachineResponse {\n  measures: {\n    metric: string;\n    history: Array<{ date: string; value?: string }>;\n  }[];\n  paging: T.Paging;\n}\n\nexport function getTimeMachineData(\n  data: {\n    component: string;\n    from?: string;\n    metrics: string;\n    p?: number;\n    ps?: number;\n    to?: string;\n  } & T.BranchParameters\n): Promise<TimeMachineResponse> {\n  return getJSON('/api/measures/search_history', data).catch(throwGlobalError);\n}\n\nexport function getAllTimeMachineData(\n  data: {\n    component: string;\n    metrics: string;\n    from?: string;\n    p?: number;\n    to?: string;\n  } & T.BranchParameters,\n  prev?: TimeMachineResponse\n): Promise<TimeMachineResponse> {\n  return getTimeMachineData({ ...data, ps: 1000 }).then(r => {\n    const result = prev\n      ? {\n          measures: prev.measures.map((measure, idx) => ({\n            ...measure,\n            history: measure.history.concat(r.measures[idx].history)\n          })),\n          paging: r.paging\n        }\n      : r;\n\n    if (result.paging.pageIndex * result.paging.pageSize >= result.paging.total) {\n      return result;\n    }\n    return getAllTimeMachineData({ ...data, p: result.paging.pageIndex + 1 }, result);\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { max } from 'd3-array';\nimport { scaleLinear, scaleBand, ScaleLinear, ScaleBand } from 'd3-scale';\nimport Tooltip from '../controls/Tooltip';\nimport './BarChart.css';\nimport './Histogram.css';\n\ninterface Props {\n  alignTicks?: boolean;\n  bars: number[];\n  height: number;\n  padding?: [number, number, number, number];\n  yTicks?: string[];\n  yTooltips?: string[];\n  yValues?: string[];\n  width: number;\n}\n\nconst BAR_HEIGHT = 10;\nconst DEFAULT_PADDING = [10, 10, 10, 10];\n\ntype XScale = ScaleLinear<number, number>;\ntype YScale = ScaleBand<number>;\n\nexport default class Histogram extends React.PureComponent<Props> {\n  renderBar(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING } = this.props;\n\n    const width = Math.round(xScale(d)) + /* minimum bar width */ 1;\n    const x = xScale.range()[0] + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2);\n\n    return <rect className=\"bar-chart-bar\" height={BAR_HEIGHT} width={width} x={x} y={y} />;\n  }\n\n  renderValue(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING, yValues } = this.props;\n\n    const value = yValues && yValues[index];\n\n    if (!value) {\n      return null;\n    }\n\n    const x = xScale(d) + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n\n    return (\n      <Tooltip overlay={this.props.yTooltips && this.props.yTooltips[index]}>\n        <text className=\"bar-chart-tick histogram-value\" dx=\"1em\" dy=\"0.3em\" x={x} y={y}>\n          {value}\n        </text>\n      </Tooltip>\n    );\n  }\n\n  renderTick(index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, yTicks } = this.props;\n\n    const tick = yTicks && yTicks[index];\n\n    if (!tick) {\n      return null;\n    }\n\n    const x = xScale.range()[0];\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n    const historyTickClass = alignTicks ? 'histogram-tick-start' : 'histogram-tick';\n\n    return (\n      <text\n        className={'bar-chart-tick ' + historyTickClass}\n        dx={alignTicks ? 0 : '-1em'}\n        dy=\"0.3em\"\n        x={x}\n        y={y}>\n        {tick}\n      </text>\n    );\n  }\n\n  renderBars(xScale: XScale, yScale: YScale) {\n    return (\n      <g>\n        {this.props.bars.map((d, index) => {\n          return (\n            <g key={index}>\n              {this.renderBar(d, index, xScale, yScale)}\n              {this.renderValue(d, index, xScale, yScale)}\n              {this.renderTick(index, xScale, yScale)}\n            </g>\n          );\n        })}\n      </g>\n    );\n  }\n\n  render() {\n    const { bars, width, height, padding = DEFAULT_PADDING } = this.props;\n\n    const availableWidth = width - padding[1] - padding[3];\n    const xScale: XScale = scaleLinear()\n      .domain([0, max(bars)!])\n      .range([0, availableWidth]);\n\n    const availableHeight = height - padding[0] - padding[2];\n    const yScale: YScale = scaleBand<number>()\n      .domain(bars.map((_, index) => index))\n      .rangeRound([0, availableHeight]);\n\n    return (\n      <svg className=\"bar-chart\" height={this.props.height} width={this.props.width}>\n        <g transform={`translate(${this.props.alignTicks ? 4 : padding[3]}, ${padding[0]})`}>\n          {this.renderBars(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy } from 'lodash';\nimport Histogram from './Histogram';\nimport { formatMeasure } from '../../helpers/measures';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  alignTicks?: boolean;\n  distribution: string;\n  languages: T.Languages;\n  width: number;\n}\n\nexport default function LanguageDistribution(props: Props) {\n  let distribution = props.distribution.split(';').map(point => {\n    const tokens = point.split('=');\n    return { language: tokens[0], lines: parseInt(tokens[1], 10) };\n  });\n\n  distribution = sortBy(distribution, d => -d.lines);\n\n  const data = distribution.map(d => d.lines);\n  const yTicks = distribution.map(d => getLanguageName(d.language)).map(cutLanguageName);\n  const yTooltips = distribution.map(d => (d.lines > 1000 ? formatMeasure(d.lines, 'INT') : ''));\n  const yValues = distribution.map(d => formatMeasure(d.lines, 'SHORT_INT'));\n\n  return (\n    <Histogram\n      alignTicks={props.alignTicks}\n      bars={data}\n      height={distribution.length * 25}\n      padding={[0, 60, 0, 80]}\n      width={props.width}\n      yTicks={yTicks}\n      yTooltips={yTooltips}\n      yValues={yValues}\n    />\n  );\n\n  function getLanguageName(langKey: string) {\n    if (langKey === '<null>') {\n      return translate('unknown');\n    }\n    const lang = props.languages[langKey];\n    return lang ? lang.name : langKey;\n  }\n}\n\nfunction cutLanguageName(name: string) {\n  return name.length > 10 ? `${name.substr(0, 7)}...` : name;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport LanguageDistribution from './LanguageDistribution';\nimport { getLanguages, Store } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(LanguageDistribution);\n"],"sourceRoot":""}